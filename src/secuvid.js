const t=new class{queue=[];locked=!1;acquire(t){return new Promise((t=>{this.locked?this.queue.push(t):(this.locked=!0,t())}))}release(){0===this.queue.length?this.locked=!1:this.queue.shift()()}};function n(t,n,r,o){Object.defineProperty(t,n,{...o,value:r?.(t)??t[n]})}async function r(n){let r;await t.acquire();try{r=await n()}catch(t){throw t}finally{t.release()}return r}var o;!function(t){t.AUDIO_INPUT="audioinput",t.AUDIO_OUTPUT="audiooutput",t.VIDEO_INPUT="videoinput"}(o||(o={}));let l=v(h());function h(t={}){return{get:()=>t,set:n=>Object.assign(t,n)}}function g(){return l}function v(t){const n=t.get();return{read:t=>Reflect.get(n,t),write:(r,o)=>{Reflect.set(n,r,o),t.set(n)}}}const f={addTrack:MediaStream.prototype.addTrack,removeTrack:MediaStream.prototype.removeTrack,clone:MediaStream.prototype.clone},b={stop:MediaStreamTrack.prototype.stop,clone:MediaStreamTrack.prototype.clone},_=new Map;async function y(t,n,r=1e3){for(;!n.signal.aborted;)try{return await navigator.mediaDevices.getUserMedia(t)}catch(t){if("AbortError"!==t.name)throw t;await new Promise((t=>setTimeout(t,r)))}}async function w(t,n){return r((async()=>{if(void 0===t)throw new TypeError("A MediaDeviceInfo object must be provided");let r;r=_.has(t.deviceId)?_.get(t.deviceId).create():await async function(t,n,r={timeout:5e3}){const l=t.kind===o.VIDEO_INPUT?{video:{...n,deviceId:{exact:t.deviceId},...window.chrome||navigator.vendor.includes("Google")?T:void 0}}:{audio:{...n,deviceId:{exact:t.deviceId}}},h=new AbortController,g=new Promise(((n,o)=>{setTimeout((()=>{h.abort(),o(new Error(`Failed to request device "${t.label}": Operation timed out`))}),r.timeout)})),v=await Promise.race([y(l,h),g]),f=v.getTracks()[0],w=function(t,n){let r=0;return{create:()=>(r+=1,{value:n.create(t),release(){r-=1,0===r&&n.close()}})}}(f,{create:t=>b.clone.call(t),close:()=>{f.stop(),_.delete(t.deviceId)}});return _.set(t.deviceId,w),v.removeTrack(f),w.create()}(t,n);const{value:l,release:h}=r;return Object.defineProperty(l,"onended",{value:h,writable:!1,configurable:!1}),"object"==typeof n&&await l.applyConstraints(n),new MediaStream([l])}))}function x(t){if(!(t instanceof MediaStreamTrack))throw new TypeError('Failed to stop track: Argument for "track" is not a MediaStreamTrack');const n=new Event("ended");b.stop.call(t),t.dispatchEvent(n)}function C(t){const{deviceId:n}=t.getSettings();let r;if(_.has(n)){const{value:t,release:o}=_.get(n).create();r=t,t.onended=o}else r=b.clone.call(t);return r}navigator.mediaDevices.addEventListener("devicechange",A);const k=new Map,$=[],T={height:void 0,width:void 0};function A(){return r((()=>navigator.mediaDevices.enumerateDevices().then((t=>{$.splice(0),$.push(...t)}))))}function O(){return r((()=>$.filter((t=>t.kind===o.AUDIO_INPUT))))}function D(){return r((()=>$.filter((t=>t.kind===o.VIDEO_INPUT))))}function R(){return r((()=>$.filter((t=>t.kind===o.AUDIO_OUTPUT))))}function B(t){return $.find((n=>n.deviceId===t.getSettings().deviceId))}async function U(t,n,r){if(t.kind!==o.VIDEO_INPUT)throw new TypeError("Unable to test video resolutions, parameter is not a video device info");const[l,h]=function(t,n){const r=g().read(t.deviceId)??{};return n.map((({width:t,height:n})=>[{width:t,height:n},r?.[t]?.[n]]))}(t,n).reduce(((t,n)=>(t["boolean"!=typeof n[1]||r?.bypassCache?0:1].push(n),t)),[[],[]]);if(l.length>0){const n=(await w(t)).getVideoTracks()[0];try{await Promise.all(l.map((async t=>{try{await n.applyConstraints({height:{exact:t[0].height},width:{exact:t[0].width}}),t[1]=!0}catch(n){if("OverconstrainedError"!==n.name)throw n;t[1]=!1}})))}finally{x(n)}}const v=[...l,...h];return function(t,...n){const r=g().read(t.deviceId)??{};n.forEach((([{width:t,height:n},o])=>{Reflect.has(r,t)?Reflect.set(r[t],n,o):Reflect.set(r,t,{[n]:o})})),g().write(t.deviceId,r)}(t,...v),v.filter((t=>t[1])).map((t=>t[0]))}function F(t,n){if(!(t instanceof MediaStreamTrack))throw new TypeError('Failed to add track: Argument for "track" is not a MediaStreamTrack');if(!(n instanceof MediaStream))throw new TypeError('Failed to add track: Argument for "stream" is not a MediaStream');const r=new MediaStreamTrackEvent("addtrack",{track:t});f.addTrack.call(n,t),n.dispatchEvent(r)}function z(t,n){if(!(t instanceof MediaStreamTrack))throw new TypeError('Failed to add track: Argument for "track" is not a MediaStreamTrack');if(!(n instanceof MediaStream))throw new TypeError('Failed to add track: Argument for "stream" is not a MediaStream');const r=new MediaStreamTrackEvent("removetrack",{track:t});f.removeTrack.call(n,t),n.dispatchEvent(r)}function V(t){if(!(t instanceof MediaStream))throw new TypeError('Failed to clone: Argument for "stream" is not a MediaStream');const n=new MediaStream,r=t.getTracks().reduce(((t,n)=>{const{deviceId:r}=B(n)??{};return t[void 0!==r?0:1].push(n),t}),[[],[]]);return r[0].forEach((t=>{const r=C(t);f.addTrack.call(n,r)})),r[1].forEach((t=>{const r=b.clone.call(t);f.addTrack.call(n,r)})),n}function j(...t){if(!t.every((t=>t instanceof MediaStream)))throw new TypeError('Failed to stop stream: Argument for "stream" is not a MediaStream');t.forEach((t=>{t.getTracks().forEach((t=>t.stop())),t.dispatchEvent(new Event("ended"))}))}if(!Object.isExtensible(window.MediaStream.prototype))throw new TypeError('Unable to install "@secuvid-media": MediaStream.prototype is not extensible');if(!Object.isExtensible(window.MediaStreamTrack.prototype))throw new TypeError('Unable to install "@secuvid-media": MediaStreamTrack.prototype is not extensible');n(window.MediaStream.prototype,"addTrack",(()=>function(t){return F(t,this)})),n(window.MediaStream.prototype,"removeTrack",(()=>function(t){return z(t,this)})),n(window.MediaStream.prototype,"clone",(()=>function(){return V(this)})),n(window.MediaStream.prototype,"merge",(()=>function(...t){return function(t,...n){for(const r of n){if(!(r instanceof MediaStream))throw new TypeError("Failed to merge media streams: Source argument is not a MediaStream");for(const n of r.getTracks())z(n,r),F(n,t)}return t}(this,...t)})),n(window.MediaStream.prototype,"reflect",(()=>function(){return function(t){if(!(t instanceof MediaStream))throw new TypeError('Failed to mirror: Argument for "stream" is not a MediaStream');const n=V(t),r=({track:t})=>{F(C(t),n)},o=({track:t})=>{const{deviceId:r}=t.getSettings(),o=n.getTracks().find((t=>t.getSettings().deviceId===r));o instanceof MediaStreamTrack&&(z(o,n),x(o))},l=()=>{t.removeEventListener("addtrack",r),t.removeEventListener("removetrack",o),t.removeEventListener("ended",l)};return t.addEventListener("addtrack",r),t.addEventListener("removetrack",o),t.addEventListener("ended",(()=>j(n))),n.addEventListener("ended",l),n}(this)})),n(window.MediaStream.prototype,"stop",(()=>function(){return j(this)})),n(window.MediaStreamTrack.prototype,"stop",(()=>function(){return x(this)})),n(window.MediaStreamTrack.prototype,"clone",(()=>function(){return C(this)}));let q=!1;class O$1 extends EventTarget{stream;options;context;input;analyser;currentFrame;detecting=!1;timer;notifying=!1;static create(t,n){if(!(t instanceof MediaStream))throw new TypeError("Parameter is not a MediaStream");if(0===t.getAudioTracks().length)throw new TypeError("MediaStream has no audio tracks");const r={activationDuration:250,activationThreshold:.5,channel:0,highpassCutoff:255,idleDuration:500,lowpassCutoff:85,maxDecibels:-30,minDecibels:-100,...n},o=t.getAudioTracks()[r.channel],l=new MediaStream([C(o)]);return new O$1(l,r)}static clamp(t,n,r){return Math.min(Math.max(t,n),r)}static getFreqencyIndex(t,n,r){const o=Math.round(2*t/n*r);return O$1.clamp(o,0,r)}constructor(t,n){super(),this.stream=t,this.options=n,this.context=new(window.AudioContext??window.webkitAudioContext),this.input=this.context.createMediaStreamSource(this.stream),this.analyser=this.context.createAnalyser(),this.start()}get range(){const{lowpassCutoff:t,highpassCutoff:n}=this.options,{frequencyBinCount:r}=this.analyser,{sampleRate:o}=this.context;return[O$1.getFreqencyIndex(t,o,r),O$1.getFreqencyIndex(n,o,r)]}start(){const{minDecibels:t,maxDecibels:n}=this.options;this.nextFrame(),this.analyser.fftSize=8192,this.analyser.smoothingTimeConstant=.8,this.analyser.maxDecibels=n,this.analyser.minDecibels=t,this.input.connect(this.analyser)}nextFrame(){this.currentFrame=window.requestAnimationFrame(this.onFrame.bind(this))}cancelFrame(){window.cancelAnimationFrame(this.currentFrame)}onFrame(t){const n=new Uint8Array(this.analyser.frequencyBinCount);this.analyser.getByteFrequencyData(n);const[r,o]=this.range,l=Array.from(n.slice(r,o)).map((t=>t/255)),h=l.reduce(((t,n)=>t+n),0)/l.length,g=O$1.clamp(h,0,1);g>=this.options.activationThreshold&&!this.detecting?this.onActivationStart():g<this.options.activationThreshold&&this.detecting&&this.onActivationEnd(),this.dispatchEvent(new CustomEvent("data",{detail:g})),"running"===this.context.state&&this.nextFrame()}onActivationStart(){clearTimeout(this.timer),this.detecting=!0,this.timer=setTimeout((()=>{this.notifying||(this.notifying=!0,this.dispatchEvent(new CustomEvent("activationstart")))}),this.options.activationDuration)}onActivationEnd(){clearTimeout(this.timer),this.detecting=!1,this.timer=setTimeout((()=>{this.notifying&&(this.notifying=!1,this.dispatchEvent(new CustomEvent("activationend")))}),this.options.idleDuration)}resume(){this.context.resume(),this.nextFrame()}pause(){this.context.suspend(),this.cancelFrame()}close(){this.cancelFrame(),this.input.disconnect(),this.analyser.disconnect(),this.context.close(),j(this.stream)}}var G=Object.freeze({__proto__:null,VoiceActivationFilter:O$1,availableDevices:$,createPersistence:v,defaultDevices:k,getAvailableAudioInputDevices:O,getAvailableAudioOutputDevices:R,getAvailableVideoInputDevices:D,getSupportedVideoResolutions:U,getUserMedia:w,maxSupportedResolution:T,get permissionsGranted(){return q},requestPermissions:async function(t){if(q)return q;const n="function"!=typeof navigator.permissions?.request||t?async()=>{let t;try{const n=await navigator.mediaDevices.enumerateDevices();t=await navigator.mediaDevices.getUserMedia({video:n.some((t=>t.kind===o.VIDEO_INPUT)),audio:n.some((t=>t.kind===o.AUDIO_INPUT))})}catch(t){return!1}return await A(),t.getTracks().forEach((t=>{k.set(t.kind,B(t)),t.stop()})),!0}:async()=>{if((await Promise.all([navigator.permissions.request({name:"camera"}),navigator.permissions.request({name:"microphone"})])).every((({state:t})=>"granted"===t))){await A();const[t]=await D(),[n]=await O();return k.set("video",t),k.set("audio",n),!0}return!1};return q=await n(),q},resolveDevice:B,setPersistence:function(t){if("object"!=typeof t)throw new TypeError("Unable to set the persistence store: Argument is not an object");if("function"!=typeof t.get)throw new TypeError("Unable to set the persistence store: Store has no getter");if("function"!=typeof t.set)throw new TypeError("Unable to set the persistence store: Store has no setter");l=v(t)},updateAvailableDevices:A,useLocalStorage:function(t){return{get:()=>JSON.parse(localStorage.getItem(t)??"{}"),set:n=>localStorage.setItem(t,JSON.stringify(n))}},useMemory:h});function W(...t){let n=0,r=0,o=null;for(const r of t)n+=r.byteLength;o=new Uint8Array(n);for(const n of t){const t=ArrayBuffer.isView(n)?new Uint8Array(n.buffer):new Uint8Array(n);o.set(t,r),r+=n.byteLength}return o.buffer}class ConsoleTransport{log(...t){return console.log(...t)}info(...t){return console.info(...t)}warn(...t){return console.warn(...t)}error(...t){return console.error(...t)}debug(...t){return console.debug(...t)}}const Y={NONE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4,ALL:5};!function(t,n={message:void 0}){if("string"!=typeof t)throw new TypeError("Error name must be of type string");Error}("TimeoutError",{message:"Operation timed out"});const J=Symbol("Symbol.Pipe.resolve");class Pipe{constructor(){this._queue=[],this._locked=!1,this[J]=void 0}async*getReader(){if(this._locked)throw new TypeError("Pipe is already in locked state");this._locked=!0;try{for(;;)yield this._queue.length>0?Promise.resolve(this._queue.shift()):new Promise((t=>{this[J]=t}))}finally{this._locked=!1}}next(...t){if(this._queue.push(...t),"function"==typeof this[J]){const t=this._queue.shift();this[J](t),this[J]=void 0}}}const K=new WeakMap;var Q;function Z(t,n,r,o){var l,h=arguments.length,g=h<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(t,n,r,o);else for(var v=t.length-1;v>=0;v--)(l=t[v])&&(g=(h<3?l(g):h>3?l(n,r,g):l(n,r))||g);return h>3&&g&&Object.defineProperty(n,r,g),g}function X(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)}Object.defineProperty(window.MediaStream.prototype,"muted",{get:function(){return K.get(this)??new Set}}),Object.defineProperty(window.MediaStream.prototype,"mute",{value:function(...t){const n=0===t.length?["video","audio"]:t,r=K.get(this)??new Set;this.dispatchEvent(new CustomEvent("mute",{detail:n})),n.forEach((t=>r.add(t))),K.set(this,r)}}),Object.defineProperty(window.MediaStream.prototype,"unmute",{value:function(...t){const n=0===t.length?["video","audio"]:t,r=K.get(this);this.dispatchEvent(new CustomEvent("unmute",{detail:n})),r&&n.forEach((t=>r.delete(t)))}}),Object.defineProperty(window.MediaStream.prototype,"metadata",{writable:!0,enumerable:!0,value:void 0}),function(t){t.CLOSED="closed",t.CONNECTED="connected",t.CONNECTING="connecting",t.DISCONNECTED="disconnected",t.ERROR="error"}(Q||(Q={}));const ee=navigator.vendor.indexOf("Apple")>-1;navigator.userAgent.toLowerCase().includes("firefox");const te=void 0!==window.chrome;var ne,ie,se,re;!function(t){t.CHANNEL_CLOSED="ERR_CHANNEL_CLOSED",t.CHANNEL_FAILED="ERR_CHANNEL_FAILED",t.CHECKSUM_MISMATCH="ERR_CHECKSUM_MISMATCH",t.SENDER_ABORT="ERR_SENDER_ABORT",t.SIZE_MISMATCH="ERR_SIZE_MISMATCH",t.PARSE_FAILURE="ERR_PARSE_FAILED",t.RECEIVER_ABORT="ERR_RECEIVER_ABORT"}(ne||(ne={}));class TransferError extends Error{code;constructor(t,...n){super(...n),this.code=t,this.name="TransferError"}}!function(t){t[t.BEGIN=0]="BEGIN",t[t.CHUNK=1]="CHUNK",t[t.ENDED=2]="ENDED",t[t.RECVD=3]="RECVD",t[t.ABORT=4]="ABORT",t[t.ERROR=5]="ERROR"}(ie||(ie={})),function(t){t[t.RUNNING=0]="RUNNING",t[t.COMPLETED=1]="COMPLETED",t[t.ABORTED=2]="ABORTED"}(se||(se={})),function(t){t[t.HIGHEST=0]="HIGHEST",t[t.HIGH=1]="HIGH",t[t.NORMAL=2]="NORMAL"}(re||(re={}));const ae=function(t={}){let{level:n=Y.ALL,transports:r=[new ConsoleTransport]}=t;return{setLevel(t){n=t},log(...t){n>=Y.DEBUG&&r.forEach((n=>n.log(...t)))},info(...t){n>=Y.INFO&&r.forEach((n=>n.info(...t)))},warn(...t){n>=Y.WARN&&r.forEach((n=>n.warn(...t)))},error(...t){n>=Y.ERROR&&r.forEach((n=>n.error(...t)))},debug(...t){n>=Y.DEBUG&&r.forEach((n=>n.debug(...t)))}}}({level:Y.NONE});function oe(t="log"){return function(n,r,o){const{value:l}=o;o.value=function(...o){const h=Math.trunc(performance.now()),g=l.apply(this,o);return ae[t].apply(void 0,(({args:t,calledAt:o,returnValue:l})=>[`[${n.constructor.name}#${r}] called at: %d ms, with args: %o, returned with: %o`,o,t,l])({args:o,calledAt:h,returnValue:g})),g}}}class TransferProcess{static maxChunkSize=65536;id;priority=re.NORMAL;bytesTotal=0;complete;bytesWritten=0;nextChunk;state=se.RUNNING;_type;_args;_channel;_stream;_reader;_onComplete;constructor(t,n,r){this._channel=r,this._args=n.args,this._type=n.type,this._stream=this._createReadableStream(n.buffer),this._reader=this._stream.getReader.apply(this),this.id=t,this.bytesTotal=n.buffer.byteLength,this.complete=new Promise((t=>{this._onComplete=t}))}get size(){return this.bytesTotal}_createReadableStream(t){let n=0,r=!1,o=!1;return{cancel(){r=!0},*getReader(){if(o)throw new Error("Generator is already in locked state");o=!0;const l=this,h=(new TextEncoder).encode(l._args),g=new Uint32Array([ie.BEGIN,l.id,t.byteLength,l._type]);for(yield Object.assign(W(g,h),{hasData:!1});l.state===se.RUNNING;){if(r){yield Object.assign(new Uint32Array([ie.ABORT,l.id,0]).buffer,{hasData:!1}),l.state=se.ABORTED;break}if(n>=t.byteLength){yield Object.assign(new Uint32Array([ie.ENDED,l.id]).buffer,{hasData:!1}),l.state=se.COMPLETED;break}const o=new Uint32Array([ie.CHUNK,l.id]),h=t.slice(n,n+=TransferProcess.maxChunkSize-o.byteLength);yield Object.assign(W(o,h),{hasData:!0,headerSize:o.byteLength})}}}}readNext(){const{value:t}=this._reader.next();return this.nextChunk=t,t}sendNext(){this._channel.send(this.nextChunk),this.nextChunk.hasData&&(this.bytesWritten+=this.nextChunk.byteLength-this.nextChunk.headerSize)}finalize(){this._onComplete()}abort(t=ne.SENDER_ABORT){this._stream.cancel(),this._onComplete(new TransferError(t))}}var le,ce,de,he,pe,ue,ge;Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],TransferProcess.prototype,"finalize",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[String]),X("design:returntype",void 0)],TransferProcess.prototype,"abort",null),function(t){t[t.BALANCED=0]="BALANCED",t[t.ORDERED=1]="ORDERED"}(le||(le={})),function(t){t[t.STRING=0]="STRING",t[t.BLOB=1]="BLOB",t[t.FILE=2]="FILE",t[t.ARRAYBUFFER=3]="ARRAYBUFFER",t[t.TYPEDBUFFER=4]="TYPEDBUFFER"}(ce||(ce={}));class ReceiveProcess{priority=re.NORMAL;complete;id;result;state=se.RUNNING;bytesTotal=0;bytesWritten=0;_type;_args;_buffer;_onComplete;constructor(t,n,r,o){this._type=n,this._args=o,this._buffer=new Uint8Array(r),this.id=t,this.bytesTotal=r,this.complete=new Promise((t=>{this._onComplete=t}))}get size(){return this.bytesTotal}write(t){this.state===se.RUNNING&&(this._buffer.set(t,this.bytesWritten),this.bytesWritten+=t.length)}finalize(){if(this.bytesTotal!==this.bytesWritten)return this.abort(ne.SIZE_MISMATCH);try{const t=(new TextDecoder).decode(this._args);switch(this._type){case ce.STRING:this.result=new TextDecoder(t).decode(this._buffer);break;case ce.BLOB:this.result=new Blob([this._buffer],...JSON.parse(t));break;case ce.FILE:this.result=new File([this._buffer],...JSON.parse(t));break;case ce.ARRAYBUFFER:this.result=this._buffer.buffer;break;case ce.TYPEDBUFFER:this.result=new window[t](this._buffer.buffer)}}catch(t){return ae.error("Failed to convert received bytes: %o",t),this.abort(ne.PARSE_FAILURE)}this.state=se.COMPLETED,this._buffer=void 0,this._onComplete()}abort(t=ne.RECEIVER_ABORT){this.state=se.ABORTED,this._buffer=void 0,this._onComplete(new TransferError(t))}}Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],ReceiveProcess.prototype,"finalize",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[String]),X("design:returntype",void 0)],ReceiveProcess.prototype,"abort",null);class DataChannelController extends EventTarget{host;channel;strategy;static _maxSupportedBufferSize=16777216;_incomingMessages=new Map;_outgoingMessages=new Map;_pendingMessages=new Map;_isOpen=!1;_isClosing=!1;_isSending=!1;_processesStarted=0;constructor(t,n,r=le.BALANCED){super(),this.host=t,this.channel=n,this.strategy=r,this.channel.addEventListener("open",this._onOpen.bind(this)),this.channel.addEventListener("message",this._parseMessage.bind(this)),this.channel.addEventListener("close",this._onClose.bind(this)),this.channel.addEventListener("error",this._onError.bind(this))}async transfer(t,n){if("closing"===this.channel.readyState||"closed"===this.channel.readyState)throw new Error(`Failed to schedule transfer job, data channel is in ${this.channel.readyState} state`);const r=await this._serialize(t),o=this._spawnProcess(r);return this._isSending||(this._isSending=!0,this._flush()),o}close(){this._isClosing||(this._isClosing=!0,this._stopTransmissions())}_parseMessage(t){const n=new Uint8Array(t.data);switch(n[3]<<24|n[2]<<16|n[1]<<8|n[0]){case ie.BEGIN:this._onBegin(n);break;case ie.CHUNK:this._onChunk(n);break;case ie.ENDED:this._onEnded(n);break;case ie.RECVD:this._onReceived(n);break;case ie.ABORT:this._onAbort(n)}}_onOpen(){this._isOpen=!0}_onClose(){this._isOpen&&(this._isOpen=!1,this._isClosing=!0,this._stopTransmissions(),this._clear())}_onError(t){const{sctpCauseCode:n}=t.error;this.host.connectionState!==Q.CLOSED&&null!==n&&(ae.error("Data channel raised an error %o",t),ae.info("Waiting for the channel to re-open..."),this._isOpen=!1,this.channel.addEventListener("open",this._flush.bind(this),{once:!0}))}_onBegin(t){const n=t[7]<<24|t[6]<<16|t[5]<<8|t[4],r=t[11]<<24|t[10]<<16|t[9]<<8|t[8],o=t[15]<<24|t[14]<<16|t[13]<<8|t[12],l=t.buffer.slice(16),h=new ReceiveProcess(n,o,r,l);h.complete.then((t=>{t?.code===ne.RECEIVER_ABORT&&"open"===this.channel.readyState&&this.channel.send(new Uint32Array([ie.ABORT,n,1]).buffer)})),this._incomingMessages.set(n,h),this.dispatchEvent(new CustomEvent("message",{detail:h}))}_onChunk(t){const n=t[7]<<24|t[6]<<16|t[5]<<8|t[4];this._incomingMessages.has(n)&&this._incomingMessages.get(n).write(new Uint8Array(t.buffer.slice(8)))}_onEnded(t){const n=t[7]<<24|t[6]<<16|t[5]<<8|t[4];this._incomingMessages.has(n)&&(this._incomingMessages.get(n).finalize(),"open"===this.channel.readyState&&this.channel.send(new Uint32Array([ie.RECVD,n]).buffer),this._incomingMessages.delete(n))}_onAbort(t){const n=t[7]<<24|t[6]<<16|t[5]<<8|t[4],r=t[11]<<24|t[10]<<16|t[9]<<8|t[8],o=0===r?this._incomingMessages:this._outgoingMessages;o.has(n)&&(o.get(n).abort(0===r?ne.SENDER_ABORT:ne.RECEIVER_ABORT),o.delete(n))}async _onReceived(t){const n=t[7]<<24|t[6]<<16|t[5]<<8|t[4];this._pendingMessages.get(n).finalize(),this._pendingMessages.delete(n)}_onIdle(){this._isClosing&&(this._isOpen=!1,this._clear(),this.channel.close())}_stopTransmissions(t=ne.CHANNEL_CLOSED){[...this._outgoingMessages.values(),...this._incomingMessages.values()].forEach((n=>{n.abort(t)}))}async _serialize(t){if("string"==typeof t)return{type:ce.STRING,buffer:(new TextEncoder).encode(t).buffer,args:"utf-8"};if(ArrayBuffer.isView(t))return{type:ce.TYPEDBUFFER,buffer:t.buffer,args:t.constructor.name};if(t instanceof File)return{type:ce.FILE,buffer:await t.arrayBuffer(),args:JSON.stringify([t.name,{type:t.type,lastModified:t.lastModified}])};if(t instanceof Blob)return{type:ce.BLOB,buffer:await t.arrayBuffer(),args:JSON.stringify([{type:t.type}])};if(t instanceof ArrayBuffer)return{type:ce.ARRAYBUFFER,buffer:t};throw new TypeError("Unable to serialize, parameter must be of type String, Blob, ArrayBuffer or TypedBuffer")}async _flush(){for("connecting"===this.channel.readyState&&await new Promise((t=>this.channel.addEventListener("open",t,{once:!0})));this._outgoingMessages.size>0&&"open"===this.channel.readyState;)for(const t of this._outgoingMessages.values()){const n=t.readNext()?.byteLength??0;if(t.state!==se.COMPLETED)if(t.state!==se.ABORTED){this.channel.bufferedAmount+n>DataChannelController._maxSupportedBufferSize&&await this._bufferedAmountDidRunLow();try{t.sendNext()}catch(n){this._outgoingMessages.delete(t.id),t.abort(ne.CHANNEL_FAILED)}}else this._outgoingMessages.delete(t.id);else this._outgoingMessages.delete(t.id),this._pendingMessages.set(t.id,t)}ae.log("Sending completed."),await this._bufferedAmountDidRunLow(),this._isSending=!1,this._onIdle()}_bufferedAmountDidRunLow(){return new Promise((t=>this.channel.addEventListener("bufferedamountlow",t,{once:!0})))}_spawnProcess(t){const n=new TransferProcess(this._processesStarted,t,this.channel);return this._processesStarted+=1,this._outgoingMessages.set(n.id,n),n}_clear(){this._incomingMessages.clear(),this._outgoingMessages.clear(),this._pendingMessages.clear()}}Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],DataChannelController.prototype,"close",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],DataChannelController.prototype,"_onOpen",null),Z([oe("warn"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],DataChannelController.prototype,"_onClose",null),Z([oe("warn"),X("design:type",Function),X("design:paramtypes",[Error]),X("design:returntype",void 0)],DataChannelController.prototype,"_onError",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Uint8Array]),X("design:returntype",void 0)],DataChannelController.prototype,"_onBegin",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Uint8Array]),X("design:returntype",void 0)],DataChannelController.prototype,"_onEnded",null),Z([oe("warn"),X("design:type",Function),X("design:paramtypes",[Uint8Array]),X("design:returntype",void 0)],DataChannelController.prototype,"_onAbort",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Uint8Array]),X("design:returntype",Promise)],DataChannelController.prototype,"_onReceived",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],DataChannelController.prototype,"_onIdle",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],DataChannelController.prototype,"_stopTransmissions",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",Promise)],DataChannelController.prototype,"_bufferedAmountDidRunLow",null);class NegotiationController{host;connection;candidates=[];constructor(t,n){this.host=t,this.connection=n}setSignalingMessage(t){const{type:n,payload:r}=t;switch(n){case"candidate":this.setIceCandidate(r);break;case"offer":case"answer":this.setRemoteSdp(n,r)}}async setIceCandidate(t){if(this.connection.remoteDescription instanceof RTCSessionDescription)try{await this.connection.addIceCandidate(t)}catch(n){this.host.onIceApplicationError(n,t)}else this.candidates.push(t)}async applyCandidates(){for(;this.candidates.length>0;){const t=this.candidates.shift();try{await this.connection.addIceCandidate(t)}catch(n){this.host.onIceApplicationError(n,t)}}}}!function(t){t.OFFER="offer",t.ANSWER="answer"}(de||(de={})),function(t){t[t.IMPOLITE=0]="IMPOLITE",t[t.POLITE=1]="POLITE"}(he||(he={})),function(t){t.NONE="",t.LOCAL="local",t.REMOTE="remote",t.ICE_RESTART="iceRestart"}(pe||(pe={}));class LegacyNegotiationController extends NegotiationController{_negotiating=!1;_negotiationCausedBy=void 0;_negotiationPending=!1;_releaseLock;setSignalingMessage(t){const{type:n,payload:r}=t;switch(n){case"request":this._receiveRequest();break;case"permission":this._receivePermission(r);break;case"release":this._receiveRelease();break;default:super.setSignalingMessage(t)}}async requestNegotiation(){ae.info("Negotiation requested..."),this._negotiating?this._negotiationPending=!0:(this._negotiating=!0,this._negotiationCausedBy=pe.LOCAL,await this._requestOfferLock()?await this.setLocalSdp(de.OFFER):(this._negotiationCausedBy=pe.REMOTE,this._negotiationPending=!0))}async requestIceRestart(){if(this.host.role===he.IMPOLITE){ae.log("This client will restart ice gathering..."),this._negotiating=!0,this._negotiationCausedBy=pe.ICE_RESTART;const t=await this.connection.createOffer({iceRestart:!0});await this.connection.setLocalDescription(t);const{type:n,sdp:r}=this.connection.localDescription;this.host.sendSignalingMessage({type:n,target:this.host.id,payload:r})}else ae.log("Ice gathering skipped, not in caller role")}async setLocalSdp(t){let n;switch(ae.info(`Generating local description of type ${t}...`),t){case de.OFFER:try{n=await this.connection.createOffer()}catch(t){this.host.onNegotiationError(t),this._releaseOfferLock()}finally{break}case de.ANSWER:try{n=await this.connection.createAnswer()}catch(t){this.host.onNegotiationError(t)}finally{break}default:this.host.onNegotiationError(new ReferenceError(`SdpType "${t}" unknown`))}try{await this.connection.setLocalDescription(n)}catch(r){return t===de.OFFER&&this._releaseOfferLock(),ae.error(`setLocalDescription failed: ${r.message}\n\nsignalingState was ${this.connection.signalingState}\n\nrequested sdp type was ${t}\n\nsdp is:\n${n.sdp}`)}const{type:r,sdp:o}=n;this.host.sendSignalingMessage({type:r,target:this.host.id,payload:o})}async setRemoteSdp(t,n){if(ae.log(`Received remote description type ${t}, current state: ${this.connection.signalingState}`),"stable"===this.connection.signalingState&&t===de.ANSWER)return ae.log(`Ignored incoming answer in state ${this.connection.signalingState}`);try{ae.log(`Applying remote description of type ${t}, current state: ${this.connection.signalingState}`),await this.connection.setRemoteDescription({type:t,sdp:n}),await this.applyCandidates()}catch(r){return this.host.onNegotiationError(r),ae.error(`Failed to apply remote description of type ${t} in state ${this.connection.signalingState}: ${r.message}\n\nSDP:\n${n}`)}t===de.OFFER?(ae.log(`Generating matching answer, received sdp type was ${t}`),await this.setLocalSdp(de.ANSWER)):this._negotiationPending?(this._negotiationPending=!1,await this.setLocalSdp(de.OFFER)):(this._negotiating=!1,this._negotiationCausedBy=pe.NONE,this._releaseOfferLock())}_receiveRequest(){ae.info("Received offer lock request from other participant...");const t=!this._negotiating||this.host.role===he.POLITE&&void 0!==this._releaseLock;t&&(this._negotiating=!0,this._negotiationCausedBy=pe.REMOTE),ae.info(`Remote lock granted?: ${t}`),this.host.sendSignalingMessage({type:"permission",target:this.host.id,payload:t})}_receivePermission(t){ae.info(`Permission recevied: ${t}`),this._releaseLock?.(t),this._releaseLock=void 0}_receiveRelease(){ae.info("Offer release received"),this._negotiating=!1,this._negotiationCausedBy=pe.NONE,this._negotiationPending?(this._negotiationPending=!1,this.requestNegotiation()):this.host.onNegotiationComplete()}_requestOfferLock(){return ae.info("Requesting offer lock from other participant..."),new Promise((t=>{this._releaseLock=t,this.host.sendSignalingMessage({type:"request",target:this.host.id})}))}async _releaseOfferLock(){await this.host.onNegotiationComplete(),this.host.sendSignalingMessage({type:"release",target:this.host.id}),ae.log("Negotiation complete, release offer lock...")}}Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",Promise)],LegacyNegotiationController.prototype,"requestNegotiation",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",Promise)],LegacyNegotiationController.prototype,"requestIceRestart",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[String]),X("design:returntype",Promise)],LegacyNegotiationController.prototype,"setLocalSdp",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[String,String]),X("design:returntype",Promise)],LegacyNegotiationController.prototype,"setRemoteSdp",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],LegacyNegotiationController.prototype,"_receiveRequest",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Boolean]),X("design:returntype",void 0)],LegacyNegotiationController.prototype,"_receivePermission",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],LegacyNegotiationController.prototype,"_receiveRelease",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],LegacyNegotiationController.prototype,"_requestOfferLock",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",Promise)],LegacyNegotiationController.prototype,"_releaseOfferLock",null);class IceConnectionError extends Error{constructor(...t){super(...t),this.name="IceConnectionError"}}class Participant extends EventTarget{static iceTimeoutMs=15e3;static experimentalTransceiverDirections={audio:!1,video:!0};static experimentalSctpMaxMessageSize=!1;static iceOptions;id;role;info;state={};connectionState=Q.DISCONNECTED;signalingConnectionState=Q.CONNECTED;_timeout;_connection;_controller;_incomingMetadata=new Map;_incomingStreams=new Map;_incomingDataChannels=new Map;_outgoingStreams=new Map;_outgoingDataChannels=new Map;_transceiverForStreams=new Map;_transceiverForTrack=new WeakMap;_mediaParams=new WeakMap;_eventListeners=new WeakMap;constructor(t,n,r){super(),this.id=t,this.role=n,this.info=r}get incomingStreams(){return[...this._incomingStreams.values()]}get outgoingStreams(){return[...this._outgoingStreams.values()]}addDataChannel(t,n={}){if(this._outgoingDataChannels.has(t))return;const r=this._connection.createDataChannel(t,n);r.binaryType="arraybuffer",r.addEventListener("close",(()=>this._outgoingDataChannels.delete(t))),r.addEventListener("error",(()=>this._outgoingDataChannels.delete(t)));const o=new DataChannelController(this,r);this._outgoingDataChannels.set(t,o)}removeDataChannel(t){this._outgoingDataChannels.has(t)&&(this._outgoingDataChannels.get(t).close(),this._outgoingDataChannels.delete(t))}setSignalingMessage(t){const{type:n,payload:r}=t;switch(n){case"addstream":this._onAddStream(r);break;case"removestream":this._onRemoveStream(r);break;default:this._controller.setSignalingMessage(t)}}addMediaStream(t,n){if(!(t instanceof MediaStream))throw new TypeError("Parameter is not a MediaStream");"object"==typeof n&&this._mediaParams.set(t,n);const{audioCodecs:r,videoCodecs:o}=n??{},l=({track:n})=>this._onAddTrack(n,t),h=({track:n})=>this._onRemoveTrack(n,t);this._eventListeners.set(t,{addtrack:l,removetrack:h}),t.addEventListener("addtrack",l),t.addEventListener("removetrack",h),Object.freeze(t.metadata);for(const n of t.getTracks()){let l;try{l=this._connection.addTransceiver(n,{streams:[t],direction:"sendonly"}),this._setCodecPreferences(l,{audioCodecs:r,videoCodecs:o})}catch(t){throw t}const h=this._transceiverForStreams.get(l)??[];this._transceiverForTrack.set(n,l),this._transceiverForStreams.set(l,new Set([t,...h]))}this._onStream(t),this._outgoingStreams.set(t.id,t),this.sendSignalingMessage({type:"addstream",target:this.id,payload:{id:t.id,meta:t.metadata}})}removeMediaStream(t){if(!(t instanceof MediaStream))throw new TypeError("Parameter is not a MediaStream");if(!this._outgoingStreams.has(t.id))return ae.error("Tried to remove unregistered MediaStream");for(const[n,r]of this._transceiverForStreams.entries())r.has(t)&&null!==n.sender.track&&(n.stop(),this._transceiverForStreams.delete(n));if(this._eventListeners.has(t)){const{addtrack:n,removetrack:r,mute:o,unmute:l}=this._eventListeners.get(t);t.removeEventListener("addtrack",n),t.removeEventListener("removetrack",r),t.removeEventListener("mute",o),t.removeEventListener("unmute",l),this._eventListeners.delete(t)}this.sendSignalingMessage({type:"removestream",target:this.id,payload:{id:t.id}}),t.getTracks().forEach((t=>this._transceiverForTrack.delete(t))),this._mediaParams.delete(t),this._outgoingStreams.delete(t.id)}async setMediaParameters(t,n){if("function"!=typeof RTCRtpSender.prototype.getParameters||"function"!=typeof RTCRtpSender.prototype.setParameters)return;if(!this._outgoingStreams.has(t.id))throw new ReferenceError("Unable to apply encoding parameters: Stream not found");const{audioCodecs:r,videoCodecs:o,...l}=n;this._mediaParams.set(t,n),Array.from(this._transceiverForStreams.entries()).filter((n=>n[1].has(t))).map((t=>t[0])).forEach((t=>this._setCodecPreferences(t,{audioCodecs:r,videoCodecs:o}))),this._connection.localDescription&&this._connection.remoteDescription&&await this._setEncodingParameters(t,l)}send(t,n){const r=this._outgoingDataChannels.get(n);return void 0===r?Promise.reject(new ReferenceError(`Data channel labeled "${n}" is not defined`)):r.transfer(t)}sendSignalingMessage(t){this.dispatchEvent(new CustomEvent("sdp",{detail:t}))}onConnectionStateChange(){ae.log("Partipant's connection state has changed to %s",this.connectionState),this.dispatchEvent(new Event("connectionstatechange"))}onSignalingConnectionStateChange(){ae.log("Partipant's signaling connection state has changed to %s",this.signalingConnectionState),this.dispatchEvent(new Event("signalingconnectionstatechange")),this.connectionState!==Q.CONNECTED&&this.signalingConnectionState===Q.CONNECTED&&this._controller?.requestIceRestart()}onNegotiationComplete(){ae.log("Negotiation was flagged as completed"),this._applyEncodingParameters()}onNegotiationError(t){ae.error("Failed to negotiate sdps: %o",t)}onIceApplicationError(t,n){ae.error("ICE application failed: %o",t)}connect(){void 0===this._connection&&(this._connection=new RTCPeerConnection(Participant.iceOptions),this._controller=new LegacyNegotiationController(this,this._connection),this._connection.ondatachannel=({channel:t})=>{this._onDataChannel(t)},this._connection.ontrack=({track:t,streams:n,transceiver:r})=>{this._onTrack(t,n,r)},this._connection.onnegotiationneeded=()=>{this._controller.requestNegotiation()},this._connection.onicecandidate=({candidate:t})=>{this._onIceCandidate(t)},this._connection.oniceconnectionstatechange=()=>{this._onIceConnectionStateChange()},this.addDataChannel("@@control"))}disconnect(){this.sendSignalingMessage({type:"hangup",target:this.id}),this.close()}close(){this._close(),this.connectionState=Q.CLOSED,this.dispatchEvent(new Event("close")),this.onConnectionStateChange()}restart(){this.sendSignalingMessage({type:"restart",target:this.id}),this.close()}_onIceCandidate(t){this.sendSignalingMessage({type:"candidate",target:this.id,payload:t})}_onIceConnectionStateChange(){switch(ae.log(`ICE connection state changed: ${this._connection.iceConnectionState}`),this._connection.iceConnectionState){case"connected":this._onIceConnect();break;case"disconnected":this._onIceDisconnect();break;case"failed":this._onIceFail()}}_onDataChannel(t){t.binaryType="arraybuffer";const n=new DataChannelController(this,t);n.addEventListener("message",(n=>{this._onMessage(n.detail,t)})),n.addEventListener("close",(()=>{this._incomingDataChannels.delete(t.label)})),this._incomingDataChannels.set(t.label,n)}async _onMessage(t,n){if("@@control"!==n.label)return void this.dispatchEvent(new MessageEvent("message",{origin:n.label,data:t}));try{await t.complete}catch(t){return ae.error("Failed to receive message (code %s), dropped",t)}let r;try{r=JSON.parse(t.result)}catch(n){return ae.error(`Dropped command message, malformed: ${t.result}`)}"statechange"===r?.type&&this._onStateChange(r)}_onStateChange(t){const n={...this.state};this.state={...n,...JSON.parse(t.value)},this.dispatchEvent(new CustomEvent(t.type,{detail:{previousState:n,currentState:this.state}}))}_onTrack(t,n,r){n.length>1&&ae.warn("Warning: the new track %o is assigned to more than one streams: %o",t,n),t.enabled=!0,t.addEventListener("ended",(()=>{n.forEach((n=>n.removeTrack(t)))})),ae.warn("ADDED TRACK %o ON STREAMS %o (existing %o)",t,n.map((t=>t.id)),[...this._incomingStreams.values()].map((t=>t.id)));const[o,l]=n.reduce(((t,n)=>(t[this._incomingStreams.has(n.id)?1:0].push(n),t)),[[],[]]);o.forEach((t=>{ae.log("Received new remote stream %s, check for metadata...",t.id),t.metadata=this._incomingMetadata.get(t.id),Object.freeze(t.metadata),this._onRemoteStream(t),t.addEventListener("removetrack",(({track:t})=>{this._transceiverForTrack.delete(t)})),this._incomingStreams.set(t.id,t),this.dispatchEvent(new CustomEvent("addstream",{detail:t}))})),l.forEach((n=>{const r=this._incomingStreams.get(n.id),o=r.muted.has(t.kind)&&t.kind||r.muted.has(t.id)&&t.id;te&&n!==r&&n.addEventListener("removetrack",(({track:t})=>{this._transceiverForTrack.delete(t),r.removeTrack(t)})),"string"==typeof o&&n.mute(o),te&&n!==r&&r.addTrack(t)}));const h=l.map((t=>this._incomingStreams.get(t.id))),g=this._transceiverForStreams.get(r)??[],v=new Set([...o,...h,...g]);this._transceiverForTrack.set(t,r),this._transceiverForStreams.set(r,v)}_onStream(t){const n=this._eventListeners.get(t);t.addEventListener("mute",n.mute=n=>{this._getTransceiversByStream(t).filter((({sender:t})=>n.detail.includes(t.track.kind)||n.detail.includes(t.track.id))).forEach((n=>{if(Participant.experimentalTransceiverDirections[n.sender?.track?.kind]){const{direction:r}=n;switch(r){case"sendrecv":n.direction="recvonly";break;case"sendonly":n.direction="inactive"}ae.log(`Muted local stream ${t.id} >> Did update transceiver direction (${r}) -> (${n.direction})`)}}));for(let r of t.getTracks())(n.detail.includes(r.kind)||n.detail.includes(r.id))&&(r.enabled=!1)}),t.addEventListener("unmute",n.unmute=n=>{this._getTransceiversByStream(t).filter((({sender:t})=>n.detail.includes(t.track.kind)||n.detail.includes(t.track.id))).forEach((n=>{if(Participant.experimentalTransceiverDirections[n.sender?.track?.kind]){const{direction:r}=n;switch(r){case"recvonly":n.direction="sendrecv";break;case"inactive":n.direction="sendonly"}ae.log(`Unmuted local stream ${t.id} >> Did update transceiver direction (${r}) -> (${n.direction})`)}}));for(let r of t.getTracks())(n.detail.includes(r.kind)||n.detail.includes(r.id))&&(r.enabled=!0)}),t.muted.size>0&&t.mute(...Array.from(t.muted))}_onRemoteStream(t){t.addEventListener("mute",(n=>{this._getTransceiversByStream(t).filter((({receiver:t})=>n.detail.includes(t.track.kind)||n.detail.includes(t.track.id))).forEach((n=>{if(Participant.experimentalTransceiverDirections[n.receiver?.track?.kind]){const{direction:r}=n;switch(r){case"sendrecv":n.direction="sendonly";break;case"recvonly":n.direction="inactive"}ae.log(`Muted remote stream ${t.id} >> Did update transceiver direction (${r}) -> (${n.direction})`)}}));for(let r of t.getTracks())(n.detail.includes(r.kind)||n.detail.includes(r.id))&&(r.enabled=!1)})),t.addEventListener("unmute",(n=>{this._getTransceiversByStream(t).filter((({receiver:t})=>n.detail.includes(t.track.kind)||n.detail.includes(t.track.id))).forEach((n=>{if(Participant.experimentalTransceiverDirections[n.receiver?.track?.kind]){const{direction:r}=n;switch(r){case"sendonly":n.direction="sendrecv";break;case"inactive":n.direction="recvonly"}ae.log(`Unmuted remote stream ${t.id} >> Did update transceiver direction (${r}) -> (${n.direction})`)}}));for(let r of t.getTracks())(n.detail.includes(r.kind)||n.detail.includes(r.id))&&(r.enabled=!0)}))}_onIceConnect(){const{sctp:t}=this._connection;Participant.experimentalSctpMaxMessageSize&&void 0!==t&&"number"==typeof t.maxMessageSize&&(TransferProcess.maxChunkSize=t.maxMessageSize,ae.log("Updated maxChunkSize to %d bytes",t.maxMessageSize)),clearTimeout(this._timeout),this.connectionState=Q.CONNECTED,this.dispatchEvent(new Event("connect")),this.onConnectionStateChange()}_onIceDisconnect(){this.connectionState=Q.DISCONNECTED,this.dispatchEvent(new Event("disconnect")),this.onConnectionStateChange(),this._timeout=setTimeout((()=>{this.connectionState!==Q.CONNECTED&&this._onIceFail()}),Participant.iceTimeoutMs)}_onIceFail(){const{connectionState:t="failed"}=this._connection;this.connectionState!==Q.ERROR&&(ae.warn("ICE connection has ended unexpectedly, set into error state"),this.connectionState=Q.ERROR,this.dispatchEvent(new CustomEvent("error",{detail:new IceConnectionError})),this.onConnectionStateChange()),clearTimeout(this._timeout),"closed"!==t&&this.signalingConnectionState===Q.CONNECTED&&(ae.info("ICE restart will be requested..."),this._controller?.requestIceRestart())}_onAddStream(t){const{id:n,meta:r}=t;this._incomingMetadata.set(n,r)}_onRemoveStream(t){const{id:n}=t,r=this._incomingStreams.get(n);this._incomingMetadata.delete(n),this._incomingStreams.delete(n),this.dispatchEvent(new CustomEvent("removestream",{detail:r}))}_getTransceiversByStream(t){return Array.from(this._transceiverForStreams.entries()).filter((([,n])=>n.has(t))).map((([t])=>t))}_setCodecPreferences(t,n){if(!(t instanceof RTCRtpTransceiver))return;const{sender:r,receiver:o}=t,l="video"===r.track?.kind||"video"===o.track?.kind?n.videoCodecs:n.audioCodecs;try{t.setCodecPreferences(l??[])}catch(t){ae.log("Failed to apply codec preferences: %s",t)}}async _onAddTrack(t,n){let r;const o=n.muted.has(t.kind)&&n.muted.has(t.id),l=this._connection.getTransceivers().filter((t=>null===t.sender.track&&this._transceiverForStreams.get(t)?.has(n))).filter((t=>"stopped"!==t.currentDirection));for(const n of l)try{await n.sender.replaceTrack(t),r=n;break}catch(t){}if(r instanceof RTCRtpTransceiver&&!o)switch(r.currentDirection){case null:case"inactive":r.direction="sendonly";break;case"recvonly":r.direction="sendrecv"}else{ae.log("No sender could be re-used, create new"),r=this._connection.addTransceiver(t,{streams:[n],direction:o?"inactive":"sendonly"});const{audioCodecs:l,videoCodecs:h}=this._mediaParams.get(n)??{};this._setCodecPreferences(r,{audioCodecs:l,videoCodecs:h}),this._transceiverForStreams.set(r,new Set([n]))}this._transceiverForTrack.set(t,r)}async _onRemoveTrack(t,n){if(this._transceiverForTrack.has(t)){const n=this._transceiverForTrack.get(t);try{await n.sender.replaceTrack(null)}catch(t){ae.warn("Freeing the sender has failed",t)}finally{ae.warn("Sender track has been freed"),this._transceiverForTrack.delete(t)}}}async _applyEncodingParameters(){if("function"==typeof RTCRtpSender.prototype.getParameters&&"function"==typeof RTCRtpSender.prototype.setParameters)for(const t of this._outgoingStreams.values()){if(!this._mediaParams.has(t))continue;const n=this._mediaParams.get(t);await this._setEncodingParameters(t,n)}}async _setEncodingParameters(t,n){for(const r of t?.getTracks()??[]){const t=this._transceiverForTrack.get(r),o=t.sender.getParameters();void 0===o.encodings?o.encodings=[n]:0===o.encodings.length?o.encodings.push(n):Object.assign(o.encodings[0],n);try{await t.sender.setParameters(o)}catch(t){ae.error("Failed to apply encode options: %o",t)}}}_close(){this._connection&&(clearTimeout(this._timeout),this._outgoingStreams.forEach((t=>{this.removeMediaStream(t)})),this._incomingStreams.forEach((t=>{this.dispatchEvent(new CustomEvent("removestream",{detail:t}))})),this._outgoingStreams.clear(),this._incomingStreams.clear(),this._incomingDataChannels.clear(),this._outgoingDataChannels.clear(),this._transceiverForStreams.clear(),this._connection.close(),this._connection.onicecandidate=void 0,this._connection.oniceconnectionstatechange=void 0,this._connection.onnegotiationneeded=void 0,this._connection=void 0)}_assertSingleFingerprint(t){return(t?.length>0&&t?.every?.((n=>n===t[0])))??!1}}Z([oe(),X("design:type",Function),X("design:paramtypes",[String,Object]),X("design:returntype",void 0)],Participant.prototype,"addDataChannel",null);class SignalingRejectionError extends Error{code;constructor(t,...n){super(...n),this.code=t,this.name="SignalingRejectionError"}}class SignalingTransportError extends Error{code;detail;constructor(t,n,...r){super(...r),this.code=t,this.detail=n,this.name="SignalingTransportError"}}class SignalingConnectionError extends Error{constructor(...t){super(...t),this.name="SignalingConnectionError"}}!function(t){t[t.BASIC=0]="BASIC",t[t.DIGEST=1]="DIGEST",t[t.BEARER=2]="BEARER"}(ue||(ue={})),function(t){t.NONE="none",t.TIMEOUT="timeout",t.MAX_RETRIES="max_retries"}(ge||(ge={}));class SignalingAdapter extends EventTarget{static connectionMaxRetries=3;static connectionTimeout=5e3;static connectionBackoffMs=2e3;static abortStrategy=ge.NONE;static abortionTimeoutMs=1e4;static abortionMaxRetries=5;id;credentials;options;urls;connectionState=Q.DISCONNECTED;_queue=[];_isSending=!1;_isClosing=!1;_retries=0;_totalRetries=0;_abortionTimer;_selectedUrlIndex=0;_connectionDidSucceed;_connectionSucceeded;constructor({url:t,urls:n,credentials:r,...o}){if("string"!=typeof t&&!n?.every?.((t=>"string"==typeof t)))throw new TypeError("Failed to initialize adapter: no valid urls were provided");super(),this.urls=(n??[t]).map((t=>new URL(t))),this.credentials=r,this.options=o,this.addEventListener("open",(()=>this._flush())),window.addEventListener(ee?"pagehide":"beforeunload",(()=>{this._isClosing=!0}))}get url(){return this.urls[this._selectedUrlIndex]}setCredentials(t){this.credentials=t}connect(){if(0===this.urls.length)throw new TypeError("Failed to connect: No server addresses were set");return this.connectionState===Q.DISCONNECTED&&(this._startAbortionStrategy(),this._connectionDidSucceed=new Promise((t=>{this._connectionSucceeded=t,this._connect()}))),this._connectionDidSucceed}drain(){this._isClosing=!0,this._flush()}reset(){this._stopAbortionStrategy(),this.close(),this.id=void 0,this._queue=[],this.connect()}enqueue(t){this._queue.push(t),this._flush()}get headers(){const t=new Headers({"Content-Type":"application/json"});if(void 0!==this.credentials)switch(this.credentials.type){case ue.BEARER:t.set("Authorization",`Bearer ${this.credentials.accessToken}`);case ue.BASIC:case ue.DIGEST:}return t}onOpen(){this.dispatchEvent(new CustomEvent("open")),this._changeConnectionState(Q.CONNECTED)}onClose(t){this.connectionState!==Q.DISCONNECTED&&(this._isSending=!1,this.dispatchEvent(new CustomEvent("close",{detail:t})),this._changeConnectionState(Q.CLOSED))}onMessage(t){this.dispatchEvent(new CustomEvent("message",{detail:t}))}onError(t){this._isClosing||(this.connectionState===Q.CONNECTED&&(this._changeConnectionState(Q.CONNECTING),this.dispatchEvent(new CustomEvent("error",{detail:new SignalingConnectionError(t)}))),ae.info("Restart signaling adapter because of an error "+(t?`(${t})`:"")),this.close(),setTimeout((()=>!this._isClosing&&this.connectionState!==Q.ERROR&&this._connect()),SignalingAdapter.connectionBackoffMs))}async _flush(){if(!this._isSending&&this.connectionState===Q.CONNECTED){for(this._isSending=!0;this._queue.length>0;){const t=this._queue[0];try{const{status:n}=await this.send(t);switch(n){case 400:case 401:case 404:this.dispatchEvent(new CustomEvent("error",{detail:new SignalingTransportError(n,t)})),ae.warn("Message not delivered (%d)",n);case 202:this._queue.shift();break;case 406:this._queue=this._queue.filter((n=>n.target!==t.target))}}catch(n){this.dispatchEvent(new CustomEvent("error",{detail:new SignalingTransportError(500,t,n.message)}));break}}this._isSending=!1,this._isClosing&&this.close()}}async _connect(){const t=JSON.stringify({id:this.id,...this.options}),n=new AbortController,r=setTimeout((()=>n.abort()),SignalingAdapter.connectionTimeout);let o;try{o=await fetch(this.url,{method:"POST",headers:this.headers,signal:n.signal,body:t})}catch(t){return ae.log("Failed to connect to server with address %s",this.url),clearTimeout(r),++this._retries>SignalingAdapter.connectionMaxRetries&&(this._retries=0,this._selectedUrlIndex=this._selectedUrlIndex+1>=this.urls.length?0:this._selectedUrlIndex+1,this.dispatchEvent(new CustomEvent("urlchange"))),SignalingAdapter.abortStrategy===ge.MAX_RETRIES&&++this._totalRetries>SignalingAdapter.abortionMaxRetries?this._abortSignalingConnectionAttempts():this.onError(t)}if(this._stopAbortionStrategy(),clearTimeout(r),this._retries=0,200!==o.status)return this.dispatchEvent(new CustomEvent("error",{detail:new SignalingRejectionError(o.status)})),void this._changeConnectionState(Q.CLOSED);o.json().then((t=>{this.id=t.id,this.initialize(t.url),this._connectionSucceeded?.(),this._connectionSucceeded=void 0})).catch((t=>this.onError(t)))}_startAbortionStrategy(){switch(SignalingAdapter.abortStrategy){case ge.TIMEOUT:this._abortionTimer=setTimeout((()=>this._abortSignalingConnectionAttempts()),SignalingAdapter.abortionTimeoutMs);break;case ge.MAX_RETRIES:this._totalRetries=0}}_stopAbortionStrategy(){switch(SignalingAdapter.abortStrategy){case ge.TIMEOUT:clearTimeout(this._abortionTimer),this._abortionTimer=void 0;break;case ge.MAX_RETRIES:this._totalRetries=0}}_abortSignalingConnectionAttempts(){this.close(),this._changeConnectionState(Q.ERROR),this._stopAbortionStrategy()}_changeConnectionState(t){this.connectionState!==t&&(this.connectionState=t,this.dispatchEvent(new CustomEvent("connectionstatechange",{detail:this.connectionState})))}}Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],SignalingAdapter.prototype,"onOpen",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingAdapter.prototype,"onClose",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingAdapter.prototype,"onMessage",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingAdapter.prototype,"onError",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",Promise)],SignalingAdapter.prototype,"_connect",null);class HTTP2SignalingAdapter extends SignalingAdapter{endpointUrl;eventSource;initialize(t){this.endpointUrl=t,this.eventSource=new EventSource(t),this.eventSource.addEventListener("open",(()=>this.onOpen())),this.eventSource.addEventListener("error",(()=>this.onError())),this.eventSource.addEventListener("message",(t=>{let n;try{n=JSON.parse(t.data)}catch(n){return ae.warn("Failed to parse signaling message, ignored..."),ae.warn(`Message: ${t.data}`),this.dispatchEvent(new CustomEvent("error",{detail:n}))}this.onMessage(n)}))}send(t){return fetch(this.endpointUrl,{method:"POST",body:JSON.stringify(t),headers:this.headers})}close(){this.eventSource?.close(),this.onClose()}}Z([oe("log"),X("design:type",Function),X("design:paramtypes",[String]),X("design:returntype",void 0)],HTTP2SignalingAdapter.prototype,"initialize",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],HTTP2SignalingAdapter.prototype,"send",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[]),X("design:returntype",void 0)],HTTP2SignalingAdapter.prototype,"close",null);class SignalingBroker extends EventTarget{adapter;state=void 0;options;_outgoingQueueReader;_incomingQueueReader;_outgoingQueue=new Pipe;_incomingQueue=new Pipe;_participants=new Map;constructor(t,{autoConnect:n=(()=>!0),...r}){super(),this.adapter=t,this.options={autoConnect:n,...r},this._setupEventListeners(),this._setupQueueProcessors(),this._defineState(),window.addEventListener(ee?"pagehide":"beforeunload",(()=>this.disconnect())),Participant.iceOptions=r}get connectionState(){return this.adapter.connectionState}get participants(){return[...this._participants.values()]}_defineState(){Object.defineProperty(this,"state",{writable:!1,value:new Proxy({},{set:(t,n,r)=>{const o=Reflect.set(t,n,r),l=JSON.stringify(this.state);return this._propagateCurrentState(l),o},get:(t,n)=>Reflect.get(t,n),deleteProperty:(t,n)=>{const r=Reflect.deleteProperty(t,n),o=JSON.stringify(this.state);return this._propagateCurrentState(o),r}})})}_setupQueueProcessors(){(async()=>{for(this._incomingQueueReader=this._incomingQueue.getReader();;){const{value:t,done:n}=await this._incomingQueueReader.next();if(n)break;await this._processIncomingMessage(t)}ae.info("Queue reader for incoming messages has terminated")})(),(async()=>{for(this._outgoingQueueReader=this._outgoingQueue.getReader();;){const{value:t,done:n}=await this._outgoingQueueReader.next();if(n)break;await this._processOutgoingMessage(t)}ae.info("Queue reader for outgoing messages has terminated")})()}_processIncomingMessage(t){switch(t.type){case"sync":this._receiveSync(t);break;case"connect":this._receiveConnect(t);break;case"disconnect":this._receiveDisconnect(t);break;case"gone":this._receiveGone(t);break;case"hangup":this._receiveHangup(t);break;case"pubkey":this._receivePublicKey(t);break;default:this._receiveSignalingMessage(t)}}async _processOutgoingMessage(t){this.adapter.enqueue(t)}_setupEventListeners(){this.adapter.addEventListener("open",this._adapterDidConnect.bind(this)),this.adapter.addEventListener("close",this._adapterDidDisconnect.bind(this)),this.adapter.addEventListener("error",this._adapterDidThrow.bind(this)),this.adapter.addEventListener("message",this._adapterDidReceiveMessage.bind(this))}_adapterDidConnect(t){}_adapterDidDisconnect(t){this.dispatchEvent(new CustomEvent("disconnect",{detail:t.detail}))}_adapterDidThrow(t){this.dispatchEvent(new CustomEvent("error",{detail:t.detail}))}_adapterDidReceiveMessage(t){this._incomingQueue.next(t.detail)}_propagateCurrentState(t,n){const r=JSON.stringify({type:"statechange",value:t}),o=n instanceof Participant?[n]:this.participants;Promise.allSettled(o.filter((t=>t.connectionState===Q.CONNECTED)).map((t=>t.send(r,"@@control"))))}_createParticipant(t){const{id:n,role:r,info:o}=t,l=new Participant(n,r,o);l.addEventListener("sdp",(t=>{this._outgoingQueue.next(t.detail)})),l.addEventListener("connect",(()=>{this._propagateCurrentState(JSON.stringify(this.state),l)})),l.addEventListener("close",(()=>{this._participants.delete(n),this.dispatchEvent(new CustomEvent("participantleave",{detail:l})),this.dispatchEvent(new CustomEvent("leave",{detail:l}))}));const h=this.options.autoConnect(l.info);return h instanceof Promise?h.then((t=>t&&l.connect())):"boolean"==typeof h&&h&&l.connect(),this._participants.set(n,l),l}_receiveSync({payload:t}){const n=[...this._participants.keys()].filter((n=>void 0===t.find((t=>t.id===n)))),r=t.filter((({id:t})=>![...this._participants.keys()].includes(t)));n.forEach((t=>this._participants.get(t).close())),r.map((t=>this._createParticipant(t))).forEach((t=>{this.dispatchEvent(new CustomEvent("participantjoin",{detail:t})),this.dispatchEvent(new CustomEvent("join",{detail:t}))})),this.dispatchEvent(new CustomEvent("connect"))}_receiveConnect({payload:t}){const n=t.filter((({id:t})=>![...this._participants.keys()].includes(t))),r=[...this._participants.keys()].filter((n=>t.find((t=>t.id===n))));n.map((t=>this._createParticipant(t))).forEach((t=>{this.dispatchEvent(new CustomEvent("participantjoin",{detail:t})),this.dispatchEvent(new CustomEvent("join",{detail:t}))})),r.map((t=>this._participants.get(t))).forEach((t=>{t.signalingConnectionState=Q.CONNECTED,t.onSignalingConnectionStateChange()}))}_receiveDisconnect({payload:t}){t.filter((({id:t})=>this._participants.has(t))).map((({id:t})=>this._participants.get(t))).forEach((t=>{t.signalingConnectionState=Q.DISCONNECTED,t.onSignalingConnectionStateChange()}))}_receiveGone({payload:t}){t.filter((({id:t})=>this._participants.has(t))).map((({id:t})=>this._participants.get(t))).forEach((t=>{t.signalingConnectionState=Q.CLOSED,t.onSignalingConnectionStateChange(),t.close()}))}_receiveHangup({target:t}){this._participants.has(t)&&this._participants.get(t).close()}_receiveSignalingMessage(t){this._participants.get(t.target)?.setSignalingMessage(t)}broadcast(t,n){return this.participants.map((r=>r.send(t,n)))}connect(){return this.adapter.connect()}disconnect(){this._outgoingQueueReader.return(void 0),this._incomingQueueReader.return(void 0),this.participants.forEach((t=>t.disconnect())),this.adapter.drain()}}Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_processIncomingMessage",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",Promise)],SignalingBroker.prototype,"_processOutgoingMessage",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[CustomEvent]),X("design:returntype",void 0)],SignalingBroker.prototype,"_adapterDidConnect",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[CustomEvent]),X("design:returntype",void 0)],SignalingBroker.prototype,"_adapterDidDisconnect",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[CustomEvent]),X("design:returntype",void 0)],SignalingBroker.prototype,"_adapterDidThrow",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[CustomEvent]),X("design:returntype",void 0)],SignalingBroker.prototype,"_adapterDidReceiveMessage",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[String,Participant]),X("design:returntype",void 0)],SignalingBroker.prototype,"_propagateCurrentState",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_createParticipant",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_receiveSync",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_receiveConnect",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_receiveDisconnect",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_receiveGone",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_receiveHangup",null),Z([oe("log"),X("design:type",Function),X("design:paramtypes",[Object]),X("design:returntype",void 0)],SignalingBroker.prototype,"_receiveSignalingMessage",null);var me=Object.freeze({__proto__:null,get ConnectionState(){return Q},HTTP2SignalingAdapter,LegacyNegotiationController,Logger:ae,NegotiationController,get NegotiationRole(){return he},get NegotiationSdpType(){return de},Participant,ReceiveProcess,get SignalingAbortStrategy(){return ge},SignalingAdapter,SignalingBroker,get SignalingCredentialType(){return ue},TransferError,get TransferErrorCode(){return ne},TransferProcess,get TransferProcessState(){return se},createCodecPreferences:function(t,n){if(!["audio","video"].includes(t))throw new TypeError(`Unsupported media type: "${t}" is not a valid option`);const r=[],o=RTCRtpSender.getCapabilities?.(t).codecs;if(void 0!==o){for(const t of n)for(let n=0;n<o.length;++n)o[n].mimeType===t&&(r.push(...o.splice(n,1)),n-=1);return r.push(...o),r}},getSupportedAudioCodecs:function(){return new Set(RTCRtpSender.getCapabilities?.("audio").codecs.map((t=>t.mimeType)))},getSupportedVideoCodecs:function(){return new Set(RTCRtpSender.getCapabilities?.("video").codecs.map((t=>t.mimeType)))},LogLevel:Y});const{userAgent:ve}=navigator,fe=()=>{switch(!0){case/edge/i.test(ve):return"Edge";case/edg\//i.test(ve):return"Edge Chromium";case/firefox|fxios/i.test(ve)&&!/seamonkey/i.test(ve):return"Firefox";case/chrome|crios/i.test(ve):return"Chrome";case/safari/i.test(ve):return"Safari";default:return"Unknown"}},be=()=>{function t(t,n){return t.match(n)?t.match(n)[2]:null}switch(fe()){case"Edge":return t(ve,/(edge|edga|edgios)\/([\d]+)/i);case"Edge Chromium":return t(ve,/(edga|edgios|edg)\/([\d]+)/i);case"Firefox":return t(ve,/(firefox|fxios)\/([\d]+)/i);case"Chrome":return t(ve,/(chrome|crios)\/([\d]+)/i);case"Safari":return t(ve,/(version)\/([\d]+)/i);default:return"Unknown"}};fe(),be();const _e="ontouchstart"in window,ye="iPhone"===navigator.platform,we="iPad"===navigator.platform,Ee="RTCPeerConnection"in window&&"RTCDataChannel"in window;var Se=Object.freeze({__proto__:null,getName:fe,getVersion:be,iPad:we,iPhone:ye,isPortaitOriented:()=>{const t=window.screen.orientation?.angle??window.orientation;return(0===t||180===t)&&window.screen.height>window.screen.width},isTouchScreen:_e,supportsWebRTC:Ee});const xe=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ce=Symbol(),ke=new Map;class s$4{constructor(t,n){if(this._$cssResult$=!0,n!==Ce)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=ke.get(this.cssText);return xe&&void 0===t&&(ke.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const $e=t=>new s$4("string"==typeof t?t:t+"",Ce),Te=(t,...n)=>{const r=1===t.length?t[0]:n.reduce(((n,r,o)=>n+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[o+1]),t[0]);return new s$4(r,Ce)},Ae=xe?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let n="";for(const r of t.cssRules)n+=r.cssText;return $e(n)})(t):t;var Oe;const De=window.trustedTypes,Re=De?De.emptyScript:"",Ne=window.reactiveElementPolyfillSupport,Le={toAttribute(t,n){switch(n){case Boolean:t=t?Re:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,n){let r=t;switch(n){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},Me=(t,n)=>n!==t&&(n==n||t==t),Ie={attribute:!0,type:String,converter:Le,reflect:!1,hasChanged:Me};class a$2 extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var n;null!==(n=this.l)&&void 0!==n||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((n,r)=>{const o=this._$Eh(r,n);void 0!==o&&(this._$Eu.set(o,r),t.push(o))})),t}static createProperty(t,n=Ie){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(t,n),!n.noAccessor&&!this.prototype.hasOwnProperty(t)){const r="symbol"==typeof t?Symbol():"__"+t,o=this.getPropertyDescriptor(t,r,n);void 0!==o&&Object.defineProperty(this.prototype,t,o)}}static getPropertyDescriptor(t,n,r){return{get(){return this[n]},set(o){const l=this[t];this[n]=o,this.requestUpdate(t,l,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||Ie}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of n)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)n.unshift(Ae(t))}else void 0!==t&&n.push(Ae(t));return n}static _$Eh(t,n){const r=n.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var n,r;(null!==(n=this._$Eg)&&void 0!==n?n:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(r=t.hostConnected)||void 0===r||r.call(t))}removeController(t){var n;null===(n=this._$Eg)||void 0===n||n.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,n)=>{this.hasOwnProperty(n)&&(this._$Et.set(n,this[n]),delete this[n])}))}createRenderRoot(){var t;const n=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,n)=>{xe?t.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((n=>{const r=document.createElement("style"),o=window.litNonce;void 0!==o&&r.setAttribute("nonce",o),r.textContent=n.cssText,t.appendChild(r)}))})(n,this.constructor.elementStyles),n}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostConnected)||void 0===n?void 0:n.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostDisconnected)||void 0===n?void 0:n.call(t)}))}attributeChangedCallback(t,n,r){this._$AK(t,r)}_$ES(t,n,r=Ie){var o,l;const h=this.constructor._$Eh(t,r);if(void 0!==h&&!0===r.reflect){const g=(null!==(l=null===(o=r.converter)||void 0===o?void 0:o.toAttribute)&&void 0!==l?l:Le.toAttribute)(n,r.type);this._$Ei=t,null==g?this.removeAttribute(h):this.setAttribute(h,g),this._$Ei=null}}_$AK(t,n){var r,o,l;const h=this.constructor,g=h._$Eu.get(t);if(void 0!==g&&this._$Ei!==g){const t=h.getPropertyOptions(g),v=t.converter,f=null!==(l=null!==(o=null===(r=v)||void 0===r?void 0:r.fromAttribute)&&void 0!==o?o:"function"==typeof v?v:null)&&void 0!==l?l:Le.fromAttribute;this._$Ei=g,this[g]=f(n,t.type),this._$Ei=null}}requestUpdate(t,n,r){let o=!0;void 0!==t&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||Me)(this[t],n)?(this._$AL.has(t)||this._$AL.set(t,n),!0===r.reflect&&this._$Ei!==t&&(void 0===this._$E_&&(this._$E_=new Map),this._$E_.set(t,r))):o=!1),!this.isUpdatePending&&o&&(this._$Ep=this._$EC())}async _$EC(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,n)=>this[n]=t)),this._$Et=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostUpdate)||void 0===n?void 0:n.call(t)})),this.update(r)):this._$EU()}catch(t){throw n=!1,this._$EU(),t}n&&this._$AE(r)}willUpdate(t){}_$AE(t){var n;null===(n=this._$Eg)||void 0===n||n.forEach((t=>{var n;return null===(n=t.hostUpdated)||void 0===n?void 0:n.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$E_&&(this._$E_.forEach(((t,n)=>this._$ES(n,this[n],t))),this._$E_=void 0),this._$EU()}updated(t){}firstUpdated(t){}}var Pe;a$2.finalized=!0,a$2.elementProperties=new Map,a$2.elementStyles=[],a$2.shadowRootOptions={mode:"open"},null==Ne||Ne({ReactiveElement:a$2}),(null!==(Oe=globalThis.reactiveElementVersions)&&void 0!==Oe?Oe:globalThis.reactiveElementVersions=[]).push("1.0.2");const Be=globalThis.trustedTypes,Ue=Be?Be.createPolicy("lit-html",{createHTML:t=>t}):void 0,Fe=`lit$${(Math.random()+"").slice(9)}$`,ze="?"+Fe,Ve=`<${ze}>`,He=document,je=(t="")=>He.createComment(t),qe=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Ge=Array.isArray,We=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ye=/-->/g,Je=/>/g,Ke=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Qe=/'/g,Ze=/"/g,Xe=/^(?:script|style|textarea)$/i,et=(t=>(n,...r)=>({_$litType$:t,strings:n,values:r}))(1),tt=Symbol.for("lit-noChange"),nt=Symbol.for("lit-nothing"),it=new WeakMap,st=He.createTreeWalker(He,129,null,!1);class P$1{constructor({strings:t,_$litType$:n},r){let o;this.parts=[];let l=0,h=0;const g=t.length-1,v=this.parts,[f,b]=((t,n)=>{const r=t.length-1,o=[];let l,h=2===n?"<svg>":"",g=We;for(let n=0;n<r;n++){const r=t[n];let v,f,b=-1,_=0;for(;_<r.length&&(g.lastIndex=_,f=g.exec(r),null!==f);)_=g.lastIndex,g===We?"!--"===f[1]?g=Ye:void 0!==f[1]?g=Je:void 0!==f[2]?(Xe.test(f[2])&&(l=RegExp("</"+f[2],"g")),g=Ke):void 0!==f[3]&&(g=Ke):g===Ke?">"===f[0]?(g=null!=l?l:We,b=-1):void 0===f[1]?b=-2:(b=g.lastIndex-f[2].length,v=f[1],g=void 0===f[3]?Ke:'"'===f[3]?Ze:Qe):g===Ze||g===Qe?g=Ke:g===Ye||g===Je?g=We:(g=Ke,l=void 0);const y=g===Ke&&t[n+1].startsWith("/>")?" ":"";h+=g===We?r+Ve:b>=0?(o.push(v),r.slice(0,b)+"$lit$"+r.slice(b)+Fe+y):r+Fe+(-2===b?(o.push(void 0),n):y)}const v=h+(t[r]||"<?>")+(2===n?"</svg>":"");return[void 0!==Ue?Ue.createHTML(v):v,o]})(t,n);if(this.el=P$1.createElement(f,r),st.currentNode=this.el.content,2===n){const t=this.el.content,n=t.firstChild;n.remove(),t.append(...n.childNodes)}for(;null!==(o=st.nextNode())&&v.length<g;){if(1===o.nodeType){if(o.hasAttributes()){const t=[];for(const n of o.getAttributeNames())if(n.endsWith("$lit$")||n.startsWith(Fe)){const r=b[h++];if(t.push(n),void 0!==r){const t=o.getAttribute(r.toLowerCase()+"$lit$").split(Fe),n=/([.?@])?(.*)/.exec(r);v.push({type:1,index:l,name:n[2],strings:t,ctor:"."===n[1]?M$1:"?"===n[1]?H$1:"@"===n[1]?I$1:S$2})}else v.push({type:6,index:l})}for(const n of t)o.removeAttribute(n)}if(Xe.test(o.tagName)){const t=o.textContent.split(Fe),n=t.length-1;if(n>0){o.textContent=Be?Be.emptyScript:"";for(let r=0;r<n;r++)o.append(t[r],je()),st.nextNode(),v.push({type:2,index:++l});o.append(t[n],je())}}}else if(8===o.nodeType)if(o.data===ze)v.push({type:2,index:l});else{let t=-1;for(;-1!==(t=o.data.indexOf(Fe,t+1));)v.push({type:7,index:l}),t+=Fe.length-1}l++}}static createElement(t,n){const r=He.createElement("template");return r.innerHTML=t,r}}function rt(t,n,r=t,o){var l,h,g,v;if(n===tt)return n;let f=void 0!==o?null===(l=r._$Cl)||void 0===l?void 0:l[o]:r._$Cu;const b=qe(n)?void 0:n._$litDirective$;return(null==f?void 0:f.constructor)!==b&&(null===(h=null==f?void 0:f._$AO)||void 0===h||h.call(f,!1),void 0===b?f=void 0:(f=new b(t),f._$AT(t,r,o)),void 0!==o?(null!==(g=(v=r)._$Cl)&&void 0!==g?g:v._$Cl=[])[o]=f:r._$Cu=f),void 0!==f&&(n=rt(t,f._$AS(t,n.values),f,o)),n}class E$1{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n;const{el:{content:r},parts:o}=this._$AD,l=(null!==(n=null==t?void 0:t.creationScope)&&void 0!==n?n:He).importNode(r,!0);st.currentNode=l;let h=st.nextNode(),g=0,v=0,f=o[0];for(;void 0!==f;){if(g===f.index){let n;2===f.type?n=new N$2(h,h.nextSibling,this,t):1===f.type?n=new f.ctor(h,f.name,f.strings,this,t):6===f.type&&(n=new L$1(h,this,t)),this.v.push(n),f=o[++v]}g!==(null==f?void 0:f.index)&&(h=st.nextNode(),g++)}return l}m(t){let n=0;for(const r of this.v)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}}class N$2{constructor(t,n,r,o){var l;this.type=2,this._$AH=nt,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=o,this._$Cg=null===(l=null==o?void 0:o.isConnected)||void 0===l||l}get _$AU(){var t,n;return null!==(n=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==n?n:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return void 0!==n&&11===t.nodeType&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=rt(this,t,n),qe(t)?t===nt||null==t||""===t?(this._$AH!==nt&&this._$AR(),this._$AH=nt):t!==this._$AH&&t!==tt&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):(t=>{var n;return Ge(t)||"function"==typeof(null===(n=t)||void 0===n?void 0:n[Symbol.iterator])})(t)?this.M(t):this.$(t)}A(t,n=this._$AB){return this._$AA.parentNode.insertBefore(t,n)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==nt&&qe(this._$AH)?this._$AA.nextSibling.data=t:this.S(He.createTextNode(t)),this._$AH=t}T(t){var n;const{values:r,_$litType$:o}=t,l="number"==typeof o?this._$AC(t):(void 0===o.el&&(o.el=P$1.createElement(o.h,this.options)),o);if((null===(n=this._$AH)||void 0===n?void 0:n._$AD)===l)this._$AH.m(r);else{const t=new E$1(l,this),n=t.p(this.options);t.m(r),this.S(n),this._$AH=t}}_$AC(t){let n=it.get(t.strings);return void 0===n&&it.set(t.strings,n=new P$1(t)),n}M(t){Ge(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,o=0;for(const l of t)o===n.length?n.push(r=new N$2(this.A(je()),this.A(je()),this,this.options)):r=n[o],r._$AI(l),o++;o<n.length&&(this._$AR(r&&r._$AB.nextSibling,o),n.length=o)}_$AR(t=this._$AA.nextSibling,n){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,n);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var n;void 0===this._$AM&&(this._$Cg=t,null===(n=this._$AP)||void 0===n||n.call(this,t))}}class S$2{constructor(t,n,r,o,l){this.type=1,this._$AH=nt,this._$AN=void 0,this.element=t,this.name=n,this._$AM=o,this.options=l,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=nt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,r,o){const l=this.strings;let h=!1;if(void 0===l)t=rt(this,t,n,0),h=!qe(t)||t!==this._$AH&&t!==tt,h&&(this._$AH=t);else{const o=t;let g,v;for(t=l[0],g=0;g<l.length-1;g++)v=rt(this,o[r+g],n,g),v===tt&&(v=this._$AH[g]),h||(h=!qe(v)||v!==this._$AH[g]),v===nt?t=nt:t!==nt&&(t+=(null!=v?v:"")+l[g+1]),this._$AH[g]=v}h&&!o&&this.k(t)}k(t){t===nt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class M$1 extends S$2{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===nt?void 0:t}}const at=Be?Be.emptyScript:"";class H$1 extends S$2{constructor(){super(...arguments),this.type=4}k(t){t&&t!==nt?this.element.setAttribute(this.name,at):this.element.removeAttribute(this.name)}}class I$1 extends S$2{constructor(t,n,r,o,l){super(t,n,r,o,l),this.type=5}_$AI(t,n=this){var r;if((t=null!==(r=rt(this,t,n,0))&&void 0!==r?r:nt)===tt)return;const o=this._$AH,l=t===nt&&o!==nt||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,h=t!==nt&&(o===nt||l);l&&this.element.removeEventListener(this.name,this,o),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class L$1{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){rt(this,t)}}const ot=window.litHtmlPolyfillSupport;var lt,ct;null==ot||ot(P$1,N$2),(null!==(Pe=globalThis.litHtmlVersions)&&void 0!==Pe?Pe:globalThis.litHtmlVersions=[]).push("2.0.2");class s$1 extends a$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,n;const r=super.createRenderRoot();return null!==(t=(n=this.renderOptions).renderBefore)&&void 0!==t||(n.renderBefore=r.firstChild),r}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,n,r)=>{var o,l;const h=null!==(o=null==r?void 0:r.renderBefore)&&void 0!==o?o:n;let g=h._$litPart$;if(void 0===g){const t=null!==(l=null==r?void 0:r.renderBefore)&&void 0!==l?l:null;h._$litPart$=g=new N$2(n.insertBefore(je(),t),t,void 0,null!=r?r:{})}return g._$AI(t),g})(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return tt}}s$1.finalized=!0,s$1._$litElement$=!0,null===(lt=globalThis.litElementHydrateSupport)||void 0===lt||lt.call(globalThis,{LitElement:s$1});const dt=globalThis.litElementPolyfillSupport;null==dt||dt({LitElement:s$1}),(null!==(ct=globalThis.litElementVersions)&&void 0!==ct?ct:globalThis.litElementVersions=[]).push("3.0.2");class EventContext{constructor(){this._controller=new AbortController,this._signal=this._controller.signal}get closed(){return this._signal.aborted}register(t,n,r,o={}){if(this._signal.aborted)throw new TypeError("Event context has already been closed");if(!(t instanceof EventTarget))throw new TypeError("Target is not an EventTarget");if(o.signal instanceof AbortSignal)throw new TypeError("Registring event listeners with a signal already attached is not supported");this._signal.addEventListener("abort",this.unregister.bind(this,t,n,r),{once:!0}),t.addEventListener(n,r,o)}unregister(t,n,r){t instanceof EventTarget&&t.removeEventListener(n,r)}close(){this._signal.aborted||this._controller.abort()}}new EventContext;const ht=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-zA-Z]{2,}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,pt=/\b(([a-zA-Z0-9\-\_\.\!\#\~\])+(\+[a-zA-Z0-9]*)?@[a-zA-Z\_\-]+?(\.[a-zA-Z]{2,})+)/gim,ut=t=>{const n=/&/g,r=/</g,o=/\'/g,l=/\"/g,h=/\`/g;return null==t?t:("string"!=typeof t&&(t=String(t)),/[&<>\"\']/.test(String(t))?t.replaceAll(n,"&amp;").replaceAll(r,"&lt;").replaceAll(o,"&apos;").replaceAll(l,"&quot;").replaceAll(h,"&#96;"):t)};function gt(t){return t?Object.keys(t).map((n=>{const r=t[n];return`${ut(n)}="${ut(r)}"`})).join(" "):""}function mt(t,n){const r=ut(t);let o=t;/^[a-zA-Z]{1,6}:/.test(o)||(o=`http://${o}`);const l=function(){return Array.prototype.slice.call(arguments).map(gt).filter(Boolean).join(" ")}({href:o},n);return`<a target="_blank"  ${l}>${r}</a>`}function vt(t,n){n||(n={});let r,o="",l=0;const h=!1===n.escape?t=>t:ut;for(;r=ht.exec(t);)o+=h(t.slice(l,r.index)),o+=mt(r[0],n.attributes),l=ht.lastIndex;return o+=h(t.slice(l)),o=function(t,n){const r=gt(n);return t.replace(pt,((t,n)=>{let o=gt({href:`mailto:${n}`});return r&&(o+=` ${r}`),`<a target="_blank" ${o}>${ut(n)}</a>`}))}(o,n.attributes),o}function ft(t,n){let r;return function(...o){clearTimeout(r),r=setTimeout((()=>t.apply(this,o)),n)}}class t$1{static feature;static testType;_supported;static dependsOn(){return[]}get isSupported(){if(void 0===this._supported||null===this._supported)throw new Error("Trying to get support status of feature without testing it");return this._supported}async checkSupport(t=!1){if(void 0===this._supported||null===this._supported||t)try{this._supported=await this.test()}catch(t){this._supported=!1}return this._supported}checkSupportSync(t=!1){if(void 0===this._supported||null===this._supported||t)try{this._supported=this.testSync()}catch(t){this._supported=!1}return this._supported}}var bt;!function(t){t[t.STANDARD=0]="STANDARD",t[t.LONG_RUNNING=1]="LONG_RUNNING",t[t.NON_CACHEABLE=2]="NON_CACHEABLE"}(bt||(bt={}));class s extends t$1{static feature="PeerConnection";static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){return!!RTCPeerConnection}}class r$2 extends t$1{static feature="indexeddb";static testType=bt.LONG_RUNNING;async test(){return await new Promise((t=>{try{if(window.indexedDB){const n="spreewunder-featuretest",r=indexedDB.open(n);r.onerror=()=>{t(!1)},r.onsuccess=()=>{t(!0)}}else t(!1)}catch(n){t(!1)}}))}testSync(){return this.test()}}class n$1{static testType;_detected;static dependsOn(){return[]}get wasDetected(){if(void 0===this._detected||null===this._detected)throw new Error("Trying to get platform detection status of platform without testing it");return this._detected}async detected(){if(void 0===this._detected||null===this._detected)try{this._detected=await this.test()}catch(t){this._detected=!1}return this._detected}detectedSync(){if(void 0===this._detected||null===this._detected)try{this._detected=this.testSync()}catch(t){this._detected=!1}return this._detected}}class i$2 extends t$1{static feature="VibrateAPI";static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){return!!navigator.vibrate}}class c extends n$1{static testType=bt.STANDARD;static dependsOn(){return[i$2]}async test(){return this.testSync()}testSync(){const t=(new i$2).testSync();return/safari/i.test(navigator.userAgent)&&!t}}class a extends n$1{static testType=bt.STANDARD;async test(){return this.detectedSync()}testSync(){const t=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),n=!!window.chrome;return t||n}}class o$1 extends n$1{static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){return/edge/i.test(navigator.userAgent)}}class u extends n$1{static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){return/edg\//i.test(navigator.userAgent)}}class d$2 extends n$1{static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){return/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent)}}class p extends t$1{static feature="PointerLock";static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){const t=document.createElement("canvas");return!!t.requestPointerLock||!!t.mozRequestPointerLock}}class h$1 extends t$1{static feature="WebNotifications";static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){return!!window.Notification}}class y$1{static testType=bt.STANDARD;test(){return"ontouchstart"in window}}class f$1 extends t$1{static feature="SafariDesktopFeatures";static testType=bt.STANDARD;static dependsOn(){return[p,h$1,y$1]}async test(){return this.testSync()}testSync(){const t=(new p).testSync(),n=(new h$1).testSync(),r=(new y$1).test();return n||t||!r}}class D$1 extends n$1{static testType=bt.STANDARD;static dependsOn(){return[f$1,c]}async test(){return this.testSync()}testSync(){const t="iPhone"===navigator.platform,n=(new f$1).testSync(),r=(new c).testSync();return t||r&&!n}}class S$1 extends n$1{static testType=bt.STANDARD;static dependsOn(){return[f$1,c]}async test(){return this.testSync()}testSync(){const t="iPad"===navigator.platform,n=(new f$1).testSync(),r=(new c).testSync();return t||r&&!n}}class _$1{static testType=bt.NON_CACHEABLE;test(){const t=window.screen.orientation?.angle??window.orientation;return(0===t||180===t)&&window.screen.height>window.screen.width}}class g$1 extends t$1{static feature="setSinkId";static testType=bt.STANDARD;async test(){return this.testSync()}testSync(){try{return"function"==typeof document.createElement("video").setSinkId}catch(t){return!1}}}class m extends n$1{static testType=bt.STANDARD;static dependsOn(){return[c,f$1]}async test(){return this.testSync()}testSync(){const t=(new c).testSync(),n=(new f$1).testSync();return t&&n}}class w$1{static testType=bt.STANDARD;_inputInfo={deviceType:"unknown",primaryInput:"unknown"};get deviceType(){return this._inputInfo.deviceType}get primaryInput(){return this._inputInfo.primaryInput}test(){const t=window??{screen:{},navigator:{}},n=(t.matchMedia??(()=>({matches:!1}))).bind(t),r={get passive(){return!0}},o=()=>{};t.addEventListener&&t.addEventListener("p",o,r),t.removeEventListener&&t.removeEventListener("p",o,!1);const l="ontouchstart"in t,h=l||"TouchEvent"in t&&n("(any-pointer: coarse)").matches,g=(t.navigator.maxTouchPoints||0)>0||h,v=t.navigator.userAgent||"",f=n("(pointer: coarse)").matches&&/iPad|Macintosh/.test(v)&&Math.min(t.screen.width||0,t.screen.height||0)>=768,b=(n("(pointer: coarse)").matches||!n("(pointer: fine)").matches&&l)&&!/Windows.*Firefox/.test(v),_=n("(any-pointer: fine)").matches||n("(any-hover: hover)").matches||f||!l,y=!g||!_&&b?g?"touchOnly":"mouseOnly":"hybrid",w="mouseOnly"===y?"mouse":"touchOnly"===y||b?"touch":"mouse";this._inputInfo={deviceType:y,primaryInput:w}}}const _t=[s,r$2,g$1,i$2,h$1,p,f$1],yt={safari:c,chromium:a,edge:o$1,edgeChromium:u,firefox:d$2,iphone:D$1,ipad:S$1,safariDesktop:m},wt={PortraitOrientation:_$1,TouchScreen:y$1,InputDevice:w$1};class v$1{static _safariDetector=new yt.safari;static _chromiumDetector=new yt.chromium;static _firefoxDetector=new yt.firefox;static _edgeDetector=new yt.edge;static _edgeChromiumDetector=new yt.edgeChromium;static _iphoneDetector=new yt.iphone;static _ipadDetector=new yt.ipad;static _safariDesktopDetector=new yt.safariDesktop;static async init(t={}){await Promise.all([v$1._safariDetector.detected(),v$1._chromiumDetector.detected(),v$1._firefoxDetector.detected(),v$1._edgeDetector.detected(),v$1._edgeChromiumDetector.detected(),v$1._ipadDetector.detected(),v$1._iphoneDetector.detected(),v$1._safariDesktopDetector.detected()])}static initSync(t={}){v$1._safariDetector.detectedSync(),v$1._chromiumDetector.detectedSync(),v$1._firefoxDetector.detectedSync(),v$1._edgeDetector.detectedSync(),v$1._edgeChromiumDetector.detectedSync(),v$1._ipadDetector.detectedSync(),v$1._iphoneDetector.detectedSync(),v$1._safariDesktopDetector.detectedSync()}static get isChromium(){return v$1._chromiumDetector.wasDetected}static get isSafari(){return v$1._safariDetector.wasDetected}static get isFirefox(){return v$1._firefoxDetector.wasDetected}static get isEdge(){return v$1._edgeDetector.wasDetected}static get isEdgeChromium(){return v$1._edgeChromiumDetector.wasDetected}static get isIPhone(){return v$1._iphoneDetector.wasDetected}static get isIPad(){return v$1._ipadDetector.wasDetected}static get isSafariDesktop(){return v$1._safariDesktopDetector.wasDetected}static get browserVersion(){return v$1.isEdge?v$1._parseVersion(/(edge|edga|edgios)\/([\d]+)/i):v$1.isEdgeChromium?v$1._parseVersion(/(edga|edgios|edg)\/([\d]+)/i):v$1.isFirefox?v$1._parseVersion(/(firefox|fxios)\/([\d]+)/i):v$1.isChromium?v$1._parseVersion(/(chrome|crios)\/([\d]+)/i):v$1.isSafari?v$1._parseVersion(/(version)\/([\d]+)/i):"Unknown"}static get browserName(){return this.isEdge?"Edge":this.isEdgeChromium?"EdgeChromium":this.isFirefox?"Firefox":this.isSafari?"Safari":this.isChromium?"Chromium":"Unknown"}static _parseVersion(t){return navigator.userAgent.match(t)?navigator.userAgent.match(t)[2]:"Unknown"}}class N$1{static _featureTests=new Map;static async init(t={runAll:!0}){for(let n of _t){const r=new n;N$1._featureTests.set(n.feature,r),(n.testType!==bt.LONG_RUNNING||t.runAll)&&await r.checkSupport()}}static initSync(t={runAll:!0}){for(let n of _t){const r=new n;N$1._featureTests.set(n.feature,r),(n.testType!==bt.LONG_RUNNING||t.runAll)&&r.checkSupportSync()}}static browserSupport(t){if(!N$1._featureTests.has(t))throw new Error("Feature test not found");return N$1._featureTests.get(t).isSupported}static get featureNames(){return[...N$1._featureTests.keys()]}static async runDetection(t){if(!N$1._featureTests.has(t))throw new Error("Feature test not found");const n=N$1._featureTests.get(t);return await n.checkSupport(!0)}static async runAllDetections(){for(let t of N$1._featureTests.keys()){const n=N$1._featureTests.get(t);await n.checkSupport(!0)}}static runDetectionSync(t){if(!N$1._featureTests.has(t))throw new Error("Feature test not found");return N$1._featureTests.get(t).checkSupportSync(!0)}static runAllDetectionsSync(){for(let t of N$1._featureTests.keys())N$1._featureTests.get(t).checkSupportSync(!0)}}class x$1{static _portraitOrientationDetector=new wt.PortraitOrientation;static _touchScreenDetector=new wt.TouchScreen;static _inputDeviceDetector=new wt.InputDevice;static async init(t={}){this.initSync()}static initSync(t={}){x$1._inputDeviceDetector.test()}static get isPortaitOriented(){return x$1._portraitOrientationDetector.test()}static get isTouchScreen(){return x$1._touchScreenDetector.test()}static get primaryInput(){return x$1._inputDeviceDetector.primaryInput}static get inputDeviceType(){return x$1._inputDeviceDetector.deviceType}}class k$1{static _initialized=!1;static get isReady(){return k$1._initialized}static async init(t={platform:{},feature:{}}){await k$1.features.init(t.feature),await k$1.platform.init(t.platform),await k$1.miscellaneous.init(),k$1._initialized=!0}static initSync(t={platform:{},feature:{}}){k$1.features.initSync(t.feature),k$1.platform.initSync(t.platform),k$1.miscellaneous.initSync(),k$1._initialized=!0}static get platform(){return v$1}static get features(){return N$1}static get miscellaneous(){return x$1}}const Et=2;const St=(t,n)=>{var r,o;const l=t._$AN;if(void 0===l)return!1;for(const t of l)null===(o=(r=t)._$AO)||void 0===o||o.call(r,n,!1),St(t,n);return!0},xt=t=>{let n,r;do{if(void 0===(n=t._$AM))break;r=n._$AN,r.delete(t),t=n}while(0===(null==r?void 0:r.size))},Ct=t=>{for(let n;n=t._$AM;t=n){let r=n._$AN;if(void 0===r)n._$AN=r=new Set;else if(r.has(t))break;r.add(t),Tt(n)}};function kt(t){void 0!==this._$AN?(xt(this),this._$AM=t,Ct(this)):this._$AM=t}function $t(t,n=!1,r=0){const o=this._$AH,l=this._$AN;if(void 0!==l&&0!==l.size)if(n)if(Array.isArray(o))for(let t=r;t<o.length;t++)St(o[t],!1),xt(o[t]);else null!=o&&(St(o,!1),xt(o));else St(this,t)}const Tt=t=>{var n,r,o,l;t.type==Et&&(null!==(n=(o=t)._$AP)&&void 0!==n||(o._$AP=$t),null!==(r=(l=t)._$AQ)&&void 0!==r||(l._$AQ=kt))};const At=(t=>(...n)=>({_$litDirective$:t,values:n}))(class EventBinding extends class d$1 extends class i$1{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,r){this._$Ct=t,this._$AM=n,this._$Ci=r}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,n,r){super._$AT(t,n,r),Ct(this),this.isConnected=t._$AU}_$AO(t,n=!0){var r,o;t!==this.isConnected&&(this.isConnected=t,t?null===(r=this.reconnected)||void 0===r||r.call(this):null===(o=this.disconnected)||void 0===o||o.call(this)),n&&(St(this,t),xt(this))}setValue(t){if((t=>void 0===t.strings)(this._$Ct))this._$Ct._$AI(t,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=t,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}{#e=void 0;#t=void 0;render(t,n,r=(t=>t.detail),o=tt,l={once:!1}){if(!(t instanceof EventTarget))throw new TypeError("Unexpected value: Argument must be an EventTarget");const h=t=>this.setValue(r(t));return this.#e=()=>t.addEventListener(n,h,l),this.#t=()=>t.removeEventListener(n,h),this.isConnected&&this.#e(),o}reconnected(){this.#e()}disconnected(){this.#t()}});var Ot;!function(t,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===r&&o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l),l.styleSheet?l.styleSheet.cssText=t:l.appendChild(document.createTextNode(t))}}('/* ! tailwindcss v3.0.2 | MIT License | https://tailwindcss.com */\n\n*,\n::before,\n::after{\n  box-sizing:border-box;\n  border-width:0;\n  border-style:solid;\n  border-color:currentColor;\n}\n\n::before,\n::after{\n  --tw-content:\'\';\n}\n\nhtml{\n  line-height:1.5;\n  -webkit-text-size-adjust:100%;\n  -moz-tab-size:4;\n  tab-size:4;\n  font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n}\n\nbody{\n  margin:0;\n  line-height:inherit;\n}\n\nhr{\n  height:0;\n  color:inherit;\n  border-top-width:1px;\n}\n\nabbr[title]{\n  -webkit-text-decoration:underline dotted;\n          text-decoration:underline dotted;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6{\n  font-size:inherit;\n  font-weight:inherit;\n}\n\na{\n  color:inherit;\n  text-decoration:inherit;\n}\n\nb,\nstrong{\n  font-weight:bolder;\n}\n\ncode,\nkbd,\nsamp,\npre{\n  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  font-size:1em;\n}\n\nsmall{\n  font-size:80%;\n}\n\nsub,\nsup{\n  font-size:75%;\n  line-height:0;\n  position:relative;\n  vertical-align:baseline;\n}\n\nsub{\n  bottom:-0.25em;\n}\n\nsup{\n  top:-0.5em;\n}\n\ntable{\n  text-indent:0;\n  border-color:inherit;\n  border-collapse:collapse;\n}\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea{\n  font-family:inherit;\n  font-size:100%;\n  line-height:inherit;\n  color:inherit;\n  margin:0;\n  padding:0;\n}\n\nbutton,\nselect{\n  text-transform:none;\n}\n\nbutton,\n[type=\'button\'],\n[type=\'reset\'],\n[type=\'submit\']{\n  -webkit-appearance:button;\n  background-color:transparent;\n  background-image:none;\n}\n\n:-moz-focusring{\n  outline:auto;\n}\n\n:-moz-ui-invalid{\n  box-shadow:none;\n}\n\nprogress{\n  vertical-align:baseline;\n}\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button{\n  height:auto;\n}\n\n[type=\'search\']{\n  -webkit-appearance:textfield;\n  outline-offset:-2px;\n}\n\n::-webkit-search-decoration{\n  -webkit-appearance:none;\n}\n\n::-webkit-file-upload-button{\n  -webkit-appearance:button;\n  font:inherit;\n}\n\nsummary{\n  display:list-item;\n}\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre{\n  margin:0;\n}\n\nfieldset{\n  margin:0;\n  padding:0;\n}\n\nlegend{\n  padding:0;\n}\n\nol,\nul,\nmenu{\n  list-style:none;\n  margin:0;\n  padding:0;\n}\n\ntextarea{\n  resize:vertical;\n}\n\ninput::placeholder,\ntextarea::placeholder{\n  opacity:1;\n  color:#9ca3af;\n}\n\nbutton,\n[role="button"]{\n  cursor:pointer;\n}\n:disabled{\n  cursor:default;\n}\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject{\n  display:block;\n  vertical-align:middle;\n}\n\nimg,\nvideo{\n  max-width:100%;\n  height:auto;\n}\n\n[hidden]{\n  display:none;\n}\n\n*, ::before, ::after{\n  --tw-translate-x:0;\n  --tw-translate-y:0;\n  --tw-rotate:0;\n  --tw-skew-x:0;\n  --tw-skew-y:0;\n  --tw-scale-x:1;\n  --tw-scale-y:1;\n  --tw-transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n  --tw-border-opacity:1;\n  border-color:rgb(229 231 235 / var(--tw-border-opacity));\n  --tw-ring-offset-shadow:0 0 #0000;\n  --tw-ring-shadow:0 0 #0000;\n  --tw-shadow:0 0 #0000;\n  --tw-shadow-colored:0 0 #0000;\n  --tw-blur:var(--tw-empty,/*!*/ /*!*/);\n  --tw-brightness:var(--tw-empty,/*!*/ /*!*/);\n  --tw-contrast:var(--tw-empty,/*!*/ /*!*/);\n  --tw-grayscale:var(--tw-empty,/*!*/ /*!*/);\n  --tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);\n  --tw-invert:var(--tw-empty,/*!*/ /*!*/);\n  --tw-saturate:var(--tw-empty,/*!*/ /*!*/);\n  --tw-sepia:var(--tw-empty,/*!*/ /*!*/);\n  --tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);\n  --tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.container{\n  width:100%;\n}\n\n@media (min-width: 505px){\n\n  .container{\n    max-width:505px;\n  }\n}\n\n@media (min-width: 506px){\n\n  .container{\n    max-width:506px;\n  }\n}\n\n@media (min-width: 640px){\n\n  .container{\n    max-width:640px;\n  }\n}\n\n@media (min-width: 768px){\n\n  .container{\n    max-width:768px;\n  }\n}\n\n@media (min-width: 1024px){\n\n  .container{\n    max-width:1024px;\n  }\n}\n\n@media (min-width: 1280px){\n\n  .container{\n    max-width:1280px;\n  }\n}\n\n@media (min-width: 1536px){\n\n  .container{\n    max-width:1536px;\n  }\n}\n\n.theme-light{\n    --bg-primary:#fff;\n    --bg-secondary:#f2f2f2;\n    --border-secondary:#e5e5e5;\n    --bg-tertiary:#e5e5e5;\n    --btn-primary:#4a5568;\n    --btn-secondary:#718096;\n    --btn-checked:#9b2c2c;\n    --btn-text:#e2e8f0;\n    --input-bg:#fff;\n    --text-primary:#444444;\n    --text-secondary:#b6b6b6;\n}\n\n.theme-dark{\n    --bg-primary:#1a202c;\n    --bg-secondary:#2d3748;\n    --border-secondary:#4a5568;\n    --bg-tertiary:#4a5568;\n    --btn-primary:#4a5568;\n    --btn-secondary:#718096;\n    --btn-checked:#9b2c2c;\n    --btn-text:#e2e8f0;\n    --input-bg:#4a5568;\n    --text-primary:#e2e8f0;\n    --text-secondary:#a0aec0;\n}\n\nbody{\n    --border-radius:8px;\n    --border-style:solid;\n    --border-width:1px;\n}\n\n.absolute-center{\n    position:absolute;\n    left:50%;\n    top:50%;\n    transform:translate(-50%, -50%);\n}\n\n.h-half{\n    height:50%;\n}\n\n.top-25{\n    top:25%;\n}\n\n.-top-1{\n    top:-0.25rem;\n}\n\n.mirror{\n    transform:scaleX(-1);\n}\n\n.outline-remove{\n    outline:none;\n}\n\n.flex-center{\n    display:flex;\n    justify-content:center;\n    align-items:center;\n}\n\n.min-w-8{\n    min-width:2rem;\n}\n\n.max-w-90vw{\n    max-width:90vw;\n}\n\n.pointer-events-none{\n  pointer-events:none;\n}\n\n.pointer-events-auto{\n  pointer-events:auto;\n}\n\n.visible{\n  visibility:visible;\n}\n\n.static{\n  position:static;\n}\n\n.fixed{\n  position:fixed;\n}\n\n.absolute{\n  position:absolute;\n}\n\n.relative{\n  position:relative;\n}\n\n.sticky{\n  position:sticky;\n}\n\n.inset-0{\n  top:0px;\n  right:0px;\n  bottom:0px;\n  left:0px;\n}\n\n.inset-x-0{\n  left:0px;\n  right:0px;\n}\n\n.inset-y-0{\n  top:0px;\n  bottom:0px;\n}\n\n.bottom-2{\n  bottom:0.5rem;\n}\n\n.left-2{\n  left:0.5rem;\n}\n\n.bottom-0{\n  bottom:0px;\n}\n\n.top-full{\n  top:100%;\n}\n\n.top-0{\n  top:0px;\n}\n\n.left-full{\n  left:100%;\n}\n\n.top-2\\/4{\n  top:50%;\n}\n\n.right-full{\n  right:100%;\n}\n\n.bottom-full{\n  bottom:100%;\n}\n\n.left-2\\/4{\n  left:50%;\n}\n\n.top-2{\n  top:0.5rem;\n}\n\n.left-24{\n  left:6rem;\n}\n\n.left-0{\n  left:0px;\n}\n\n.right-0{\n  right:0px;\n}\n\n.z-100{\n  z-index:100;\n}\n\n.z-50{\n  z-index:50;\n}\n\n.m-2{\n  margin:0.5rem;\n}\n\n.m-1{\n  margin:0.25rem;\n}\n\n.m-auto{\n  margin:auto;\n}\n\n.my-4{\n  margin-top:1rem;\n  margin-bottom:1rem;\n}\n\n.mx-auto{\n  margin-left:auto;\n  margin-right:auto;\n}\n\n.my-2{\n  margin-top:0.5rem;\n  margin-bottom:0.5rem;\n}\n\n.mb-9{\n  margin-bottom:2.25rem;\n}\n\n.ml-2{\n  margin-left:0.5rem;\n}\n\n.mb-4{\n  margin-bottom:1rem;\n}\n\n.mr-2{\n  margin-right:0.5rem;\n}\n\n.mb-3{\n  margin-bottom:0.75rem;\n}\n\n.mb-6{\n  margin-bottom:1.5rem;\n}\n\n.mr-3{\n  margin-right:0.75rem;\n}\n\n.ml-3{\n  margin-left:0.75rem;\n}\n\n.ml-auto{\n  margin-left:auto;\n}\n\n.block{\n  display:block;\n}\n\n.inline-block{\n  display:inline-block;\n}\n\n.inline{\n  display:inline;\n}\n\n.flex{\n  display:flex;\n}\n\n.inline-flex{\n  display:inline-flex;\n}\n\n.table{\n  display:table;\n}\n\n.grid{\n  display:grid;\n}\n\n.inline-grid{\n  display:inline-grid;\n}\n\n.contents{\n  display:contents;\n}\n\n.hidden{\n  display:none;\n}\n\n.h-full{\n  height:100%;\n}\n\n.h-12{\n  height:3rem;\n}\n\n.h-1{\n  height:0.25rem;\n}\n\n.h-7{\n  height:1.6rem;\n}\n\n.h-8{\n  height:2rem;\n}\n\n.h-4{\n  height:1rem;\n}\n\n.h-0{\n  height:0px;\n}\n\n.w-full{\n  width:100%;\n}\n\n.w-24{\n  width:6rem;\n}\n\n.w-4\\/5{\n  width:80%;\n}\n\n.w-10{\n  width:2.5rem;\n}\n\n.w-7{\n  width:1.6rem;\n}\n\n.w-max{\n  width:max-content;\n}\n\n.w-20{\n  width:5rem;\n}\n\n.w-8{\n  width:2rem;\n}\n\n.w-min{\n  width:min-content;\n}\n\n.w-12{\n  width:3rem;\n}\n\n.w-4{\n  width:1rem;\n}\n\n.w-96{\n  width:24rem;\n}\n\n.max-w-full{\n  max-width:100%;\n}\n\n.max-w-7xl{\n  max-width:80rem;\n}\n\n.shrink-0{\n  flex-shrink:0;\n}\n\n.shrink{\n  flex-shrink:1;\n}\n\n.flex-grow{\n  flex-grow:1;\n}\n\n.grow{\n  flex-grow:1;\n}\n\n.-translate-y-1\\/2{\n  --tw-translate-y:-50%;\n  transform:var(--tw-transform);\n}\n\n.-translate-x-1\\/2{\n  --tw-translate-x:-50%;\n  transform:var(--tw-transform);\n}\n\n.scale-75{\n  --tw-scale-x:.75;\n  --tw-scale-y:.75;\n  transform:var(--tw-transform);\n}\n\n.transform{\n  transform:var(--tw-transform);\n}\n\n.cursor-not-allowed{\n  cursor:not-allowed;\n}\n\n.cursor-pointer{\n  cursor:pointer;\n}\n\n.select-none{\n  -webkit-user-select:none;\n          user-select:none;\n}\n\n.resize-none{\n  resize:none;\n}\n\n.resize{\n  resize:both;\n}\n\n.appearance-none{\n  -webkit-appearance:none;\n          appearance:none;\n}\n\n.grid-cols-1{\n  grid-template-columns:repeat(1, minmax(0, 1fr));\n}\n\n.grid-cols-2{\n  grid-template-columns:repeat(2, minmax(0, 1fr));\n}\n\n.grid-cols-3{\n  grid-template-columns:repeat(3, minmax(0, 1fr));\n}\n\n.grid-cols-4{\n  grid-template-columns:repeat(4, minmax(0, 1fr));\n}\n\n.grid-cols-5{\n  grid-template-columns:repeat(5, minmax(0, 1fr));\n}\n\n.grid-cols-6{\n  grid-template-columns:repeat(6, minmax(0, 1fr));\n}\n\n.grid-cols-7{\n  grid-template-columns:repeat(7, minmax(0, 1fr));\n}\n\n.grid-cols-8{\n  grid-template-columns:repeat(8, minmax(0, 1fr));\n}\n\n.grid-cols-9{\n  grid-template-columns:repeat(9, minmax(0, 1fr));\n}\n\n.grid-cols-10{\n  grid-template-columns:repeat(10, minmax(0, 1fr));\n}\n\n.grid-cols-11{\n  grid-template-columns:repeat(11, minmax(0, 1fr));\n}\n\n.grid-cols-12{\n  grid-template-columns:repeat(12, minmax(0, 1fr));\n}\n\n.grid-cols-none{\n  grid-template-columns:none;\n}\n\n.flex-col{\n  flex-direction:column;\n}\n\n.flex-col-reverse{\n  flex-direction:column-reverse;\n}\n\n.items-end{\n  align-items:flex-end;\n}\n\n.items-center{\n  align-items:center;\n}\n\n.justify-center{\n  justify-content:center;\n}\n\n.justify-between{\n  justify-content:space-between;\n}\n\n.justify-items-center{\n  justify-items:center;\n}\n\n.gap-2{\n  gap:0.5rem;\n}\n\n.gap-4{\n  gap:1rem;\n}\n\n.self-end{\n  align-self:flex-end;\n}\n\n.justify-self-start{\n  justify-self:start;\n}\n\n.justify-self-end{\n  justify-self:end;\n}\n\n.overflow-auto{\n  overflow:auto;\n}\n\n.overflow-hidden{\n  overflow:hidden;\n}\n\n.overflow-y-auto{\n  overflow-y:auto;\n}\n\n.truncate{\n  overflow:hidden;\n  text-overflow:ellipsis;\n  white-space:nowrap;\n}\n\n.whitespace-nowrap{\n  white-space:nowrap;\n}\n\n.break-words{\n  overflow-wrap:break-word;\n}\n\n.rounded-none{\n  border-radius:0px;\n}\n\n.rounded-sm{\n  border-radius:0.125rem;\n}\n\n.rounded{\n  border-radius:0.25rem;\n}\n\n.rounded-md{\n  border-radius:0.375rem;\n}\n\n.rounded-lg{\n  border-radius:0.5rem;\n}\n\n.rounded-xl{\n  border-radius:0.75rem;\n}\n\n.rounded-2xl{\n  border-radius:1rem;\n}\n\n.rounded-3xl{\n  border-radius:1.5rem;\n}\n\n.rounded-full{\n  border-radius:9999px;\n}\n\n.border{\n  border-width:1px;\n}\n\n.border-b{\n  border-bottom-width:1px;\n}\n\n.bg-emerald-700{\n  --tw-bg-opacity:1;\n  background-color:rgb(4 120 87 / var(--tw-bg-opacity));\n}\n\n.bg-black{\n  --tw-bg-opacity:1;\n  background-color:rgb(0 0 0 / var(--tw-bg-opacity));\n}\n\n.fill-current{\n  fill:currentColor;\n}\n\n.object-cover{\n  object-fit:cover;\n}\n\n.p-4{\n  padding:1rem;\n}\n\n.p-2{\n  padding:0.5rem;\n}\n\n.p-3{\n  padding:0.75rem;\n}\n\n.p-1{\n  padding:0.25rem;\n}\n\n.px-2{\n  padding-left:0.5rem;\n  padding-right:0.5rem;\n}\n\n.pt-2{\n  padding-top:0.5rem;\n}\n\n.pb-2{\n  padding-bottom:0.5rem;\n}\n\n.text-left{\n  text-align:left;\n}\n\n.text-center{\n  text-align:center;\n}\n\n.text-right{\n  text-align:right;\n}\n\n.align-middle{\n  vertical-align:middle;\n}\n\n.font-sans{\n  font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n}\n\n.text-xl{\n  font-size:1.25rem;\n  line-height:1.75rem;\n}\n\n.text-sm{\n  font-size:0.875rem;\n  line-height:1.25rem;\n}\n\n.font-bold{\n  font-weight:700;\n}\n\n.italic{\n  font-style:italic;\n}\n\n.leading-6{\n  line-height:1.5rem;\n}\n\n.underline{\n  text-decoration:underline;\n}\n\n.opacity-25{\n  opacity:0.25;\n}\n\n.shadow-md{\n  --tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);\n  box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n\n.outline{\n  outline-style:solid;\n}\n\n.blur{\n  --tw-blur:blur(8px);\n  filter:var(--tw-filter);\n}\n\n.filter{\n  filter:var(--tw-filter);\n}\n\n.transition{\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration:150ms;\n}\n\n.ease-in-out{\n  transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.focus\\:outline-none:focus{\n  outline:2px solid transparent;\n  outline-offset:2px;\n}\n');class BaseElement extends s$1{static get dependencies(){return[]}static get prefix(){return"sv"}static get styles(){return[$e('/* ! tailwindcss v3.0.2 | MIT License | https://tailwindcss.com */\n\n*,\n::before,\n::after{\n  box-sizing:border-box;\n  border-width:0;\n  border-style:solid;\n  border-color:currentColor;\n}\n\n::before,\n::after{\n  --tw-content:\'\';\n}\n\nhtml{\n  line-height:1.5;\n  -webkit-text-size-adjust:100%;\n  -moz-tab-size:4;\n  tab-size:4;\n  font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n}\n\nbody{\n  margin:0;\n  line-height:inherit;\n}\n\nhr{\n  height:0;\n  color:inherit;\n  border-top-width:1px;\n}\n\nabbr[title]{\n  -webkit-text-decoration:underline dotted;\n          text-decoration:underline dotted;\n}\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6{\n  font-size:inherit;\n  font-weight:inherit;\n}\n\na{\n  color:inherit;\n  text-decoration:inherit;\n}\n\nb,\nstrong{\n  font-weight:bolder;\n}\n\ncode,\nkbd,\nsamp,\npre{\n  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  font-size:1em;\n}\n\nsmall{\n  font-size:80%;\n}\n\nsub,\nsup{\n  font-size:75%;\n  line-height:0;\n  position:relative;\n  vertical-align:baseline;\n}\n\nsub{\n  bottom:-0.25em;\n}\n\nsup{\n  top:-0.5em;\n}\n\ntable{\n  text-indent:0;\n  border-color:inherit;\n  border-collapse:collapse;\n}\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea{\n  font-family:inherit;\n  font-size:100%;\n  line-height:inherit;\n  color:inherit;\n  margin:0;\n  padding:0;\n}\n\nbutton,\nselect{\n  text-transform:none;\n}\n\nbutton,\n[type=\'button\'],\n[type=\'reset\'],\n[type=\'submit\']{\n  -webkit-appearance:button;\n  background-color:transparent;\n  background-image:none;\n}\n\n:-moz-focusring{\n  outline:auto;\n}\n\n:-moz-ui-invalid{\n  box-shadow:none;\n}\n\nprogress{\n  vertical-align:baseline;\n}\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button{\n  height:auto;\n}\n\n[type=\'search\']{\n  -webkit-appearance:textfield;\n  outline-offset:-2px;\n}\n\n::-webkit-search-decoration{\n  -webkit-appearance:none;\n}\n\n::-webkit-file-upload-button{\n  -webkit-appearance:button;\n  font:inherit;\n}\n\nsummary{\n  display:list-item;\n}\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre{\n  margin:0;\n}\n\nfieldset{\n  margin:0;\n  padding:0;\n}\n\nlegend{\n  padding:0;\n}\n\nol,\nul,\nmenu{\n  list-style:none;\n  margin:0;\n  padding:0;\n}\n\ntextarea{\n  resize:vertical;\n}\n\ninput::placeholder,\ntextarea::placeholder{\n  opacity:1;\n  color:#9ca3af;\n}\n\nbutton,\n[role="button"]{\n  cursor:pointer;\n}\n:disabled{\n  cursor:default;\n}\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject{\n  display:block;\n  vertical-align:middle;\n}\n\nimg,\nvideo{\n  max-width:100%;\n  height:auto;\n}\n\n[hidden]{\n  display:none;\n}\n\n*, ::before, ::after{\n  --tw-translate-x:0;\n  --tw-translate-y:0;\n  --tw-rotate:0;\n  --tw-skew-x:0;\n  --tw-skew-y:0;\n  --tw-scale-x:1;\n  --tw-scale-y:1;\n  --tw-transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n  --tw-border-opacity:1;\n  border-color:rgb(229 231 235 / var(--tw-border-opacity));\n  --tw-ring-offset-shadow:0 0 #0000;\n  --tw-ring-shadow:0 0 #0000;\n  --tw-shadow:0 0 #0000;\n  --tw-shadow-colored:0 0 #0000;\n  --tw-blur:var(--tw-empty,/*!*/ /*!*/);\n  --tw-brightness:var(--tw-empty,/*!*/ /*!*/);\n  --tw-contrast:var(--tw-empty,/*!*/ /*!*/);\n  --tw-grayscale:var(--tw-empty,/*!*/ /*!*/);\n  --tw-hue-rotate:var(--tw-empty,/*!*/ /*!*/);\n  --tw-invert:var(--tw-empty,/*!*/ /*!*/);\n  --tw-saturate:var(--tw-empty,/*!*/ /*!*/);\n  --tw-sepia:var(--tw-empty,/*!*/ /*!*/);\n  --tw-drop-shadow:var(--tw-empty,/*!*/ /*!*/);\n  --tw-filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.container{\n  width:100%;\n}\n\n@media (min-width: 505px){\n\n  .container{\n    max-width:505px;\n  }\n}\n\n@media (min-width: 506px){\n\n  .container{\n    max-width:506px;\n  }\n}\n\n@media (min-width: 640px){\n\n  .container{\n    max-width:640px;\n  }\n}\n\n@media (min-width: 768px){\n\n  .container{\n    max-width:768px;\n  }\n}\n\n@media (min-width: 1024px){\n\n  .container{\n    max-width:1024px;\n  }\n}\n\n@media (min-width: 1280px){\n\n  .container{\n    max-width:1280px;\n  }\n}\n\n@media (min-width: 1536px){\n\n  .container{\n    max-width:1536px;\n  }\n}\n\n.theme-light{\n    --bg-primary:#fff;\n    --bg-secondary:#f2f2f2;\n    --border-secondary:#e5e5e5;\n    --bg-tertiary:#e5e5e5;\n    --btn-primary:#4a5568;\n    --btn-secondary:#718096;\n    --btn-checked:#9b2c2c;\n    --btn-text:#e2e8f0;\n    --input-bg:#fff;\n    --text-primary:#444444;\n    --text-secondary:#b6b6b6;\n}\n\n.theme-dark{\n    --bg-primary:#1a202c;\n    --bg-secondary:#2d3748;\n    --border-secondary:#4a5568;\n    --bg-tertiary:#4a5568;\n    --btn-primary:#4a5568;\n    --btn-secondary:#718096;\n    --btn-checked:#9b2c2c;\n    --btn-text:#e2e8f0;\n    --input-bg:#4a5568;\n    --text-primary:#e2e8f0;\n    --text-secondary:#a0aec0;\n}\n\nbody{\n    --border-radius:8px;\n    --border-style:solid;\n    --border-width:1px;\n}\n\n.absolute-center{\n    position:absolute;\n    left:50%;\n    top:50%;\n    transform:translate(-50%, -50%);\n}\n\n.h-half{\n    height:50%;\n}\n\n.top-25{\n    top:25%;\n}\n\n.-top-1{\n    top:-0.25rem;\n}\n\n.mirror{\n    transform:scaleX(-1);\n}\n\n.outline-remove{\n    outline:none;\n}\n\n.flex-center{\n    display:flex;\n    justify-content:center;\n    align-items:center;\n}\n\n.min-w-8{\n    min-width:2rem;\n}\n\n.max-w-90vw{\n    max-width:90vw;\n}\n\n.pointer-events-none{\n  pointer-events:none;\n}\n\n.pointer-events-auto{\n  pointer-events:auto;\n}\n\n.visible{\n  visibility:visible;\n}\n\n.static{\n  position:static;\n}\n\n.fixed{\n  position:fixed;\n}\n\n.absolute{\n  position:absolute;\n}\n\n.relative{\n  position:relative;\n}\n\n.sticky{\n  position:sticky;\n}\n\n.inset-0{\n  top:0px;\n  right:0px;\n  bottom:0px;\n  left:0px;\n}\n\n.inset-x-0{\n  left:0px;\n  right:0px;\n}\n\n.inset-y-0{\n  top:0px;\n  bottom:0px;\n}\n\n.bottom-2{\n  bottom:0.5rem;\n}\n\n.left-2{\n  left:0.5rem;\n}\n\n.bottom-0{\n  bottom:0px;\n}\n\n.top-full{\n  top:100%;\n}\n\n.top-0{\n  top:0px;\n}\n\n.left-full{\n  left:100%;\n}\n\n.top-2\\/4{\n  top:50%;\n}\n\n.right-full{\n  right:100%;\n}\n\n.bottom-full{\n  bottom:100%;\n}\n\n.left-2\\/4{\n  left:50%;\n}\n\n.top-2{\n  top:0.5rem;\n}\n\n.left-24{\n  left:6rem;\n}\n\n.left-0{\n  left:0px;\n}\n\n.right-0{\n  right:0px;\n}\n\n.z-100{\n  z-index:100;\n}\n\n.z-50{\n  z-index:50;\n}\n\n.m-2{\n  margin:0.5rem;\n}\n\n.m-1{\n  margin:0.25rem;\n}\n\n.m-auto{\n  margin:auto;\n}\n\n.my-4{\n  margin-top:1rem;\n  margin-bottom:1rem;\n}\n\n.mx-auto{\n  margin-left:auto;\n  margin-right:auto;\n}\n\n.my-2{\n  margin-top:0.5rem;\n  margin-bottom:0.5rem;\n}\n\n.mb-9{\n  margin-bottom:2.25rem;\n}\n\n.ml-2{\n  margin-left:0.5rem;\n}\n\n.mb-4{\n  margin-bottom:1rem;\n}\n\n.mr-2{\n  margin-right:0.5rem;\n}\n\n.mb-3{\n  margin-bottom:0.75rem;\n}\n\n.mb-6{\n  margin-bottom:1.5rem;\n}\n\n.mr-3{\n  margin-right:0.75rem;\n}\n\n.ml-3{\n  margin-left:0.75rem;\n}\n\n.ml-auto{\n  margin-left:auto;\n}\n\n.block{\n  display:block;\n}\n\n.inline-block{\n  display:inline-block;\n}\n\n.inline{\n  display:inline;\n}\n\n.flex{\n  display:flex;\n}\n\n.inline-flex{\n  display:inline-flex;\n}\n\n.table{\n  display:table;\n}\n\n.grid{\n  display:grid;\n}\n\n.inline-grid{\n  display:inline-grid;\n}\n\n.contents{\n  display:contents;\n}\n\n.hidden{\n  display:none;\n}\n\n.h-full{\n  height:100%;\n}\n\n.h-12{\n  height:3rem;\n}\n\n.h-1{\n  height:0.25rem;\n}\n\n.h-7{\n  height:1.6rem;\n}\n\n.h-8{\n  height:2rem;\n}\n\n.h-4{\n  height:1rem;\n}\n\n.h-0{\n  height:0px;\n}\n\n.w-full{\n  width:100%;\n}\n\n.w-24{\n  width:6rem;\n}\n\n.w-4\\/5{\n  width:80%;\n}\n\n.w-10{\n  width:2.5rem;\n}\n\n.w-7{\n  width:1.6rem;\n}\n\n.w-max{\n  width:max-content;\n}\n\n.w-20{\n  width:5rem;\n}\n\n.w-8{\n  width:2rem;\n}\n\n.w-min{\n  width:min-content;\n}\n\n.w-12{\n  width:3rem;\n}\n\n.w-4{\n  width:1rem;\n}\n\n.w-96{\n  width:24rem;\n}\n\n.max-w-full{\n  max-width:100%;\n}\n\n.max-w-7xl{\n  max-width:80rem;\n}\n\n.shrink-0{\n  flex-shrink:0;\n}\n\n.shrink{\n  flex-shrink:1;\n}\n\n.flex-grow{\n  flex-grow:1;\n}\n\n.grow{\n  flex-grow:1;\n}\n\n.-translate-y-1\\/2{\n  --tw-translate-y:-50%;\n  transform:var(--tw-transform);\n}\n\n.-translate-x-1\\/2{\n  --tw-translate-x:-50%;\n  transform:var(--tw-transform);\n}\n\n.scale-75{\n  --tw-scale-x:.75;\n  --tw-scale-y:.75;\n  transform:var(--tw-transform);\n}\n\n.transform{\n  transform:var(--tw-transform);\n}\n\n.cursor-not-allowed{\n  cursor:not-allowed;\n}\n\n.cursor-pointer{\n  cursor:pointer;\n}\n\n.select-none{\n  -webkit-user-select:none;\n          user-select:none;\n}\n\n.resize-none{\n  resize:none;\n}\n\n.resize{\n  resize:both;\n}\n\n.appearance-none{\n  -webkit-appearance:none;\n          appearance:none;\n}\n\n.grid-cols-1{\n  grid-template-columns:repeat(1, minmax(0, 1fr));\n}\n\n.grid-cols-2{\n  grid-template-columns:repeat(2, minmax(0, 1fr));\n}\n\n.grid-cols-3{\n  grid-template-columns:repeat(3, minmax(0, 1fr));\n}\n\n.grid-cols-4{\n  grid-template-columns:repeat(4, minmax(0, 1fr));\n}\n\n.grid-cols-5{\n  grid-template-columns:repeat(5, minmax(0, 1fr));\n}\n\n.grid-cols-6{\n  grid-template-columns:repeat(6, minmax(0, 1fr));\n}\n\n.grid-cols-7{\n  grid-template-columns:repeat(7, minmax(0, 1fr));\n}\n\n.grid-cols-8{\n  grid-template-columns:repeat(8, minmax(0, 1fr));\n}\n\n.grid-cols-9{\n  grid-template-columns:repeat(9, minmax(0, 1fr));\n}\n\n.grid-cols-10{\n  grid-template-columns:repeat(10, minmax(0, 1fr));\n}\n\n.grid-cols-11{\n  grid-template-columns:repeat(11, minmax(0, 1fr));\n}\n\n.grid-cols-12{\n  grid-template-columns:repeat(12, minmax(0, 1fr));\n}\n\n.grid-cols-none{\n  grid-template-columns:none;\n}\n\n.flex-col{\n  flex-direction:column;\n}\n\n.flex-col-reverse{\n  flex-direction:column-reverse;\n}\n\n.items-end{\n  align-items:flex-end;\n}\n\n.items-center{\n  align-items:center;\n}\n\n.justify-center{\n  justify-content:center;\n}\n\n.justify-between{\n  justify-content:space-between;\n}\n\n.justify-items-center{\n  justify-items:center;\n}\n\n.gap-2{\n  gap:0.5rem;\n}\n\n.gap-4{\n  gap:1rem;\n}\n\n.self-end{\n  align-self:flex-end;\n}\n\n.justify-self-start{\n  justify-self:start;\n}\n\n.justify-self-end{\n  justify-self:end;\n}\n\n.overflow-auto{\n  overflow:auto;\n}\n\n.overflow-hidden{\n  overflow:hidden;\n}\n\n.overflow-y-auto{\n  overflow-y:auto;\n}\n\n.truncate{\n  overflow:hidden;\n  text-overflow:ellipsis;\n  white-space:nowrap;\n}\n\n.whitespace-nowrap{\n  white-space:nowrap;\n}\n\n.break-words{\n  overflow-wrap:break-word;\n}\n\n.rounded-none{\n  border-radius:0px;\n}\n\n.rounded-sm{\n  border-radius:0.125rem;\n}\n\n.rounded{\n  border-radius:0.25rem;\n}\n\n.rounded-md{\n  border-radius:0.375rem;\n}\n\n.rounded-lg{\n  border-radius:0.5rem;\n}\n\n.rounded-xl{\n  border-radius:0.75rem;\n}\n\n.rounded-2xl{\n  border-radius:1rem;\n}\n\n.rounded-3xl{\n  border-radius:1.5rem;\n}\n\n.rounded-full{\n  border-radius:9999px;\n}\n\n.border{\n  border-width:1px;\n}\n\n.border-b{\n  border-bottom-width:1px;\n}\n\n.bg-emerald-700{\n  --tw-bg-opacity:1;\n  background-color:rgb(4 120 87 / var(--tw-bg-opacity));\n}\n\n.bg-black{\n  --tw-bg-opacity:1;\n  background-color:rgb(0 0 0 / var(--tw-bg-opacity));\n}\n\n.fill-current{\n  fill:currentColor;\n}\n\n.object-cover{\n  object-fit:cover;\n}\n\n.p-4{\n  padding:1rem;\n}\n\n.p-2{\n  padding:0.5rem;\n}\n\n.p-3{\n  padding:0.75rem;\n}\n\n.p-1{\n  padding:0.25rem;\n}\n\n.px-2{\n  padding-left:0.5rem;\n  padding-right:0.5rem;\n}\n\n.pt-2{\n  padding-top:0.5rem;\n}\n\n.pb-2{\n  padding-bottom:0.5rem;\n}\n\n.text-left{\n  text-align:left;\n}\n\n.text-center{\n  text-align:center;\n}\n\n.text-right{\n  text-align:right;\n}\n\n.align-middle{\n  vertical-align:middle;\n}\n\n.font-sans{\n  font-family:ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n}\n\n.text-xl{\n  font-size:1.25rem;\n  line-height:1.75rem;\n}\n\n.text-sm{\n  font-size:0.875rem;\n  line-height:1.25rem;\n}\n\n.font-bold{\n  font-weight:700;\n}\n\n.italic{\n  font-style:italic;\n}\n\n.leading-6{\n  line-height:1.5rem;\n}\n\n.underline{\n  text-decoration:underline;\n}\n\n.opacity-25{\n  opacity:0.25;\n}\n\n.shadow-md{\n  --tw-shadow:0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored:0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);\n  box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n\n.outline{\n  outline-style:solid;\n}\n\n.blur{\n  --tw-blur:blur(8px);\n  filter:var(--tw-filter);\n}\n\n.filter{\n  filter:var(--tw-filter);\n}\n\n.transition{\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property:background-color, border-color, color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration:150ms;\n}\n\n.ease-in-out{\n  transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.focus\\:outline-none:focus{\n  outline:2px solid transparent;\n  outline-offset:2px;\n}\n')]}static get is(){return`${BaseElement.prefix}-${this.name.match(/[A-Z][a-z]+/g).map((t=>t.toLowerCase())).join("-")}`}connectedCallback(){super.connectedCallback(),this.dispatchEvent(new Event("connected"))}disconnectedCallback(){super.disconnectedCallback(),this.dispatchEvent(new Event("disconnected"))}}class BaseRoom extends BaseElement{static get properties(){return{broker:{attribute:!1},stream:{attribute:!1},participants:{attribute:!1}}}constructor(){super(),this.eventContext=new EventContext,this.state={},this.broker=void 0,this.stream=void 0,this.remoteStreams=new Map,this.participants=[],this.connectionState=BaseRoom.ConnectionState.DISCONNECTED}set state(t){const{state:n}=this;this.__state={...n,...t},this.dispatchEvent(new CustomEvent("statechange",{detail:{currentState:t,previousState:n}})),this.requestUpdate("state",n)}get state(){return this.__state}_registerBroker(){Object.assign(this.broker.state,this.state),this.eventContext.register(this.broker,"connect",(()=>{this.connectionState=BaseRoom.ConnectionState.CONNECTED,this.dispatchEvent(new Event("connect"))})),this.eventContext.register(this.broker,"disconnect",(()=>{this.connectionState=BaseRoom.ConnectionState.DISCONNECTED,this.dispatchEvent(new Event("disconnect"))})),this.eventContext.register(this.broker,"error",(({detail:t})=>{this.connectionState=BaseRoom.ConnectionState.CONNECTING,this.dispatchEvent(new CustomEvent("error",{detail:t}))})),this.eventContext.register(this.broker,"join",(({detail:t})=>{this._onParticipantJoin(t)})),this.eventContext.register(this.broker,"leave",(({detail:t})=>{this._onParticipantLeave(t)})),this.broker.connect()}_onParticipantJoin(t){this.shouldAllowParticipant(t)&&(this.participants=[...this.participants,t],this._registerParticipantEventHandler(t),this.onParticipantJoin(t))}_onParticipantLeave(t){this.participants=this.participants.filter((n=>n!==t)),this.onParticipantLeave(t)}_registerParticipantEventHandler(t){t.addEventListener("addstream",(({detail:n})=>{this.onAddStream(n,t)})),t.addEventListener("removestream",(({detail:n})=>{this.onRemoveStream(n,t)})),t.addEventListener("error",(({detail:t})=>{this.dispatchEvent(new CustomEvent("error",{detail:t}))})),t.addEventListener("statechange",(({detail:n})=>{this.onParticipantStateChange(t.state,n.previousState,t)})),t.addEventListener("message",(({origin:n,data:r})=>{this.onTransmission(r,n,t)}))}connect(){this.connectionState===BaseRoom.ConnectionState.DISCONNECTED&&(this.connectionState=BaseRoom.ConnectionState.CONNECTING,this._registerBroker())}disconnect(){this.connectionState!==BaseRoom.ConnectionState.CONNECTING&&this.connectionState!==BaseRoom.ConnectionState.CONNECTED||this.broker.disconnect()}setState(t,n,r={reflect:!0}){if(this.state="object"==typeof t?{...this.state,...t}:{...this.state,[t]:n},this.broker&&(n?.reflect??r.reflect)){const r="object"==typeof t?t:{[t]:n};Object.entries(r).forEach((([t,n])=>{Reflect.set(this.broker.state,t,n)}))}}getParticipantById(t){return this.participants.find((n=>n.id===t))}shouldAllowParticipant(t){return!0}onParticipantJoin(t){this.dispatchEvent(new CustomEvent("participantjoin",{detail:t}))}onParticipantLeave(t){for(const n of this.remoteStreams.entries())n[1]===t&&this.remoteStreams.delete(n[0]);this.requestUpdate("remoteStreams"),this.dispatchEvent(new CustomEvent("participantleave",{detail:t}))}onParticipantStateChange(t,n,r){this.dispatchEvent(new CustomEvent("participantstatechange",{detail:r})),this.requestUpdate()}onStateChange(t,n){}onAddStream(t,n){this.remoteStreams.set(t,n),this.requestUpdate("remoteStreams")}onRemoveStream(t){this.remoteStreams.delete(t),this.requestUpdate("remoteStreams")}async onTransmission(t,n,r){const o=await t.complete;void 0===o?this.onMessage(t.result,n,r):this.dispatchEvent(new CustomEvent("error",{detail:o}))}async onMessage(t,n,r){this.dispatchEvent(new CustomEvent("message",{detail:{message:t,channel:n,participant:r}}))}broadcast(t,n){return this.broker?.broadcast(t,n)}disconnectedCallback(){super.disconnectedCallback(),this.disconnect()}}BaseRoom.ConnectionState={CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected"};const Dt=globalThis.trustedTypes,Rt=Dt?Dt.createPolicy("lit-html",{createHTML:t=>t}):void 0,Nt=`lit$${(Math.random()+"").slice(9)}$`,Lt="?"+Nt,Mt=`<${Lt}>`,It=document,Pt=(t="")=>It.createComment(t),Bt=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Ut=Array.isArray,Ft=t=>{var n;return Ut(t)||"function"==typeof(null===(n=t)||void 0===n?void 0:n[Symbol.iterator])},zt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Vt=/-->/g,Ht=/>/g,jt=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,qt=/'/g,Gt=/"/g,Wt=/^(?:script|style|textarea)$/i,Yt=Symbol.for("lit-noChange"),Jt=Symbol.for("lit-nothing"),Kt=new WeakMap,Qt=It.createTreeWalker(It,129,null,!1),Zt=(t,n)=>{const r=t.length-1,o=[];let l,h=2===n?"<svg>":"",g=zt;for(let n=0;n<r;n++){const r=t[n];let v,f,b=-1,_=0;for(;_<r.length&&(g.lastIndex=_,f=g.exec(r),null!==f);)_=g.lastIndex,g===zt?"!--"===f[1]?g=Vt:void 0!==f[1]?g=Ht:void 0!==f[2]?(Wt.test(f[2])&&(l=RegExp("</"+f[2],"g")),g=jt):void 0!==f[3]&&(g=jt):g===jt?">"===f[0]?(g=null!=l?l:zt,b=-1):void 0===f[1]?b=-2:(b=g.lastIndex-f[2].length,v=f[1],g=void 0===f[3]?jt:'"'===f[3]?Gt:qt):g===Gt||g===qt?g=jt:g===Vt||g===Ht?g=zt:(g=jt,l=void 0);const y=g===jt&&t[n+1].startsWith("/>")?" ":"";h+=g===zt?r+Mt:b>=0?(o.push(v),r.slice(0,b)+"$lit$"+r.slice(b)+Nt+y):r+Nt+(-2===b?(o.push(void 0),n):y)}const v=h+(t[r]||"<?>")+(2===n?"</svg>":"");return[void 0!==Rt?Rt.createHTML(v):v,o]};class P{constructor({strings:t,_$litType$:n},r){let o;this.parts=[];let l=0,h=0;const g=t.length-1,v=this.parts,[f,b]=Zt(t,n);if(this.el=P.createElement(f,r),Qt.currentNode=this.el.content,2===n){const t=this.el.content,n=t.firstChild;n.remove(),t.append(...n.childNodes)}for(;null!==(o=Qt.nextNode())&&v.length<g;){if(1===o.nodeType){if(o.hasAttributes()){const t=[];for(const n of o.getAttributeNames())if(n.endsWith("$lit$")||n.startsWith(Nt)){const r=b[h++];if(t.push(n),void 0!==r){const t=o.getAttribute(r.toLowerCase()+"$lit$").split(Nt),n=/([.?@])?(.*)/.exec(r);v.push({type:1,index:l,name:n[2],strings:t,ctor:"."===n[1]?M:"?"===n[1]?H:"@"===n[1]?I:S})}else v.push({type:6,index:l})}for(const n of t)o.removeAttribute(n)}if(Wt.test(o.tagName)){const t=o.textContent.split(Nt),n=t.length-1;if(n>0){o.textContent=Dt?Dt.emptyScript:"";for(let r=0;r<n;r++)o.append(t[r],Pt()),Qt.nextNode(),v.push({type:2,index:++l});o.append(t[n],Pt())}}}else if(8===o.nodeType)if(o.data===Lt)v.push({type:2,index:l});else{let t=-1;for(;-1!==(t=o.data.indexOf(Nt,t+1));)v.push({type:7,index:l}),t+=Nt.length-1}l++}}static createElement(t,n){const r=It.createElement("template");return r.innerHTML=t,r}}function Xt(t,n,r=t,o){var l,h,g,v;if(n===Yt)return n;let f=void 0!==o?null===(l=r._$Cl)||void 0===l?void 0:l[o]:r._$Cu;const b=Bt(n)?void 0:n._$litDirective$;return(null==f?void 0:f.constructor)!==b&&(null===(h=null==f?void 0:f._$AO)||void 0===h||h.call(f,!1),void 0===b?f=void 0:(f=new b(t),f._$AT(t,r,o)),void 0!==o?(null!==(g=(v=r)._$Cl)&&void 0!==g?g:v._$Cl=[])[o]=f:r._$Cu=f),void 0!==f&&(n=Xt(t,f._$AS(t,n.values),f,o)),n}class E{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n;const{el:{content:r},parts:o}=this._$AD,l=(null!==(n=null==t?void 0:t.creationScope)&&void 0!==n?n:It).importNode(r,!0);Qt.currentNode=l;let h=Qt.nextNode(),g=0,v=0,f=o[0];for(;void 0!==f;){if(g===f.index){let n;2===f.type?n=new N(h,h.nextSibling,this,t):1===f.type?n=new f.ctor(h,f.name,f.strings,this,t):6===f.type&&(n=new L(h,this,t)),this.v.push(n),f=o[++v]}g!==(null==f?void 0:f.index)&&(h=Qt.nextNode(),g++)}return l}m(t){let n=0;for(const r of this.v)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}}class N{constructor(t,n,r,o){var l;this.type=2,this._$AH=Jt,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=o,this._$Cg=null===(l=null==o?void 0:o.isConnected)||void 0===l||l}get _$AU(){var t,n;return null!==(n=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==n?n:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return void 0!==n&&11===t.nodeType&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=Xt(this,t,n),Bt(t)?t===Jt||null==t||""===t?(this._$AH!==Jt&&this._$AR(),this._$AH=Jt):t!==this._$AH&&t!==Yt&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.S(t):Ft(t)?this.M(t):this.$(t)}A(t,n=this._$AB){return this._$AA.parentNode.insertBefore(t,n)}S(t){this._$AH!==t&&(this._$AR(),this._$AH=this.A(t))}$(t){this._$AH!==Jt&&Bt(this._$AH)?this._$AA.nextSibling.data=t:this.S(It.createTextNode(t)),this._$AH=t}T(t){var n;const{values:r,_$litType$:o}=t,l="number"==typeof o?this._$AC(t):(void 0===o.el&&(o.el=P.createElement(o.h,this.options)),o);if((null===(n=this._$AH)||void 0===n?void 0:n._$AD)===l)this._$AH.m(r);else{const t=new E(l,this),n=t.p(this.options);t.m(r),this.S(n),this._$AH=t}}_$AC(t){let n=Kt.get(t.strings);return void 0===n&&Kt.set(t.strings,n=new P(t)),n}M(t){Ut(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,o=0;for(const l of t)o===n.length?n.push(r=new N(this.A(Pt()),this.A(Pt()),this,this.options)):r=n[o],r._$AI(l),o++;o<n.length&&(this._$AR(r&&r._$AB.nextSibling,o),n.length=o)}_$AR(t=this._$AA.nextSibling,n){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,n);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var n;void 0===this._$AM&&(this._$Cg=t,null===(n=this._$AP)||void 0===n||n.call(this,t))}}class S{constructor(t,n,r,o,l){this.type=1,this._$AH=Jt,this._$AN=void 0,this.element=t,this.name=n,this._$AM=o,this.options=l,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Jt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,r,o){const l=this.strings;let h=!1;if(void 0===l)t=Xt(this,t,n,0),h=!Bt(t)||t!==this._$AH&&t!==Yt,h&&(this._$AH=t);else{const o=t;let g,v;for(t=l[0],g=0;g<l.length-1;g++)v=Xt(this,o[r+g],n,g),v===Yt&&(v=this._$AH[g]),h||(h=!Bt(v)||v!==this._$AH[g]),v===Jt?t=Jt:t!==Jt&&(t+=(null!=v?v:"")+l[g+1]),this._$AH[g]=v}h&&!o&&this.k(t)}k(t){t===Jt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class M extends S{constructor(){super(...arguments),this.type=3}k(t){this.element[this.name]=t===Jt?void 0:t}}const en=Dt?Dt.emptyScript:"";class H extends S{constructor(){super(...arguments),this.type=4}k(t){t&&t!==Jt?this.element.setAttribute(this.name,en):this.element.removeAttribute(this.name)}}class I extends S{constructor(t,n,r,o,l){super(t,n,r,o,l),this.type=5}_$AI(t,n=this){var r;if((t=null!==(r=Xt(this,t,n,0))&&void 0!==r?r:Jt)===Yt)return;const o=this._$AH,l=t===Jt&&o!==Jt||t.capture!==o.capture||t.once!==o.once||t.passive!==o.passive,h=t!==Jt&&(o===Jt||l);l&&this.element.removeEventListener(this.name,this,o),h&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class L{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){Xt(this,t)}}const tn={P:"$lit$",V:Nt,L:Lt,I:1,N:Zt,R:E,D:Ft,j:Xt,H:N,O:S,F:H,B:I,W:M,Z:L},nn=window.litHtmlPolyfillSupport;null==nn||nn(P,N),(null!==(Ot=globalThis.litHtmlVersions)&&void 0!==Ot?Ot:globalThis.litHtmlVersions=[]).push("2.0.2");const{H:sn}=tn,rn=()=>document.createComment(""),an=(t,n,r)=>{var o;const l=t._$AA.parentNode,h=void 0===n?t._$AB:n._$AA;if(void 0===r){const n=l.insertBefore(rn(),h),o=l.insertBefore(rn(),h);r=new sn(n,o,t,t.options)}else{const n=r._$AB.nextSibling,g=r._$AM,v=g!==t;if(v){let n;null===(o=r._$AQ)||void 0===o||o.call(r,t),r._$AM=t,void 0!==r._$AP&&(n=t._$AU)!==g._$AU&&r._$AP(n)}if(n!==h||v){let t=r._$AA;for(;t!==n;){const n=t.nextSibling;l.insertBefore(t,h),t=n}}}return r},on=(t,n,r=t)=>(t._$AI(n,r),t),ln={},cn=t=>{var n;null===(n=t._$AP)||void 0===n||n.call(t,!1,!0);let r=t._$AA;const o=t._$AB.nextSibling;for(;r!==o;){const t=r.nextSibling;r.remove(),r=t}},dn=t=>(...n)=>({_$litDirective$:t,values:n});class i{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,r){this._$Ct=t,this._$AM=n,this._$Ci=r}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}const hn=(t,n)=>{var r,o;const l=t._$AN;if(void 0===l)return!1;for(const t of l)null===(o=(r=t)._$AO)||void 0===o||o.call(r,n,!1),hn(t,n);return!0},pn=t=>{let n,r;do{if(void 0===(n=t._$AM))break;r=n._$AN,r.delete(t),t=n}while(0===(null==r?void 0:r.size))},un=t=>{for(let n;n=t._$AM;t=n){let r=n._$AN;if(void 0===r)n._$AN=r=new Set;else if(r.has(t))break;r.add(t),vn(n)}};function gn(t){void 0!==this._$AN?(pn(this),this._$AM=t,un(this)):this._$AM=t}function mn(t,n=!1,r=0){const o=this._$AH,l=this._$AN;if(void 0!==l&&0!==l.size)if(n)if(Array.isArray(o))for(let t=r;t<o.length;t++)hn(o[t],!1),pn(o[t]);else null!=o&&(hn(o,!1),pn(o));else hn(this,t)}const vn=t=>{var n,r,o,l;2==t.type&&(null!==(n=(o=t)._$AP)&&void 0!==n||(o._$AP=mn),null!==(r=(l=t)._$AQ)&&void 0!==r||(l._$AQ=gn))};class d extends i{constructor(){super(...arguments),this._$AN=void 0}_$AT(t,n,r){super._$AT(t,n,r),un(this),this.isConnected=t._$AU}_$AO(t,n=!0){var r,o;t!==this.isConnected&&(this.isConnected=t,t?null===(r=this.reconnected)||void 0===r||r.call(this):null===(o=this.disconnected)||void 0===o||o.call(this)),n&&(hn(this,t),pn(this))}setValue(t){if((t=>void 0===this._$Ct.strings)())this._$Ct._$AI(t,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=t,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}}const fn=()=>new o$2;class o$2{}const bn=new WeakMap,_n=dn(class extends d{render(t){return Jt}update(t,[n]){var r;const o=n!==this.U;return o&&void 0!==this.U&&this.nt(void 0),(o||this.rt!==this.lt)&&(this.U=n,this.ht=null===(r=t.options)||void 0===r?void 0:r.host,this.nt(this.lt=t.element)),Jt}nt(t){"function"==typeof this.U?(void 0!==bn.get(this.U)&&this.U.call(this.ht,void 0),bn.set(this.U,t),void 0!==t&&this.U.call(this.ht,t)):this.U.value=t}get rt(){var t;return"function"==typeof this.U?bn.get(this.U):null===(t=this.U)||void 0===t?void 0:t.value}disconnected(){this.rt===this.lt&&this.nt(void 0)}reconnected(){this.nt(this.lt)}}),yn=dn(class extends i{constructor(t){var n;if(super(t),1!==t.type||"class"!==t.name||(null===(n=t.strings)||void 0===n?void 0:n.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((n=>t[n])).join(" ")+" "}update(t,[n]){var r,o;if(void 0===this.st){this.st=new Set,void 0!==t.strings&&(this.et=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in n)n[t]&&!(null===(r=this.et)||void 0===r?void 0:r.has(t))&&this.st.add(t);return this.render(n)}const l=t.element.classList;this.st.forEach((t=>{t in n||(l.remove(t),this.st.delete(t))}));for(const t in n){const r=!!n[t];r===this.st.has(t)||(null===(o=this.et)||void 0===o?void 0:o.has(t))||(r?(l.add(t),this.st.add(t)):(l.remove(t),this.st.delete(t)))}return Yt}});class Badge extends BaseElement{static properties={label:{type:String},position:{type:String},hidden:{state:!0}};static styles=[...super.styles,Te`:host{position:relative}.badge{font-size:var(--badge-font-size,small);color:var(--badge-text,var(--text-primary));background-color:var(--badge-bg,var(--bg-primary));border-radius:var(--badge-border-radius,var(--border-radius));padding-left:var(--badge-padding-x,4px);padding-right:var(--badge-padding-x,4px);padding-top:var(--badge-padding-y);padding-bottom:var(--badge-padding-y);height:var(--badge-height);border-width:var(--badge-border-width);border-style:var(--badge-border-style);border-color:var(--badge-border-color)}`];static Position={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right"};position=Badge.Position.TOP_LEFT;#n=fn();#i(){this.hidden="string"!=typeof this.label||0===this.label.trim().length}#s(){const t=this.#n.value,n="var(--badge-offset, -4px)";switch(this.position){case Badge.Position.TOP_LEFT:t.style.setProperty("top",n),t.style.setProperty("left",n);break;case Badge.Position.TOP_RIGHT:t.style.setProperty("top",n),t.style.setProperty("right",n);break;case Badge.Position.BOTTOM_LEFT:t.style.setProperty("bottom",n),t.style.setProperty("left",n);break;case Badge.Position.BOTTOM_RIGHT:t.style.setProperty("bottom",n),t.style.setProperty("right",n)}}firstUpdated(){this.#i(),this.#s()}updated(t){t.has("label")&&this.#i(),t.has("position")&&this.#s()}render(){return et`<div ${_n(this.#n)} class="badge flex items-center justify-center absolute z-100 ${yn({hidden:this.hidden})}">${this.label}</div><slot></slot>`}}class Button extends BaseElement{static properties={...super.properties,appearance:{type:String,reflect:!0},hasIcon:{state:!0}};static styles=[...super.styles,Te`:host{display:inline-block;cursor:pointer;text-align:center}:host([hidden]){display:none}.round-button{background-color:var(--btn-primary);border-radius:var(--btn-border-radius,var(--border-radius));width:var(--round-btn-size,3rem);height:var(--round-btn-size,3rem);border-color:var(--btn-border-color,transparent);border-style:var(--btn-border-style,solid);border-width:var(--btn-border-width,1px)}.icon{fill:var(--btn-icon,var(--btn-text))}.round-button-label-slot{color:var(--btn-label-text,var(--text-primary))}.rectangular-button{background-color:var(--btn-primary);border-radius:var(--border-radius);padding-top:var(--rect-btn-padding-y,10px);padding-bottom:var(--rect-btn-padding-y,10px);padding-left:var(--rect-btn-padding-x,20px);padding-right:var(--rect-btn-padding-x,20px);height:var(--rect-btn-height);border-color:var(--btn-border-color,transparent);border-style:var(--btn-border-style,solid);border-width:var(--btn-border-width,1px)}.rectangular-button-label-slot{color:var(--btn-text)}.rectangular-button-icon-wrapper{width:1rem;margin-right:var(--rect-btn-icon-right-margin,10px)}.rectangular-button-icon-wrapper svg{transform:scale(1.3,1.3)}`];static Appearance={ROUND:"round",RECTANGULAR:"rectangular"};get templates(){return{icons:()=>et`<slot ${_n(this.iconSlot)} name="icon" class="icon flex"></slot>`,round:()=>et`<div class="button round-button m-auto flex justify-center items-center">${this.templates.icons()}</div><slot data-test="label-slot" class="round-button-label-slot text-sm select-none"></slot>`,rectangular:()=>et`<div class="button rectangular-button flex-center select-none"><div class="flex-center ${this.hasIcon?"rectangular-button-icon-wrapper":"hidden"}">${this.templates.icons()}</div><button class="focus:outline-none flex-center"><slot data-test="label-slot" class="rectangular-button-label-slot"></slot></button></div>`}}constructor(){super(),this.appearance=Button.Appearance.ROUND,this.context=new EventContext,this.iconSlot=fn(),this.hasIcon=!1}firstUpdated(){const t=this.iconSlot.value;t instanceof HTMLSlotElement&&this.context.register(t,"slotchange",(t=>{this.hasIcon=t.target.assignedNodes().length>0}))}disconnectedCallback(){super.disconnectedCallback(),this.context.close()}render(){switch(this.appearance){case Button.Appearance.ROUND:return this.templates.round();case Button.Appearance.RECTANGULAR:return this.templates.rectangular();default:return nt}}}class ToggleButton extends Button{static properties={...super.properties,checked:{type:Boolean,reflect:!0},hasAltIcon:{state:!0}};static styles=[...super.styles,Te`:host([checked]) .button{background-color:var(--btn-checked)}`];get templates(){return{...super.templates,icons:()=>et`<slot ${_n(this.iconSlot)} name="icon" class="icon flex ${yn({hidden:this.hasAltIcon&&this.checked})}"></slot><slot ${_n(this.altIconSlot)} name="altIcon" class="icon flex ${yn({hidden:!this.checked})}"></slot>`}}constructor(){super(),this.checked=!1,this.altIconSlot=fn(),this.hasAltIcon=!1}connectedCallback(){super.connectedCallback(),this.context.register(this,"click",(t=>{t.defaultPrevented||(this.checked=!this.checked)}))}firstUpdated(){super.firstUpdated();const t=this.altIconSlot.value;t instanceof HTMLSlotElement&&this.context.register(t,"slotchange",(t=>{this.hasAltIcon=t.target.assignedNodes().length>0}))}}const wn=t=>et`<svg slot="${t}" width="19" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M256 96c0-35.3 28.7-64 64-64s64 28.7 64 64v149.3l30.7 24.1c.6-4.4 1.3-8.8 1.3-13.4V96c0-53-43-96-96-96s-96 43-96 96v23.3l32 25.2zm224 160v-56c0-4.4-3.6-8-8-8h-16c-4.4 0-8 3.6-8 8v56c0 12.3-2.3 24-5.6 35.3l27 21.3C476.2 295 480 276 480 256zm-72 224h-72v-65c27.2-2.7 52.1-12.7 73.6-27.3l-26.4-20.8c-21 12-45.6 18.6-71.9 16.8-68-4.5-119.3-64.1-119.3-132.2v-35.2l-28.5-22.5c-2 1.5-3.5 3.5-3.5 6.1v50.3c0 83.4 61.7 156.1 144 164.4V480h-72c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h176c4.4 0 8-3.6 8-8v-16c0-4.4-3.6-8-8-8zm-88-128c12.6 0 24.5-2.6 35.5-7l-32.2-25.4c-1.1.1-2.1.3-3.3.3-31.3 0-57.3-22.6-62.8-52.4l-33.2-26V256c0 53 43 96 96 96zm317 133.2L23 1.8C19.6-1 14.5-.5 11.8 3l-10 12.5C-1 19-.4 24 3 26.7l614 483.5c3.4 2.8 8.5 2.2 11.2-1.2l10-12.5c2.8-3.5 2.3-8.5-1.2-11.3z"></path></svg>`,En=et`<svg width="30" height="30" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"/></svg>`;class MicrophoneButton extends ToggleButton{static properties={...super.properties,stream:{attribute:!1}};static styles=[...super.styles,Te`.border-radius{border-radius:var(--btn-border-radius,var(--border-radius))}`];#r=0;#a=void 0;get templates(){return{...super.templates,icons:()=>et`<span class="icon flex ${yn({hidden:this.checked})}">${"icon",et`<svg slot="${"icon"}" width="10" height="23" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M160 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S64 42.98 64 96v160c0 53.02 42.98 96 96 96zM96 96c0-35.29 28.71-64 64-64s64 28.71 64 64v160c0 35.29-28.71 64-64 64s-64-28.71-64-64V96zm216 96h-16c-4.42 0-8 3.58-8 8v56c0 73.46-62.2 132.68-136.73 127.71C83.3 379.18 32 319.61 32 251.49V200c0-4.42-3.58-8-8-8H8c-4.42 0-8 3.58-8 8v50.34c0 83.39 61.65 156.12 144 164.43V480H72c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h176c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8h-72v-65.01C256.71 406.9 320 338.8 320 256v-56c0-4.42-3.58-8-8-8z"></path></svg>`}</span> <span class="icon flex ${yn({hidden:!this.checked})}">${wn("altIcon")}</span>`,overlay:()=>et`${this.checked?nt:et`<div class="border-radius absolute pointer-events-none opacity-25 w-full h-12" style="background:linear-gradient(to top,#fff ${this.#r}%,transparent ${this.#r}% 100%)"></div>`}`,round:()=>et`<div class="relative">${this.templates.overlay()} ${super.templates.round()}</div>`,rectangular:()=>et`<div class="button rectangular-button flex-center select-none relative">${this.templates.overlay()} ${super.templates.rectangular()}</div>`}}constructor(){super(),this.stream=void 0}#o(){this.#l();try{this.#a=O$1.create(this.stream),this.#a.addEventListener("data",(({detail:t})=>{this.#r=100*t,this.requestUpdate()}))}catch(t){this.dispatchEvent(new CustomEvent("error",{detail:t}))}}#l(){this.#a?.close(),this.#a=void 0}updated(t){t.has("stream")&&(void 0===this.stream?this.#l():this.stream instanceof MediaStream?this.#o():this.dispatchEvent(new CustomEvent("error",{detail:new TypeError('Argument "stream" is of invalid type')})))}disconnectedCallback(){this.#l()}}class RandomizeButton extends Button{static properties={...super.properties,for:{type:String},length:{type:Number}};static alphabet="abcdefghkmnpqrstwxyz23456789";constructor(){super(),this.for=void 0,this.length=5,this.code=void 0}get templates(){return{...super.templates,icons:()=>et`<svg width="23" height="23" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 365.63 367.74" version="1.1"><g transform="translate(-117.15 -272.36)" style="fill:#fff;fill-opacity:1"><path d="m328.73 272.36c-1.0593-0.0232-2.2036 0.23919-3.6546 0.73073l-160.8 47.216c-1.338 0.31267-1.2603 0.67334-0.14622 1.5349l142.74 113.95c2.6283 2.179 3.8646 2.4492 7.5282 1.3156l160.06-55.474c3.6722-1.3494 3.9274-1.6778 0.14636-4.1662l-140.48-102.76c-2.1688-1.5284-3.6434-2.3048-5.4085-2.3387zm-18.345 13.814c3.2021-0.0232 6.5824 0.32827 10.086 1.0963 14.016 3.073 23.956 11.638 22.146 19.076-1.8102 7.4379-14.635 10.967-28.651 7.8935-14.016-3.0731-23.956-11.565-22.146-19.003 1.3576-5.5786 8.9586-9.0156 18.564-9.063zm-90.63 27.555c3.2021-0.0232 6.6554 0.32813 10.159 1.0964 14.016 3.073 23.883 11.565 22.073 19.003-1.8102 7.4381-14.635 11.04-28.651 7.9667-14.016-3.073-23.883-11.638-22.073-19.076 1.3577-5.5786 8.8855-8.9426 18.491-8.99zm137.33 7.0164c3.202-0.0232 6.6555 0.40133 10.159 1.1695 14.016 3.0728 23.883 11.565 22.073 19.003-1.8102 7.438-14.635 10.967-28.651 7.8935-14.016-3.0729-23.883-11.565-22.073-19.003 1.3577-5.5783 8.8855-9.0156 18.492-9.063zm-202.89 8.8438c-0.2935 0.0748-0.38831 0.53334-0.58471 1.4619l-36.252 181.33c-0.42235 1.8862-0.3482 2.3536 1.3887 3.8739l137.7 118.7c3.2029 3.0612 3.8757 3.0218 4.3122-0.73091l40.126-183.89c0.84081-2.5054-0.0249-3.8837-1.4618-5.0432l-143.77-114.81c-0.74001-0.62428-1.1682-0.95149-1.4618-0.87718zm111.83 20.684c3.202-0.0232 6.6554 0.32815 10.159 1.0965 14.016 3.073 23.883 11.565 22.073 19.003-1.8102 7.4381-14.635 10.967-28.651 7.8937-14.016-3.073-23.883-11.565-22.073-19.003 1.3576-5.5787 8.8856-8.9426 18.491-8.9901zm138.8 6.0664c3.202-0.0232 6.6554 0.32815 10.159 1.0963 14.016 3.0731 23.883 11.565 22.073 19.003-1.8102 7.4381-14.635 11.04-28.651 7.9668-14.016-3.0731-23.883-11.638-22.073-19.076 1.3577-5.5783 8.8856-8.9423 18.492-8.9899zm-241.71 6.651c0.54012-0.0537 1.1314-0.0294 1.681 0 6.5957 0.3492 13.738 6.5306 17.907 16.445 5.5583 13.219 3.7052 28.055-4.093 33.109-7.7982 5.0539-18.634-1.5446-24.192-14.764-5.5583-13.219-3.7054-28.055 4.093-33.109 1.4621-0.94771 2.9845-1.5207 4.6046-1.6812zm150.64 23.827c3.202-0.0231 6.6554 0.32816 10.159 1.0965 14.016 3.0728 23.883 11.565 22.073 19.003-1.8103 7.438-14.635 10.967-28.651 7.8936-14.016-3.0731-23.883-11.565-22.073-19.003 1.3576-5.5785 8.8855-8.9425 18.491-8.99zm168.18 5.0431c-0.30728 0.0632-0.73942 0.17087-1.2425 0.36543l-164.38 57.02c-3.348 1.3784-3.2476 1.9411-3.8007 4.4584l-40.053 183.31c-0.13597 2.6988-1.1302 3.9269 2.0465 2.4852l161.97-60.518c3.1428-1.5036 3.7452-1.7677 4.093-4.8238l42.026-180.75c0.34821-1.2733 0.26378-1.7272-0.65777-1.5348zm-26.677 29.747c4.6284 0.0748 8.2604 2.3262 9.8671 6.6512 3.2131 8.6497-2.9745 22.494-13.887 30.916-10.912 8.4224-22.368 8.2114-25.581-0.43849-3.2134-8.6498 2.9744-22.494 13.887-30.917 5.4562-4.2113 11.086-6.2873 15.714-6.2127zm-199.24 15.86c6.6789 0.17076 13.965 6.4487 18.199 16.518 5.5583 13.219 3.7783 28.055-4.0199 33.109s-18.634-1.6175-24.192-14.837c-5.5583-13.219-3.7054-27.982 4.093-33.036 1.4622-0.94772 2.9841-1.5209 4.6046-1.6812 0.43892-0.0453 0.87044-0.0842 1.3156-0.0726zm-58.69 21.196c6.6788 0.17077 13.965 6.4488 18.199 16.518 5.5583 13.219 3.7783 28.055-4.0199 33.109s-18.634-1.6176-24.192-14.837c-5.5583-13.219-3.7052-27.982 4.093-33.036 1.4621-0.94772 2.9841-1.521 4.6045-1.6812 0.43892-0.0453 0.87046-0.0842 1.3157-0.0726zm-57.813 20.976c0.53992-0.0537 1.1313-0.0273 1.6809 0 6.5957 0.3492 13.665 6.6037 17.834 16.518 5.5583 13.219 3.7784 27.982-4.0198 33.036-7.7983 5.054-18.634-1.5446-24.192-14.764-5.5583-13.219-3.7053-28.055 4.093-33.109 1.4622-0.94772 2.9845-1.5208 4.6046-1.6812zm254.06 17.541c4.529 0.1474 8.1393 2.3938 9.7208 6.6512 3.2134 8.6498-3.0476 22.494-13.96 30.916-10.912 8.4224-22.368 8.2115-25.581-0.43849-3.2134-8.6497 3.0476-22.494 13.96-30.916 4.7742-3.6848 9.6414-5.7376 13.887-6.1395 0.68233-0.0653 1.3264-0.0937 1.9734-0.0726zm-164.23 58.691c0.54-0.0537 1.1313-0.0273 1.681 0 6.5956 0.34922 13.738 6.5305 17.907 16.445 5.5583 13.219 3.7053 28.055-4.093 33.109-7.7982 5.054-18.561-1.5446-24.119-14.764-5.5583-13.219-3.7784-28.055 4.0198-33.109 1.4622-0.94739 2.9845-1.5206 4.6046-1.6809zm97.281 19.003c4.6285 0.0748 8.2603 2.2531 9.867 6.578 3.2132 8.6497-2.9744 22.494-13.887 30.916-10.912 8.4224-22.368 8.2844-25.581-0.36546-3.2132-8.6496 2.9744-22.494 13.887-30.917 5.4562-4.2111 11.086-6.287 15.714-6.2123z"/></g></svg>`}}get#c(){return"string"==typeof this.for?this.parentNode.querySelector(`#${this.for}`):void 0}#d(t){t.stopPropagation(),this.code=this.generateCode(),this.#c instanceof HTMLElement&&(this.#c.value=this.code)}connectedCallback(){super.connectedCallback(),this.context.register(this,"click",(t=>this.#d(t)))}generateCode(){let t="";for(let n=0;n<this.length;n+=1){const n=Math.floor(Math.random()*RandomizeButton.alphabet.length);t+=RandomizeButton.alphabet[n]}return t}}class SlideButton extends ToggleButton{static styles=[...super.styles,Te`:host{--slide-btn-text:var(--text-primary);color:var(--slide-btn-text)}input{-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-tap-highlight-color:transparent;cursor:pointer;outline:0;height:22px;width:42px;border-radius:16px;display:inline-block;position:relative;margin:0;border:2px solid var(--slide-btn-text);transition:all .2s ease}input:after{content:'';position:absolute;top:2px;left:2px;width:14px;height:14px;border-radius:50%;background:var(--slide-btn-text);transition:all .2s}input:checked{border-color:var(--slide-btn-checked,#22a907)}input:checked:after{transform:translatex(20px)}.icon{fill:var(--slide-btn-icon,var(--text-primary))}`];render(){return et`<div class="flex items-center h-8 pointer-events-none"><span data-test="icon-wrapper" class="icon flex justify-center items-center w-8 ${yn({hidden:!this.hasIcon})}">${this.templates.icons()}</span> <input type="checkbox" ?checked="${this.checked}"> <span data-test="label" class="ml-2 select-none text-sm"><slot></slot></span></div>`}}class VolumeButton extends ToggleButton{static styles=[...super.styles,Te`input[type=range]{background:0 0;-webkit-appearance:none}input[type=range]::-moz-range-track{height:14px;background:var(--volume-track-color,var(--text-primary));border-radius:20px}input[type=range]::-moz-range-thumb{border:none;height:14px;width:16px;border-radius:20px;background:var(--volume-thumb-color,var(--text-secondary))}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{height:14px;background:var(--volume-track-color,var(--text-primary));border-radius:20px}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;border:none;height:14px;width:18px;border-radius:20px;background:var(--volume-thumb-color,var(--text-secondary))}.rotation-wrapper{position:relative}.rotation-wrapper-bottom{position:relative;padding-top:2.5rem}.element-to-rotate{position:absolute;transform-origin:top left;transform:rotate(-90deg) translate(-5%,-50%)}`];static properties={...super.properties,value:{type:Number,reflect:!0},min:{type:Number,reflect:!0},max:{type:Number,reflect:!0},step:{type:Number,reflect:!0},sliderOrientation:{type:String},_buttonOrientation:{type:String,state:!0}};constructor(){super(),this.max=1,this.min=0,this.step=.01,this.value=this.max,this.sliderOrientation="top",this._previousValue=this.value,this.checked=0===this.value}connectedCallback(){super.connectedCallback(),this.context.register(this,"click",(t=>{t.defaultPrevented||(this._previousValue=0===this.value?this._previousValue:this.value,this.checked?this.value=0:this.value=this._previousValue,this.dispatchEvent(new CustomEvent("volumechange",{detail:this.value})))}))}onChange(t){this.value=t,this._previousValue=0===this.value?this._previousValue:this.value,this.checked=0===this.value}onInput(t){this.value=t,this._previousValue=0===this.value?this._previousValue:this.value,this.value=this.checked?0:this._previousValue,this.dispatchEvent(new CustomEvent("volumechange",{detail:this.value}))}get _sliderOrientationClasses(){switch(this.sliderOrientation){case"top-vertical":case"bottom-vertical":return"element-to-rotate";case"bottom":return"justify-self-end";default:return"justify-self-start"}}get _buttonOrientationClasses(){switch(this.sliderOrientation){case"top-vertical":default:return"pt-2";case"bottom-vertical":case"bottom":return"pb-2"}}get _orientationClasses(){switch(this.sliderOrientation){case"top-vertical":return"";case"bottom-vertical":case"bottom":return"flex-col-reverse";default:return"flex flex-col "}}get _rotationWrapperOuter(){switch(this.sliderOrientation){case"top-vertical":case"bottom-vertical":return"rotation-wrapper-outer";default:return""}}get _rotationWrapper(){switch(this.sliderOrientation){case"top-vertical":return"rotation-wrapper";case"bottom-vertical":return"rotation-wrapper-bottom";default:return""}}render(){return et`<div class="flex flex-col h-full w-min justify-between ${this._orientationClasses}"><div class="${this._rotationWrapper}"><input class="w-12 ${this._sliderOrientationClasses}" type="range" min="${this.min}" max="${this.max}" step="${this.step}" .value="${this.value}" @change="${t=>{t.preventDefault(),this.onChange(t.target.valueAsNumber)}}" @input="${t=>{t.preventDefault(),this.onInput(t.target.valueAsNumber)}}" @click="${t=>t.preventDefault()}"></div><div class="${this._buttonOrientationClasses}">${super.render()}</div></div>`}}class e extends i{constructor(t){if(super(t),this.it=Jt,2!==t.type)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===Jt||null==t)return this.vt=void 0,this.it=t;if(t===Yt)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this.vt;this.it=t;const n=[t];return n.raw=n,this.vt={_$litType$:this.constructor.resultType,strings:n,values:[]}}}e.directiveName="unsafeHTML",e.resultType=1;const Sn=dn(e);class Box extends BaseElement{static get styles(){return[...super.styles,Te`:host{display:block;border-radius:var(--box-border-radius,var(--border-radius));color:var(--box-text,var(--text-primary));background-color:var(--box-bg,var(--bg-secondary));text-align:var(--box-text-align,center);padding:var(--box-padding,1.25rem)}`]}render(){return et`<slot></slot>`}}k$1.initSync({feature:{runAll:!0}});const xn=(t,n,r)=>{const o=new Map;for(let l=n;l<=r;l++)o.set(t[l],l);return o},Cn=dn(class extends i{constructor(t){if(super(t),2!==t.type)throw Error("repeat() can only be used in text expressions")}dt(t,n,r){let o;void 0===r?r=n:void 0!==n&&(o=n);const l=[],h=[];let g=0;for(const n of t)l[g]=o?o(n,g):g,h[g]=r(n,g),g++;return{values:h,keys:l}}render(t,n,r){return this.dt(t,n,r).values}update(t,[n,r,o]){var l;const h=(t=>t._$AH)(t),{values:g,keys:v}=this.dt(n,r,o);if(!Array.isArray(h))return this.ct=v,g;const f=null!==(l=this.ct)&&void 0!==l?l:this.ct=[],b=[];let _,y,w=0,x=h.length-1,C=0,k=g.length-1;for(;w<=x&&C<=k;)if(null===h[w])w++;else if(null===h[x])x--;else if(f[w]===v[C])b[C]=on(h[w],g[C]),w++,C++;else if(f[x]===v[k])b[k]=on(h[x],g[k]),x--,k--;else if(f[w]===v[k])b[k]=on(h[w],g[k]),an(t,b[k+1],h[w]),w++,k--;else if(f[x]===v[C])b[C]=on(h[x],g[C]),an(t,h[w],h[x]),x--,C++;else if(void 0===_&&(_=xn(v,C,k),y=xn(f,w,x)),_.has(f[w]))if(_.has(f[x])){const n=y.get(v[C]),r=void 0!==n?h[n]:null;if(null===r){const n=an(t,h[w]);on(n,g[C]),b[C]=n}else b[C]=on(r,g[C]),an(t,h[w],r),h[n]=null;C++}else cn(h[x]),x--;else cn(h[w]),w++;for(;C<=k;){const n=an(t,b[k+1]);on(n,g[C]),b[C++]=n}for(;w<=x;){const t=h[w++];null!==t&&cn(t)}return this.ct=v,((t,n=ln)=>{t._$AH=n})(t,b),Yt}});class FileTransfer extends BaseElement{static get properties(){return{channel:{type:Object,reflect:!0},participants:{attribute:!1},_participantsMap:{attribute:!1},_transferStatus:{attribute:!1}}}static get dependencies(){return[...super.dependencies,Box,Button]}static get styles(){return[...super.styles,Te`:host{color:var(--text-primary)}button{color:var(--btn-text)}sv-box{width:30rem;max-width:100%}#progress-bar{transition:width 1s}.max-h-50vh{max-height:50vh}.participants-list{background-color:var(--file-transfer-participant-bg,var(--bg-primary))}.button-and-file-label-wrapper{background-color:var(--file-transfer-file-label-bg,var(--bg-primary))}.participant-selected{background-color:var(--file-transfer-participant-selected-bg,var(--bg-tertiary))}.backdrop{background-color:var(--file-transfer-backdrop,rgba(0,0,0,.75))}.btn-bg-color{background-color:var(--btn-primary)}.border-width{border-width:var(--border-width)}.border-color{border-color:var(--border-secondary)}.border-radius{border-radius:var(--border-radius)}`]}constructor(){super(),this.channel="files",this.participants=[],this._componentText={abortTransfer:"Abort transfer",aloneInRoom:"You are the only person connected",close:"Close",deselectEveryone:"Deselect everyone",fileSelected:"file selected",filesSelected:"files selected",noFileSelected:"No file selected",selectEveryone:"Select everyone",selectFiles:"Select files",send:"Send",unknownUsername:"Unknown"},this._fileInput=void 0,this._fileLabel=void 0,this._form=void 0,this._participantsMap=new Map,this._selectedFiles=[],this._selectedParticipants=[],this._transferStatus=FileTransfer.Status.INITIAL}connectedCallback(){super.connectedCallback(),this.participants.forEach((t=>{this._onParticipantJoin(t)}))}firstUpdated(){this._fileLabel=this.shadowRoot.querySelector('[data-js="selected-files-label"]'),this._fileInput=this.shadowRoot.querySelector('input[type="file"]'),this._form=this.shadowRoot.querySelector("form")}updated(t){const n=t.get("participants");if(t.has("participants")&&void 0!==n){const t=((t,n)=>{const r=[];for(const o of n){t.some((t=>t.id===o.id))||r.push(o)}return r})(n,this.participants);t.forEach((t=>{this._onParticipantJoin(t)})),t.length>0&&this.requestUpdate("_participantsMap");const r=((t,n)=>{const r=[];for(const o of t){n.some((t=>t.id===o.id))||r.push(o)}return r})(n,this.participants);r.forEach((t=>{this._onParticipantLeave(t)})),r.length>0&&this.requestUpdate("_participantsMap")}}set componentText(t){"object"!=typeof t||null===t||Array.isArray(t)||(this._componentText={...this._componentText,...t})}_onParticipantJoin(t){t instanceof EventTarget&&t.addEventListener("statechange",(()=>{this._onParticipantStateChange(t)})),this._participantsMap.set(t,{selected:!1,files:[]})}_onParticipantStateChange(t){this._participantsMap.set(t,this._participantsMap.get(t)),this.requestUpdate("_participantsMap")}async _onParticipantLeave(t){let n;for(const r of this._participantsMap.entries())r[0].id===t.id&&(n=r);const{files:r}=n[1];for(const n of r){const r=await n.processPromise;0===r.state&&(this.dispatchEvent(new CustomEvent("participantleave",{detail:t})),r.abort())}this._participantsMap.delete(n[0])}_prepareTransfer(){for(const[t,{selected:n}]of this._participantsMap)n&&this._selectedParticipants.push(t);if(0===this._selectedParticipants.length)return this._transferStatus=FileTransfer.Status.NO_PARTICIPANT_SELECTED,void this.dispatchEvent(new CustomEvent("statuschange",{detail:{status:this._transferStatus}}));0===this._selectedFiles.length&&(this._selectedFiles=Array.from(this._fileInput.files)),0===this._selectedFiles.length&&(this._transferStatus=FileTransfer.Status.NO_FILE_SELECTED,this.dispatchEvent(new CustomEvent("statuschange",{detail:{status:this._transferStatus}})))}_startTransfer(){const t=[];for(const n of this._selectedParticipants)for(const r of this._selectedFiles){const o=n.send(r,this.channel);t.push(o),this._participantsMap.get(n).files=[...this._participantsMap.get(n).files,{name:r.name,processPromise:o,progress:0}]}return Promise.all(t)}async _calculateProgress(){for(const[t]of this._participantsMap){const{files:n}=this._participantsMap.get(t);for(const t of n){const n=await t.processPromise,r=Math.floor(n.bytesWritten/n.size*100);t.progress=r}}}async _abortTransfer(){for(const[t]of this._participantsMap){const{files:n}=this._participantsMap.get(t);for(const t of n)(await t.processPromise).abort()}this._transferStatus=FileTransfer.Status.TRANSFER_ABORTED}async _onSend(){if(this._prepareTransfer(),0!==this._selectedFiles.length&&0!==this._selectedParticipants.length){try{const t=await this._startTransfer();this._transferStatus=FileTransfer.Status.TRANSFER_IN_PROGRESS,this.dispatchEvent(new CustomEvent("statuschange",{detail:{status:this._transferStatus}}));const n=setInterval((()=>{this._calculateProgress(),this.requestUpdate("_participantsMap")}),300),r=[];for(const n of t)r.push(n.complete);await Promise.all(r),clearInterval(n)}catch(t){return this._transferStatus=FileTransfer.Status.TRANSFER_FAILED,this.dispatchEvent(new CustomEvent("statuschange",{detail:{status:this._transferStatus}})),void this._resetState()}if(this._transferStatus===FileTransfer.Status.TRANSFER_ABORTED)return this.dispatchEvent(new CustomEvent("statuschange",{detail:{status:this._transferStatus}})),void this._resetState();this._participantsMap.forEach((t=>{t.files.forEach((t=>{t.progress=100}))})),this.requestUpdate("_participantsMap"),this._transferStatus=FileTransfer.Status.TRANSFER_SUCCEEDED,this.dispatchEvent(new CustomEvent("statuschange",{detail:{status:this._transferStatus}})),this._resetState()}}_toggleParticipant(t,n){this._participantsMap.get(t).selected=!n,this.requestUpdate("_participantsMap")}_toggleEveryone(t){for(const[n]of this._participantsMap)this._participantsMap.get(n).selected=t;this.requestUpdate("_participantsMap")}_resetState(){this._form.reset(),this._transferStatus=FileTransfer.Status.INITIAL,this._fileLabel.innerHTML=this._componentText.noFileSelected,this._selectedFiles=[],this._selectedParticipants=[]}render(){return et`<div data-test="backdrop" class="backdrop fixed inset-0 z-50 flex justify-center items-center select-none" @click="${()=>{this.hidden=!0}}"><sv-box @click="${t=>t.stopPropagation()}">${0===this._participantsMap?.size?et`<p data-test="no-participant-present" class="h-12 flex justify-center items-center border-width border-color border-radius">${this._componentText.aloneInRoom}</p>`:et`<div data-test="participants-list" class="participants-list border-radius mb-4 max-h-50vh overflow-y-auto">${Cn(this._participantsMap.entries(),(([t])=>t.id),(([t,n])=>et`<div class="border-radius ${n.selected?"participant-selected":""}" @click="${()=>{this._transferStatus!==FileTransfer.Status.TRANSFER_IN_PROGRESS&&this._toggleParticipant(t,n.selected)}}"><div class="h-12 relative flex items-center cursor-pointer"><div class="w-10 mr-2 shrink-0"><img data-test="user-image" class="m-1 border-radius" alt="Avatar" src="${t.state.imageUrl??"data:image/svg+xml,%3Csvg width='153' height='152' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' overflow='hidden'%3E%3Cdefs%3E%3CclipPath id='clip0'%3E%3Crect x='273' y='109' width='153' height='152'/%3E%3C/clipPath%3E%3C/defs%3E%3Cg clip-path='url(%23clip0)' transform='translate(-273 -109)'%3E%3Crect x='274' y='109' width='151' height='151' fill='%23D9D9D9'/%3E%3Cpath d='M293.001 239.252C292.84 212.191 318.005 190.14 349.209 190.001 380.413 189.861 405.839 211.686 405.999 238.748 406 238.832 406 238.916 406 239L349.5 239Z' fill='%237C8080' fill-rule='evenodd'/%3E%3Cpath d='M322 156.5C322 140.208 334.312 127 349.5 127 364.688 127 377 140.208 377 156.5 377 172.792 364.688 186 349.5 186 334.312 186 322 172.792 322 156.5Z' fill='%237C8080' fill-rule='evenodd'/%3E%3C/g%3E%3C/svg%3E"}"></div>${t.state.name?et`<p data-test="user-name" class="truncate mr-2">${t.state.name}</p>`:et`<p class="truncate mr-2 italic">${this._componentText.unknownUsername}</p>`}</div>${this._transferStatus===FileTransfer.Status.TRANSFER_IN_PROGRESS?Cn(n.files,(t=>et`<div class="relative"><div id="progress-bar" class="bg-emerald-700 absolute bottom-0 rounded h-1" style="width:${t.progress}"></div><p class="px-2 text-left max-w-full truncate relative">${t.name}</p></div>`)):nt}</div>`))}</div>${this._transferStatus===FileTransfer.Status.TRANSFER_IN_PROGRESS?nt:et`<div class="grid grid-cols-2 gap-4 mb-4"><sv-button data-test="select-everyone-button" appearance="rectangular" @click="${()=>this._toggleEveryone(!0)}">${this._componentText.selectEveryone}</sv-button><sv-button data-test="deselect-everyone-button" appearance="rectangular" @click="${()=>this._toggleEveryone(!1)}">${this._componentText.deselectEveryone}</sv-button></div>`}`}<div class="border-b border-color my-4"></div><form @submit="${t=>t.preventDefault()}"><div class="button-and-file-label-wrapper mb-4 border-radius overflow-hidden text-left"><button data-test="select-file-button" class="btn-bg-color inline-block p-3" @click="${()=>{this._fileInput.click()}}">${this._componentText.selectFiles}</button><p data-js="selected-files-label" class="inline-block p-3">${this._componentText.noFileSelected}</p><input class="hidden" type="file" multiple="multiple" @change="${t=>{this._fileLabel.innerHTML=`${t.target.files.length} ${1===t.target.files.length?this._componentText.fileSelected:this._componentText.filesSelected}`}}"></div><div class="grid gap-4">${this._transferStatus===FileTransfer.Status.TRANSFER_IN_PROGRESS?et`<sv-button data-test="abort-button" appearance="rectangular" @click="${this._abortTransfer}">${this._componentText.abortTransfer}</sv-button>`:et`<sv-button data-test="send-button" appearance="rectangular" @click="${this._onSend}">${this._componentText.send}</sv-button>`}<sv-button data-test="close-button" appearance="rectangular" @click="${()=>{this.hidden=!0}}">${this._componentText.close}</sv-button></div></form></sv-box></div>`}}FileTransfer.Status={INITIAL:"INITIAL",NO_FILE_SELECTED:"NO_FILE_SELECTED",NO_PARTICIPANT_SELECTED:"NO_PARTICIPANT_SELECTED",TRANSFER_ABORTED:"TRANSFER_ABORTED",TRANSFER_FAILED:"TRANSFER_FAILED",TRANSFER_IN_PROGRESS:"TRANSFER_IN_PROGRESS",TRANSFER_SUCCEEDED:"TRANSFER_SUCCEEDED"};const kn=Symbol("Symbol:changeListener");const $n="data:image/svg+xml,%3Csvg width='153' height='152' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' overflow='hidden'%3E%3Cdefs%3E%3CclipPath id='clip0'%3E%3Crect x='273' y='109' width='153' height='152'/%3E%3C/clipPath%3E%3C/defs%3E%3Cg clip-path='url(%23clip0)' transform='translate(-273 -109)'%3E%3Crect x='274' y='109' width='151' height='151' fill='%23D9D9D9'/%3E%3Cpath d='M293.001 239.252C292.84 212.191 318.005 190.14 349.209 190.001 380.413 189.861 405.839 211.686 405.999 238.748 406 238.832 406 238.916 406 239L349.5 239Z' fill='%237C8080' fill-rule='evenodd'/%3E%3Cpath d='M322 156.5C322 140.208 334.312 127 349.5 127 364.688 127 377 140.208 377 156.5 377 172.792 364.688 186 349.5 186 334.312 186 322 172.792 322 156.5Z' fill='%237C8080' fill-rule='evenodd'/%3E%3C/g%3E%3C/svg%3E";class Input extends BaseElement{static get properties(){return{...super.properties,clearOnEnter:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0},fitToContent:{type:Boolean,reflect:!0},maxLength:{type:Number,reflect:!0},noEmptyValue:{type:Boolean,reflect:!0},placeholder:{type:String,reflect:!0},submitOn:{type:String,reflect:!0},tests:{type:Array},value:{type:String},_editMode:{attribute:!1},_errorLabel:{attribute:!1},_errorLabelVisible:{attribute:!1}}}static get styles(){return[...super.styles,Te`:focus{outline:0}:host{display:flex;align-items:center;position:relative;max-width:100%;cursor:text;border-radius:var(--input-border-radius,var(--border-radius));color:var(--input-text-primary,var(--text-primary));background-color:var(--input-bg);text-align:var(--input-text-align,left)}:host([fitToContent]){display:inline-flex}.padding-y{padding-top:var(--input-padding-y,0);padding-bottom:var(--input-padding-y,0)}.padding-x{padding-left:var(--input-padding-x,.5rem);padding-right:var(--input-padding-x,.5rem)}.placeholder-color,input::placeholder{color:var(--input-placeholder-text,var(--text-secondary))}input{text-align:var(--input-text-align,left);border-radius:var(--input-border-radius,var(--border-radius));background-color:var(--input-bg);width:100%}[contenteditable]{-webkit-user-select:text}.error-label{max-width:90vw;color:var(--input-error-label,red)}`]}constructor(){super(),this.clearOnEnter=!1,this.disabled=!1,this.fitToContent=!1,this.maxLength=void 0,this.noEmptyValue=!1,this.placeholder="",this.submitOn=void 0,this.tests=[],this.value="",this._editMode=!1,this._errorLabel="",this._errorLabelVisible=!1}firstUpdated(){this.addEventListener("click",this._onClick.bind(this))}get _editableElement(){return this.shadowRoot.querySelector("[data-js='editable']")}_submitValue(){this.dispatchEvent(new CustomEvent("submit",{detail:this.value}))}async _onClick(){this._editMode=!0,await this.updateComplete,this._editableElement?.focus()}_onKeyDown(t){"Enter"===t.key&&(t.preventDefault(),this._editableElement.blur(),this.submitOn===Input.SubmitOn.ENTER&&this._submitValue(),this.clearOnEnter&&(this.value="",this._editableElement.value=""))}_onBlur(t){this._editMode=!1;const n=(t.target.value??t.target.innerText).trim();if(""===n&&this.noEmptyValue)this._editableElement.value=this.value;else if(this.maxLength&&n.length>this.maxLength)this._errorLabelVisible=!1;else{if(!this._validate(n))return this.noEmptyValue?void(this._errorLabelVisible=!1):(this._errorLabelVisible=!1,this.value="",void(this._editableElement.value=this.value));this.value=n,this.submitOn===Input.SubmitOn.BLUR&&this._submitValue()}}_onKeyUp(t){const n=(t.target.value??t.target.innerText).trim();this._validate(n),this.dispatchEvent(new CustomEvent("change",{detail:n}))}_validate(t){const n=this.tests.filter((n=>!n.validator(t)));return this._errorLabelVisible=!1,!(n.length>0&&(this._errorLabel=n[0].label,this._errorLabelVisible=!0,this.dispatchEvent(new CustomEvent("validationerror")),1))}async _onEditableParagraphFocus(t){await this.updateComplete,window.getSelection().selectAllChildren(this._editableElement),t.target.innerText=this.value}_onInputFocus(t){this._editableElement.select(),t.target.value=this.value}get templates(){return{paragraphTemplate:et`<p data-test="non-editable" class="truncate max-w-full padding-x padding-y ${this.value?"":"placeholder-color"}">${this.value||this.placeholder}</p>`,editableParagraphTemplate:et`<p data-test="editable" data-js="editable" class="truncate max-w-full padding-x padding-y" @keyup="${this._onKeyUp}" @keydown="${this._onKeyDown}" @focus="${this._onEditableParagraphFocus}" @blur="${this._onBlur}" contenteditable="true" spellcheck="false">${this.value||this.placeholder}</p>`,inputTemplate:et`<input data-js="editable" class="padding-x padding-y" spellcheck="false" maxlength="${this.maxLength}" placeholder="${this.placeholder}" .value="${this.value}" .disabled="${this.disabled}" @keyup="${this._onKeyUp}" @keydown="${this._onKeyDown}" @focus="${this._onInputFocus}" @blur="${this._onBlur}">`,errorLabel:et`<span data-test="error-label" class="error-label absolute top-full w-max text-sm">${this._errorLabel}</span>`}}render(){return this.fitToContent?k$1.platform.isIPhone||k$1.platform.isIPad?[this._errorLabelVisible?this.templates.errorLabel:nt,this._editMode&&!this.disabled?this.templates.inputTemplate:this.templates.paragraphTemplate]:[this._errorLabelVisible?this.templates.errorLabel:nt,this._editMode&&!this.disabled?this.templates.editableParagraphTemplate:this.templates.paragraphTemplate]:[this._errorLabelVisible?this.templates.errorLabel:nt,this.templates.inputTemplate]}}Input.SubmitOn={BLUR:"BLUR",ENTER:"ENTER"},k$1.initSync({feature:{runAll:!0}});class OverlayModal extends BaseElement{static get properties(){return{additionalClasses:{type:Object,reflect:!0},firstLevelBreakpoint:{type:Number,reflect:!0},overlayedItemsPosition:{type:Object,reflect:!0},secondLevelBreakpoint:{type:Number,reflect:!0},visibilityMode:{type:String,reflect:!0},_firstLevelItemsVisible:{attribute:!1},_modalControllerVisible:{attribute:!1},_modalVisible:{attribute:!1},_secondLevelItemsVisible:{attribute:!1},_topLeftVisible:{attribute:!1},_topRightVisible:{attribute:!1},_bottomLeftVisible:{attribute:!1},_bottomRightVisible:{attribute:!1},_tileWidth:{attribute:!1}}}static get styles(){return[...super.styles,Te`:host{display:block;height:100%;color:var(--text-primary)}#wrapper{border-radius:var(--border-radius)}.backdrop{background-color:var(--overlay-modal-backdrop,rgba(0,0,0,.75))}.modal-content{background-color:var(--overlay-modal-bg,var(--bg-secondary));border:var(--border-width) var(--border-style) var(--border-secondary);border-radius:var(--border-radius)}`]}constructor(){super(),this.additionalClasses={},this.firstLevelBreakpoint=225,this.overlayedItemsPosition={},this.secondLevelBreakpoint=480,this.visibilityMode="",this._firstLevelItemsVisible=!1,this._secondLevelItemsVisible=!1,this._modalControllerVisible=!1,this._modalVisible=!1,this._resizeObserver=null,this._tileWidth=0,this._touchscreen="ontouchstart"in window}_onTileClick(){this.dispatchEvent(new CustomEvent("tileclick",{bubbles:!0})),this.visibilityMode===OverlayModal.visibilityModes.SHOW_MODAL_WITH_CLICK_ON_TILE&&this._tileWidth<this.secondLevelBreakpoint&&this._onModalToggle()}_onModalToggle(){this._modalVisible=!this._modalVisible,this._setOverlaysVisibility()}_setupResizeObserver(){this._resizeObserver=new ResizeObserver(ft((t=>{const{width:n}=t[0].contentRect;this._tileWidth=n,this._handleTileResize()}),300));const t=this.shadowRoot.querySelector("#wrapper");this._resizeObserver.observe(t)}_handleTileResize(){this._firstLevelItemsVisible=this._tileWidth>this.firstLevelBreakpoint,(this._touchscreen||this.visibilityMode===OverlayModal.visibilityModes.RESPONSIVE)&&this._setOverlaysVisibility()}_addHoverListeners(){this.addEventListener("mouseenter",this._setOverlaysVisibility.bind(this)),this.addEventListener("mouseleave",this._hideOverlays.bind(this))}_setOverlaysVisibility(){if(!this._modalVisible)switch(this.visibilityMode){case OverlayModal.visibilityModes.SECOND_LEVEL_ITEMS_ON_HOVER:this._secondLevelItemsVisible=!0;break;case OverlayModal.visibilityModes.MODAL_CONTROLLER_ON_HOVER:this._modalControllerVisible=!0;break;case OverlayModal.visibilityModes.SECOND_LEVEL_ITEMS_ALWAYS_VISIBLE:case OverlayModal.visibilityModes.MODAL_CONTROLLER_ALWAYS_VISIBLE:break;case OverlayModal.visibilityModes.SHOW_MODAL_WITH_CLICK_ON_TILE:this._secondLevelItemsVisible=this._tileWidth>=this.secondLevelBreakpoint;break;default:this._secondLevelItemsVisible=this._tileWidth>=this.secondLevelBreakpoint,this._modalControllerVisible=this._tileWidth<this.secondLevelBreakpoint}}_hideOverlays(){this._modalVisible||this.visibilityMode===OverlayModal.visibilityModes.RESPONSIVE||(this._secondLevelItemsVisible=!1,this._modalControllerVisible=!1)}_setupOverlaysForHoverableDevices(){switch(this.visibilityMode){case OverlayModal.visibilityModes.SECOND_LEVEL_ITEMS_ON_HOVER:case OverlayModal.visibilityModes.MODAL_CONTROLLER_ON_HOVER:this._addHoverListeners();break;case OverlayModal.visibilityModes.SECOND_LEVEL_ITEMS_ALWAYS_VISIBLE:this._secondLevelItemsVisible=!0;break;case OverlayModal.visibilityModes.MODAL_CONTROLLER_ALWAYS_VISIBLE:this._modalControllerVisible=!0;break;default:this._addHoverListeners()}}_setupOverlaysForTouchscreenDevices(){switch(this.visibilityMode){case OverlayModal.visibilityModes.SECOND_LEVEL_ITEMS_ON_HOVER:case OverlayModal.visibilityModes.SECOND_LEVEL_ITEMS_ALWAYS_VISIBLE:this._secondLevelItemsVisible=!0;break;case OverlayModal.visibilityModes.MODAL_CONTROLLER_ON_HOVER:case OverlayModal.visibilityModes.MODAL_CONTROLLER_ALWAYS_VISIBLE:this._modalControllerVisible=!0}}_setupOverlays(){this.visibilityMode!==OverlayModal.visibilityModes.NEVER_VISIBLE&&(this._touchscreen?this._setupOverlaysForTouchscreenDevices():this._setupOverlaysForHoverableDevices())}_setSlotVisibility(t,n){this.overlayedItemsPosition[t]?.forEach((t=>{switch(t){case"top-left":this._topLeftVisible=n;break;case"top-right":this._topRightVisible=n;break;case"bottom-right":this._bottomRightVisible=n;break;case"bottom-left":this._bottomLeftVisible=n}}))}firstUpdated(){this._setupOverlays(),this._setupResizeObserver()}updated(t){t.has("_firstLevelItemsVisible")&&this._setSlotVisibility("firstLevelItems",this._firstLevelItemsVisible),t.has("_secondLevelItemsVisible")&&this._setSlotVisibility("secondLevelItems",this._secondLevelItemsVisible),t.has("_modalControllerVisible")&&this._setSlotVisibility("modalController",this._modalControllerVisible),t.has("_modalVisible")&&void 0!==t.get("_modalVisible")&&this.dispatchEvent(new CustomEvent("togglemodal",{detail:this._modalVisible,bubbles:!0}))}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver?.disconnect()}render(){return et`${this._modalVisible?et`<div class="backdrop fixed inset-0 z-50 flex justify-center items-center" @click="${this._onModalToggle}"><slot name="modal-content" class="modal-content grid gap-2 justify-items-center p-2" @click="${t=>t.stopPropagation()}"></slot></div>`:nt}<div id="wrapper" @click="${this._onTileClick}" class="relative w-full h-full inline-block"><div @click="${t=>t.stopPropagation()}">${this._topLeftVisible?et`<div class="absolute top-0 left-0 p-1"><slot name="top-left"></slot></div>`:nt} ${this._topRightVisible?et`<div class="absolute top-0 right-0 p-1"><slot name="top-right"></slot></div>`:nt}<div class="flex absolute bottom-0 w-full">${this._bottomLeftVisible?et`<div class="p-1 ${this.additionalClasses.bottomLeft?this.additionalClasses.bottomLeft:""}"><slot name="bottom-left"></slot></div>`:nt} ${this._bottomRightVisible?et`<div class="p-1 ml-auto ${this.additionalClasses.bottomRight?this.additionalClasses.bottomRight:""}"><slot name="bottom-right"></slot></div>`:nt}</div></div></div>`}}OverlayModal.visibilityModes={RESPONSIVE:"RESPONSIVE",SECOND_LEVEL_ITEMS_ON_HOVER:"SECOND_LEVEL_ITEMS_ON_HOVER",MODAL_CONTROLLER_ON_HOVER:"MODAL_CONTROLLER_ON_HOVER",SECOND_LEVEL_ITEMS_ALWAYS_VISIBLE:"SECOND_LEVEL_ITEMS_ALWAYS_VISIBLE",MODAL_CONTROLLER_ALWAYS_VISIBLE:"MODAL_CONTROLLER_ALWAYS_VISIBLE",NEVER_VISIBLE:"NEVER_VISIBLE",SHOW_MODAL_WITH_CLICK_ON_TILE:"SHOW_MODAL_WITH_CLICK_ON_TILE"};class Select extends BaseElement{static get styles(){return[...super.styles,Te`.select-disabled{color:var(--select-disabled-color,var(--text-secondary))}.select-enabled{color:var(--select-enabled-color,var(--text-primary))}.select{background-color:var(--input-bg);padding:var(--select-padding,.5rem 1.5rem .5rem .5rem);border-radius:var(--border-radius,.5rem)}`]}static get properties(){return{disabled:{type:Boolean},options:{type:Array,noAccessor:!0},placeholder:{type:String},selectedId:{type:String},selectedValue:{type:Object}}}constructor(){super(),this.disabled=!1,this.placeholder="",this.selectedValue=void 0,this.selectedId=void 0}get templates(){return{option:t=>et`<option value="${t.id}" ?selected="${this.selectedId===t.id}">${t.label}</option>`,options:()=>this.options.length>0?this.options.map((t=>this.templates.option(t))):et`<option>${this.placeholder}</option>`}}set options(t){if(!Array.isArray(t))throw new TypeError(`"${Select.is}" options must be an array`);const n=t.map((t=>t.id)),r=new Set(n).size===n.length;if(!n.every((t=>"string"==typeof t&&t.trim().length>0))||!r)throw new TypeError(`"${Select.is}" options must define an unique "id" of type String`);this.__options=t.map((t=>({value:void 0,selected:!1,label:void 0,...t}))),this.requestUpdate("options")}get options(){return this.__options??[]}_onChange(t){const{id:n,value:r}=this.options.find((n=>n.id===t.target.value));this.selectedId=n,this.selectedValue=r,this.dispatchEvent(new CustomEvent("change"))}updated(t){if(t.has("options")&&this.options.length>0){const{id:t,value:n}=this.options.find((t=>t.selected))??this.options[0];this.selectedId=t,this.selectedValue=n}if(t.has("selectedId")&&this.options.length>0){const{value:t}=this.options.find((t=>t.id===this.selectedId));this.selectedValue=t}0===this.options.length?this.disabled=!0:this.disabled=!1}render(){return et`<div data-test="wrapper" class="relative w-full"><select class="select w-full block appearance-none focus:outline-none focus:shadow-outline font-sans ${this.disabled?"select-disabled":"select-enabled"}" ?disabled="${this.disabled||0===this.options.length}" @change="${this._onChange}">${this.templates.options()}</select><div data-test="chevron" class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2"><svg class="h-4 w-4 fill-current ${this.disabled?"select-disabled":"select-enabled"}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg></div></div>`}}class DeviceSelect extends BaseElement{static get styles(){return[...super.styles,Te`.audio-select{visibility:var(--visibility-audio-select,visible)}.video-select{visibility:var(--visibility-video-select,visible)}.output-select{visibility:var(--visibility-output-select,visible)}.resolution-select{visibility:var(--visibility-resolution-select,visible)}`]}static get dependencies(){return[...super.dependencies,Select]}static get resolutions(){return[{width:3840,height:2160},{width:1920,height:1080},{width:1280,height:720},{width:1024,height:768},{width:640,height:480},{width:320,height:240}]}static get properties(){return{videoResolutionsPlaceholder:{type:String},videoDevicesPlaceholder:{type:String},audioDevicesPlaceholder:{type:String},outputDevicesPlaceholder:{type:String}}}constructor(){super(),this._stream=void 0,this._videoOptions=[],this._audioOptions=[],this._outputOptions=[],this._resolutions={},this._deviceChangeHandler=void 0,this.videoResolutionsPlaceholder="Camera resolutions not available",this.videoDevicesPlaceholder="Camera not available",this.audioDevicesPlaceholder="Microphone not available",this.outputDevicesPlaceholder="Speakers not available"}set stream(t){if(!(t instanceof MediaStream))throw new TypeError('Value for property "stream" is not a MediaStream');this._stream=t,this._initialize()}get stream(){return this._stream}get selectedVideoDevice(){return this._videoOptions.find((t=>t.selected))?.value}get selectedAudioDevice(){return this._audioOptions.find((t=>t.selected))?.value}get selectedOutputDevice(){return this._outputOptions.find((t=>t.selected))?.value}async _initialize(){const[t]=this._stream.getVideoTracks(),[n]=this._stream.getAudioTracks(),r=t&&B(t),o=n&&B(n),l=await Promise.all([D(),O(),R()]);this._videoOptions=[{id:"0",label:"No camera selected",value:null},...l[0].map(((t,n)=>({value:t,id:(n+1).toString(),label:0===t.label.trim().length?"Unknown camera device":t.label,selected:t.deviceId===r?.deviceId})))],this._audioOptions=[{id:"0",label:"No microphone selected",value:null},...l[1].map(((t,n)=>({value:t,id:(n+1).toString(),label:0===t.label.trim().length?"Unknown microphone device":t.label,selected:t.deviceId===o?.deviceId})))],this._outputOptions=l[2].map(((t,n)=>({value:t,id:n.toString(),label:0===t.label.trim().length?"Unknown output device":t.label,selected:0===n})));const h=this._videoOptions.find((t=>t.selected));if(h){const{deviceId:n}=h.value,r=t.getSettings(),o=await U(h.value,DeviceSelect.resolutions),l=o.findIndex((({width:t,height:n})=>!(r.width!==t&&r.width!==n||r.height!==t&&r.height!==n)));l<0&&(o.push({width:r.width,height:r.height}),o.sort(((t,n)=>t.width>n.width?-1:1))),this._resolutions[n]=o.map(((t,n)=>({id:n.toString(),value:t,label:`${t.width} x ${t.height}`,selected:l===n})))}void 0===this.selectedVideoDevice&&(this._videoOptions[0].selected=!0),void 0===this.selectedAudioDevice&&(this._audioOptions[0].selected=!0),this.requestUpdate()}async _onVideoDeviceChange(t){const{selectedValue:n,selectedId:r}=t.target;if(this.selectedVideoDevice){const[t]=this._stream.getVideoTracks();this._stream.removeTrack(t),t.stop()}if(n instanceof MediaDeviceInfo){let r;try{const{value:t}=this._resolutions[n.deviceId]?.find((t=>t.selected))??{};r=await w(n,t)}catch(t){return this.dispatchEvent(new CustomEvent("videodeviceerror",{detail:t})),this._videoOptions.find((t=>t.selected)).selected=!1,this._videoOptions[0].selected=!0,void this.requestUpdate()}let o=this._resolutions[n.deviceId]?.map((t=>t.value));const l=r.getTracks()[0].getSettings();this._stream.merge(r),void 0===o&&(o=await U(n,DeviceSelect.resolutions));const h=o.findIndex((({width:t,height:n})=>!(l.width!==t&&l.width!==n||l.height!==t&&l.height!==n)));this._resolutions[n.deviceId]=o.map(((t,n)=>({id:n.toString(),value:t,label:`${t.width} x ${t.height}`,selected:n===h})))}this._videoOptions.find((t=>t.selected)).selected=!1,this._videoOptions[r].selected=!0,this.dispatchEvent(new CustomEvent("videodevicechange",{detail:n})),this.requestUpdate()}async _onAudioDeviceChange(t){const{selectedValue:n,selectedId:r}=t.target;if(this.selectedAudioDevice){const[t]=this._stream.getAudioTracks();this._stream.removeTrack(t),t.stop()}if(n instanceof MediaDeviceInfo){let r;try{r=await w(n)}catch(t){return this.dispatchEvent(new CustomEvent("audiodeviceerror",{detail:t})),this._audioOptions.find((t=>t.selected)).selected=!1,this._audioOptions[0].selected=!0,void this.requestUpdate()}this._stream.merge(r)}this._audioOptions.find((t=>t.selected)).selected=!1,this._audioOptions[r].selected=!0,this.dispatchEvent(new CustomEvent("audiodevicechange",{detail:n})),this.requestUpdate()}async _onVideoResolutionChange(t){const{selectedValue:n,selectedId:r}=t.target,{height:o,width:l}=n;try{await Promise.all(this._stream.getVideoTracks().map((t=>t.applyConstraints({width:l,height:o}))));const{deviceId:t}=this.selectedVideoDevice;this._resolutions[t].find((t=>t.selected)).selected=!1,this._resolutions[t].find((t=>t.id===r)).selected=!0,this.dispatchEvent(new CustomEvent("videoresolutionchange",{detail:{height:o,width:l}}))}catch(t){this.dispatchEvent(new CustomEvent("videoresolutionerror",{detail:t}))}}async _onOutputChange(t){this.dispatchEvent(new CustomEvent("outputdevicechange",{detail:t.target.selectedValue}))}firstUpdated(){super.firstUpdated(),A()}connectedCallback(){super.connectedCallback(),this._deviceChangeHandler=()=>this._initialize(),navigator.mediaDevices.addEventListener("devicechange",this._deviceChangeHandler)}disconnectedCallback(){navigator.mediaDevices.removeEventListener("devicechange",this._deviceChangeHandler)}render(){const t=this._resolutions[this.selectedVideoDevice?.deviceId]??[];return et`<sv-select id="videoResolutions" class="block mb-3 camera-select" placeholder="${this.videoResolutionsPlaceholder}" .options="${t}" @change="${this._onVideoResolutionChange}" ?disabled="${0===t.length}"></sv-select><sv-select id="videoDevices" class="block mb-3 video-select" placeholder="${this.videoDevicesPlaceholder}" .options="${this._videoOptions}" ?disabled="${0===this._videoOptions.length}" @change="${this._onVideoDeviceChange}"></sv-select><sv-select id="audioDevices" class="block mb-3 microphone-select" placeholder="${this.audioDevicesPlaceholder}" .options="${this._audioOptions}" ?disabled="${0===this._audioOptions.length}" @change="${this._onAudioDeviceChange}"></sv-select><sv-select id="outputDevices" class="block mb-3 output-select" placeholder="${this.outputDevicesPlaceholder}" .options="${this._outputOptions}" ?disabled="${0===this._outputOptions.length}" @change="${this._onOutputChange}" disabled="disabled"></sv-select>`}}class Sidebar extends BaseElement{static properties={...super.properties,visible:{type:Boolean,reflect:!0},visibleTabIndex:{type:Number,reflect:!0},_tabs:{attribute:!1}};static dependencies=[...super.dependencies,ToggleButton];static styles=[...super.styles,Te`:host{display:none}:host([visible]){display:block}.scrollbar{overflow:hidden}.scrollbar::-webkit-scrollbar-track{background:0 0}.scrollbar::-webkit-scrollbar-thumb{background:var(--btn-secondary);width:1px}.scrollbar:hover{overflow:auto;scrollbar-width:thin;scrollbar-color:var(--btn-secondary)}.sidebar{color:var(--sidebar-text,var(--text-primary));background-color:var(--sidebar-bg,var(--bg-secondary))}.tab-button{--btn-checked:var(--sidebar-btn-checked, var(--btn-secondary))}.close-button{fill:var(--sidebar-close-icon-color,var(--text-primary))}@media only screen and (hover:none) and (pointer:coarse){.scrollbar{overflow:auto}}@media (max-width:600px){.blank-element{display:none}.backdrop{position:fixed;inset:0;background-color:var(--sidebar-backdrop,rgba(0,0,0,.5))}}@media (max-width:414px){.sidebar{width:100%}}`];constructor(){super(),this.visible=!0,this.visibleTabIndex=0,this._closeIcon=En,this._tabs=[]}firstUpdated(){this._tabs=this.shadowRoot.querySelector("slot").assignedElements()}updated(t){t.has("visibleTabIndex")&&this._setTabVisibility(),t.has("visible")&&this._dispatchVisibilityChange()}_onTabClick(t){this.visibleTabIndex=t,this.dispatchEvent(new CustomEvent("tabchange",{detail:t}))}_dispatchVisibilityChange(){this.dispatchEvent(new CustomEvent("visibilitychange",{detail:this.visible}))}_setTabVisibility(){this._tabs.forEach(((t,n)=>{t.hidden=this.visibleTabIndex!==n,t.active=this.visibleTabIndex===n}))}render(){return et`<div data-test="blank-element" class="blank-element w-96"></div><div data-test="backdrop" class="backdrop"></div><div data-test="sidebar" class="sidebar absolute inset-y-0 right-0 w-96 max-w-full flex flex-col"><div data-test="top-bar" class="flex p-2"><div class="scrollbar flex w-full">${this._tabs.map(((t,n)=>et`<sv-toggle-button appearance="rectangular" class="tab-button mr-2 w-full whitespace-nowrap" ?checked="${this.visibleTabIndex===n}" @click="${t=>{t.preventDefault(),this._onTabClick(n)}}">${At(t,"change",(t=>t.target.tabTitle),t.tabTitle)}</sv-toggle-button>`))}</div><button class="close-button" @click="${()=>{this.visible=!1}}">${this._closeIcon}</button></div><div class="grow overflow-auto h-0"><slot></slot></div></div>`}}k$1.initSync({feature:{runAll:!0}});class Video extends BaseElement{static properties={...super.properties,audioDisabled:{type:Boolean,reflect:!0},covered:{type:Boolean,reflect:!0},imageUrl:{type:String},mirrored:{type:Boolean,reflect:!0},muted:{type:Boolean,reflect:!0},sinkId:{type:String},stream:{type:Object},videoDisabled:{type:Boolean,reflect:!0},volume:{type:Number,reflect:!0}};static styles=[...super.styles,Te`:host{display:block;height:100%;width:100%}.mirror{transform:scaleX(-1)}.wrapper{overflow:hidden;border-radius:var(--border-radius)}img{border-radius:var(--border-radius)}`];#h=fn();constructor(){super(),this.audioDisabled=!1,this.covered=!1,this.imageUrl=void 0,this.mirrored=!1,this.muted=!1,this.sinkId=void 0,this.videoDisabled=!1,this.volume=1}get templates(){return{videoPlayer:()=>et`<video ${_n(this.#h)} autoplay playsinline class="absolute w-full h-full bg-black ${this.mirrored?"mirror":""} ${this.covered?"object-cover":""}" .volume="${this.volume}" .muted="${this.muted}" .srcObject="${this.stream}"></video>`,videoDisabled:()=>et`<div class="pointer-events-none absolute-center w-20"><img src="${this.imageUrl??"data:image/svg+xml,%3Csvg width='153' height='152' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' overflow='hidden'%3E%3Cdefs%3E%3CclipPath id='clip0'%3E%3Crect x='273' y='109' width='153' height='152'/%3E%3C/clipPath%3E%3C/defs%3E%3Cg clip-path='url(%23clip0)' transform='translate(-273 -109)'%3E%3Crect x='274' y='109' width='151' height='151' fill='%23D9D9D9'/%3E%3Cpath d='M293.001 239.252C292.84 212.191 318.005 190.14 349.209 190.001 380.413 189.861 405.839 211.686 405.999 238.748 406 238.832 406 238.916 406 239L349.5 239Z' fill='%237C8080' fill-rule='evenodd'/%3E%3Cpath d='M322 156.5C322 140.208 334.312 127 349.5 127 364.688 127 377 140.208 377 156.5 377 172.792 364.688 186 349.5 186 334.312 186 322 172.792 322 156.5Z' fill='%237C8080' fill-rule='evenodd'/%3E%3C/g%3E%3C/svg%3E"}" class="object-cover relative" alt="Avatar"></div>`}}onUpdateRequested(){const t=this.shadowRoot.querySelector("video");t instanceof HTMLVideoElement&&t.load()}updated(t){t.has("sinkId")&&"string"==typeof this.sinkId&&this.sinkId.trim().length>0&&this.#h.value?.setSinkId?.(this.sinkId)}render(){return et`<div class="wrapper relative w-full h-full inline-block">${this.templates.videoPlayer()} ${this.videoDisabled?this.templates.videoDisabled():nt}<slot></slot></div>`}}var Tn=Object.freeze({__proto__:null,AdvancedOptionsMixin:function(t){return class AdvancedOptions extends t{static get keyModifier(){return"Alt"}static get properties(){return{advancedOptionsVisible:{type:Boolean,reflect:!0}}}static get is(){return t.is}constructor(){super(),this.advancedOptionsVisible=!1,this.keyboardEventlisteners=new Map}connectedCallback(){super.connectedCallback();const t=[AdvancedOptions.keyModifier].flat(),n=n=>{t.every((t=>n.getModifierState(t)))&&!this.advancedOptionsVisible&&(this.advancedOptionsVisible=!0,this.onOptionsVisible(n))},r=n=>{!t.every((t=>n.getModifierState(t)))&&this.advancedOptionsVisible&&(this.advancedOptionsVisible=!1,this.onOptionsHidden(n))};this.keyboardEventlisteners.set("keydown",n),this.keyboardEventlisteners.set("keyup",r),window.addEventListener("keydown",n),window.addEventListener("keyup",r)}disconnectedCallback(){super.disconnectedCallback();const t=this.keyboardEventlisteners.get("keydown"),n=this.keyboardEventlisteners.get("keyup");window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),this.keyboardEventlisteners.delete("keydown"),this.keyboardEventlisteners.delete("keyup")}onOptionsVisible(t){}onOptionsHidden(t){}}},Badge,BaseElement,BaseRoom,Box,Button,Card:class Card extends BaseElement{static get properties(){return{inlineButtons:{type:Boolean},_numberOfButtons:{type:Number,reflect:!0}}}static get styles(){return[...super.styles,Te`::slotted(*){font-size:1em;margin:0;padding:0}::slotted(:nth-child(n+2)){margin-top:.75rem!important}.card{background-color:var(--card-bg-color,var(--bg-secondary));border-style:var(--card-border-style,var(--border-style));border-width:var(--card-border-width,var(--border-width));border-color:var(--card-border-color,var(--border-secondary));border-radius:var(--card-border-radius,var(--border-radius));padding:var(--card-padding,1.25rem)}.heading{color:var(--card-heading-color,var(--text-primary))}.paragraph{color:var(--card-paragraph-color,var(--text-primary))}`]}constructor(){super(),this.inlineButtons=!1,this._numberOfButtons=0}firstUpdated(){const t=this.shadowRoot.querySelector('[name="button"]').assignedElements();this._numberOfButtons=t.length}render(){return et`<div class="card text-center font-sans select-none"><slot name="heading" class="heading block text-xl font-bold"></slot><slot name="paragraph" class="paragraph block leading-6"></slot><slot name="button" class="${this.inlineButtons?`grid gap-2 grid-cols-${this._numberOfButtons}`:""}"></slot><slot></slot></div>`}},Chat:class Chat extends BaseElement{static get properties(){return{messages:{type:Array},locale:{type:String},user:{type:Object},value:{type:String},height:{type:Number},autogrow:{type:Boolean},_chatTextContent:{attribute:!1}}}static get styles(){return[...super.styles,Te`.chat-box{background:var(--chat-bg,var(--bg-secondary));color:var(--chat-text,var(--text-primary))}.bubble-border{border-radius:25px/50px}.message-bubble--right{background:var(--chat-self-bubble-bg,#e2e100);color:var(--chat-self-bubble-text,#000)}.message-bubble--left{background:var(--chat-foreign-bubble-bg,#d3d3d3);color:var(--chat-foreign-bubble-text,#000)}.message-bubble--left:before{content:'';position:absolute;bottom:-30px;right:46px;border-width:0 0 30px 17px;border-style:solid;border-color:transparent var(--chat-foreign-bubble-bg,#d3d3d3);display:block;width:0}.message-bubble--right:after{content:'';position:absolute;bottom:-33px;left:50px;border-width:0 23px 45px 0;border-style:solid;border-color:transparent var(--chat-self-bubble-bg,#e2e100);display:block;width:0}.send-button{background:var(--chat-btn-bg,var(--btn-secondary));color:var(--chat-btn-text,var(--btn-text));border-radius:var(--border-radius)}.message-input{background:var(--chat-input-bg,var(--input-bg));color:var(--chat-input-text,var(--text-primary));border-radius:var(--border-radius)}.meta-info{color:var(--chat-meta-info-text,var(--text-primary))}`]}constructor(){super(),this.messages=[],this.locale=navigator.language,this.user={},this._button=null,this.value="",this.height=1,this.autogrow=!1,this._chatTextContent={emptyChat:"Chat messages are cleared when the room is empty",messageInputPlaceholder:"Type a message",send:"Send"}}set chatTextContent(t){"object"!=typeof t||null===t||Array.isArray(t)||(this._chatTextContent={...this._chatTextContent,...t})}_validate(){this.value.length>0?(this._button.disabled=!1,this._button.classList.remove("cursor-not-allowed")):(this._button.disabled=!0,this._button.classList.add("cursor-not-allowed"))}_resetComponent(){this._button.disabled=!0,this._button.classList.add("cursor-not-allowed"),this.value="",this._clear()}_getTime(t){return new Date(t).toLocaleTimeString(this.locale)}_onInput(){this.value=this._textarea.value,this._validate(),this.autogrow&&this._setTextareaHeight(),this.dispatchEvent(new CustomEvent("changeinput",{detail:this.value}))}_onSubmit(t){this.value&&0===this.value.length&&(this.value=t?.detail?.trim?.()),this.value=this.value?.trim?.(),t?.preventDefault(),this.value&&this.value.length>0&&(this.dispatchEvent(new CustomEvent("send",{detail:{message:this.value,timestamp:Date.now(),sender:this.user.name,id:this.user.id}})),this.messages=[...this.messages,{message:this.value,timestamp:Date.now(),sender:this.user.name,self:!0}],this._resetComponent())}_scrollLastMessageIntoView(){this.shadowRoot.querySelector("#messages-wrapper").lastElementChild.scrollIntoView()}_onKeyUp(t){"Enter"!==t.key||t.shiftKey||this._clear()}_setTextareaHeight(){this._textarea.style.height="auto",this._textarea.style.height=`${this._textarea.scrollHeight}px`}_clear(){this._textarea.value="",this._textarea.style.height="100%"}_sendMessage(t){return this.value=t.target.value,"Enter"!==t.key||t.shiftKey||this._onSubmit(null),null}firstUpdated(t){super.firstUpdated(t),this._button=this.shadowRoot.querySelector("button"),this._textarea=this.shadowRoot.querySelector("textarea")}updated(t){t.has("messages")&&this._scrollLastMessageIntoView(),this.shadowRoot.querySelectorAll("a").forEach((t=>{t.style.cssText="color: inherit; font-weight: bold; text-decoration: underline"}))}render(){return et`<div class="chat-box flex flex-col h-full"><div class="grow overflow-auto"><div id="messages-wrapper" class="flex flex-col mb-9">${this._messagesTemplate()}</div></div><form class="p-4 flex w-full sticky bottom-0"><textarea id="textarea-component" class="overflow-auto resize-none align-middle p-2 w-full message-input" type="text" placeholder="${this._chatTextContent.messageInputPlaceholder}" value="${this.value}" rows="${this.height}" @keyup="${t=>this._onKeyUp(t)}" @keypress="${t=>this._sendMessage(t)}" @input="${t=>this._onInput(t)}"></textarea> <button @click="${this._onSubmit}" class="w-24 h-full p-2 ml-2 cursor-not-allowed send-button" type="submit" value="text">${this._chatTextContent.send}</button></form></div>`}_messagesTemplate(){return this.messages.length<=0?et`<p id="empty-chat-message" class="p-2 m-2 text-center">${this._chatTextContent.emptyChat}</p>`:this.messages.map((t=>et`<div class="flex flex-col w-4/5 ${t.self?"message-box-right self-end":"message-box-left"}"><p class="meta-info p-2 ${t.self?"text-right":"text-left"}">${this._getTime(t.timestamp)}</p><blockquote class="relative p-4 m-2 w-full bubble-border ${t.self?"message-bubble--right self-end":"message-bubble--left"}"><p class="break-words">${Sn(vt(t.message))}</p></blockquote><p class="meta-info p-2 m-2 ${t.self?"text-right":"text-left"}">${t.sender}</p></div>`))}},ContextMenu:class ContextMenu extends BaseElement{static get properties(){return{options:{type:Array,reflect:!0},touchDuration:{type:Number,reflect:!0},_visible:{attribute:!1}}}static get styles(){return[Te`.menu{position:absolute;overflow:hidden;left:var(--menu-x);top:var(--menu-y);text-align:var(--context-menu-text-align,left);min-width:var(--context-menu-min-width,8rem);color:var(--context-menu-text,var(--text-primary));background-color:var(--context-menu-bg,var(--bg-secondary));border:var(--context-menu-border,1px solid var(--context-menu-border-color,var(--border-secondary)));border-radius:var(--context-menu-border-radius,var(--border-radius))}.option{cursor:pointer;padding:var(--context-menu-padding-y,.25rem) var(--context-menu-padding-x,.75rem);transition:background-color var(--context-menu-hover-transition-duration,.3s)}.option:hover{background-color:var(--context-menu-bg-hover,var(--bg-tertiary))}`]}constructor(){super(),this.options=[],this.touchDuration=500,this._contextMenuHandler=void 0,this._menu=void 0,this._touchEndHandler=void 0,this._touchStartHandler=void 0,this._touchTimer=void 0,this._visible=!1,this._windowClickHandler=void 0}connectedCallback(){super.connectedCallback(),"ontouchstart"in window?(this.addEventListener("touchstart",this._touchStartHandler=this._onTouchStart.bind(this)),this.addEventListener("touchend",this._touchEndHandler=this._onTouchEnd.bind(this))):this.addEventListener("contextmenu",this._contextMenuHandler=this._showMenu.bind(this))}disconnectedCallback(){super.disconnectedCallback(),"ontouchstart"in window?(this.removeEventListener("touchstart",this._touchStartHandler),this.removeEventListener("touchend",this._touchEndHandler)):this.removeEventListener("contextmenu",this._contextMenuHandler),window.removeEventListener("click",this._windowClickHandler)}async _showMenu(t){t.preventDefault(),this._visible=!0,await this.updateComplete,this._setMenuPosition(t),window.addEventListener("click",this._windowClickHandler=this._hideMenu.bind(this))}_setMenuPosition(t){const n="ontouchstart"in window?t.touches[0].clientX:t.clientX,r="ontouchstart"in window?t.touches[0].clientY:t.clientY;this._menu=this.shadowRoot.querySelector(".menu");const o=n+this._menu.offsetWidth>window.innerWidth,l=r+this._menu.offsetHeight>window.innerHeight,h=o?window.innerWidth-this._menu.offsetWidth:n,g=l?window.innerHeight-this._menu.offsetHeight:r;this.style.setProperty("--menu-x",`${h}px`),this.style.setProperty("--menu-y",`${g}px`)}_hideMenu(){this._visible=!1,window.removeEventListener("click",this._windowClickHandler),"ontouchstart"in window&&(this.addEventListener("touchstart",this._touchStartHandler),this.addEventListener("touchend",this._touchEndHandler))}_onTouchStart(t){t.preventDefault(),this._touchTimer||(this._touchTimer=setTimeout((()=>this._showMenu(t)),this.touchDuration))}_onTouchEnd(t){t.preventDefault(),this._touchTimer&&(clearTimeout(this._touchTimer),this._touchTimer=void 0),this._visible&&(this.removeEventListener("touchstart",this._touchStartHandler),this.removeEventListener("touchend",this._touchEndHandler))}render(){return et`<slot></slot>${this._visible?et`<div data-test="menu" class="menu">${this.options.length>0?this.options.map((t=>et`<div data-test="option" class="option" @click="${t.action}">${t.text}</div>`)):et`<slot name="options"></slot>`}</div>`:nt}`}},DeviceSelect,Draggable:class Draggable extends BaseElement{static get properties(){return{dragDisabled:{type:Boolean,reflect:!0},resizable:{type:Boolean,reflect:!0}}}static get styles(){return[...super.styles,Te`:host{position:absolute;border-radius:var(--border-radius)}:host([resizable]){resize:both;overflow:hidden}:host([resizable]) span{position:absolute;right:0;bottom:0;width:16px;height:16px;background:linear-gradient(135deg,transparent 50%,#111827 50%);opacity:.5;pointer-events:none}`]}constructor(){super(),this.dragDisabled=!1,this._current={},this._dragTarget=void 0,this._initial={},this._minOverflow={x:0,y:0},this._offset={},this._context=void 0,this._onWindowResize=void 0}firstUpdated(){this._current.x=this._rect.x,this._current.y=this._rect.y,this._setInitialValues(),window.addEventListener("resize",this._onWindowResize=()=>{this._preventOverflow(),this._setPosition(),this._setInitialValues()}),this.ontouchstart=this._dragStart.bind(this),this.onmousedown=this._dragStart.bind(this),this._setupResizeObserver()}updated(t){t.has("dragDisabled")&&!this.dragDisabled&&this._setupDragTarget()}set resizable(t){k$1.platform.isSafari?(this._resizable=!1,this.removeAttribute("resizable")):this._resizable=t}get resizable(){return this._resizable}get _rect(){return this.getBoundingClientRect()}get _maxOverflow(){return{x:window.innerWidth-this._rect.width,y:window.innerHeight-this._rect.height}}_preventOverflow(){this._current.x<this._minOverflow.x&&(this._current.x=this._minOverflow.x),this._current.y<this._minOverflow.y&&(this._current.y=this._minOverflow.y),this._current.x>this._maxOverflow.x&&(this._current.x=this._maxOverflow.x),this._current.y>this._maxOverflow.y&&(this._current.y=this._maxOverflow.y)}_dragStart(t){this.dragDisabled||this._dragTarget&&this._dragTarget!==t.target||t.target!==this&&(this._context=new EventContext,this._context.register(document,"touchmove",this._drag.bind(this)),this._context.register(document,"touchend",this._dragEnd.bind(this)),this._context.register(document,"mousemove",this._drag.bind(this)),this._context.register(document,"mouseup",this._dragEnd.bind(this)),"touchstart"===t.type?(this._initial.x=t.touches[0].clientX-this._offset.x,this._initial.y=t.touches[0].clientY-this._offset.y):(this._initial.x=t.clientX-this._offset.x,this._initial.y=t.clientY-this._offset.y))}_drag(t){t.preventDefault(),"touchmove"===t.type?(this._current.x=t.touches[0].clientX-this._initial.x,this._current.y=t.touches[0].clientY-this._initial.y):(this._current.x=t.clientX-this._initial.x,this._current.y=t.clientY-this._initial.y),this._preventOverflow(),this._setPosition()}_setPosition(){this.style.left=this._current.x+"px",this.style.top=this._current.y+"px"}_dragEnd(){this._setInitialValues(),this._context.close(),this.dispatchEvent(new CustomEvent("dragend"))}_setInitialValues(){this._offset.x=this._current.x,this._offset.y=this._current.y,this._initial.x=this._current.x,this._initial.y=this._current.y}_setupDragTarget(){const t=this.shadowRoot.querySelector("slot").assignedElements();this._dragTarget=t.find((t=>t.hasAttribute("data-drag-target"))),this._dragTarget?this._dragTarget.style.cursor="move":this.style.cursor="move"}_setupResizeObserver(){this._resizeObserver=new ResizeObserver(ft((t=>{const{width:n,height:r}=t[0].contentRect;this.dispatchEvent(new CustomEvent("resize",{detail:{width:n,height:r}}))}),300)),this._resizeObserver.observe(this)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._onWindowResize)}render(){return et`<slot></slot>${this.resizable?et`<span></span>`:null}`}},FileTransfer,FixedAspectRatioBox:class FixedAspectRatioBox extends BaseElement{static get properties(){return{targetAspectRatio:{type:Number}}}static get styles(){return[...super.styles,Te`:host{display:flex;justify-content:center;align-items:center;height:100%}`]}constructor(){super(),this.targetAspectRatio=16/9,this._slotElement=void 0,this._resizeObserver=null}firstUpdated(){this.children[0]instanceof HTMLElement&&(this.children[0].style="display: block; height: 100%",this._slotElement=this.shadowRoot.querySelector("slot"),this._slotElement.style["aspect-ratio"]=this.targetAspectRatio,this._setupResizeObserver())}_handleResize(t){t.width/t.height>this.targetAspectRatio?(this._slotElement.style.width="auto",this._slotElement.style.height=`${t.height}px`):(this._slotElement.style.width=`${t.width}px`,this._slotElement.style.height="auto")}_setupResizeObserver(){this._resizeObserver=new ResizeObserver((t=>{this._handleResize(t[0].contentRect)})),this._resizeObserver.observe(this)}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver?.disconnect()}render(){return et`<slot class="block"></slot>`}},FullscreenMixin:function(t){return class FullscreenCapabilities extends t{static get fullscreenIsSupported(){return"function"==typeof HTMLElement.prototype.requestFullscreen&&"function"==typeof document.exitFullscreen||"function"==typeof HTMLElement.prototype.webkitRequestFullscreen&&"function"==typeof document.webkitExitFullscreen}static get properties(){return{...super.properties,isFullscreen:{attribute:!1,reflect:!0}}}static get is(){return t.is}constructor(){super(),this.fullscreenListener=void 0,this.isFullscreen=!1}async enterFullscreen(t){if(!FullscreenCapabilities.fullscreenIsSupported)throw new ReferenceError("Fullscreen API is not supported on this element");await(this.requestFullscreen?.(t)??this.webkitRequestFullscreen(t)),this.onFullscreenStart()}onFullscreenStart(){this.isFullscreen=!0,this.fullscreenListener=()=>{null!==document.fullscreenElement&&null!==document.webkitFullscreenElement||this.onFullscreenEnd()},document.addEventListener("fullscreenchange",this.fullscreenListener),document.addEventListener("webkitfullscreenchange",this.fullscreenListener),this.dispatchEvent(new Event("fullscreenstart",{bubbles:!0}))}exitFullscreen(){return this.isFullscreen?(document.exitFullscreen?.()??document.webkitExitFullscreen()).finally((()=>{this.onFullscreenEnd()})):Promise.resolve(void 0)}onFullscreenEnd(){this.isFullscreen=!1,document.removeEventListener("fullscreenchange",this.fullscreenListener),document.removeEventListener("webkitfullscreenchange",this.fullscreenListener),this.dispatchEvent(new Event("fullscreenend",{bubbles:!0}))}}},Grid:class Grid extends BaseElement{static get properties(){return{debounceDelay:{type:Number,reflect:!0},maxAspectRatio:{type:Number,reflect:!0},maxNumOfColumns:{type:Number,reflect:!0},_gridLayout:{attribute:!1},_gridSize:{attribute:!1},_maximizedView:{attribute:!1}}}static get styles(){return[...super.styles,Te`:host{display:block;height:100%;background-color:var(--grid-bg,var(--bg-primary));padding:var(--grid-padding,.5rem)}slot{grid-gap:var(--grid-gap,.5rem)}`]}constructor(){super(),this.debounceDelay=300,this.maxAspectRatio=2.1,this.maxNumOfColumns=12,this._gridLayout="",this._gridSize={},this._maximizedView=!1,this._mutationObserver=null,this._resizeObserver=null}get _gridItems(){return this.shadowRoot.querySelector("slot")?.assignedElements()}_toggleMaximize(t){return this._maximizedView?this._exitMaximizedView():this._enterMaximizedView(t)}_enterMaximizedView(t){const n=this._gridItems.find((n=>[...Array.from(n.getElementsByTagName("*")),n].some((n=>n===t))));n&&(this._maximizedView=!0,n.maximized=!0,this._gridItems.filter((t=>t!==n)).forEach((t=>{t.hidden=!0})))}_exitMaximizedView(){for(const t of this._gridItems)t.maximized=!1,t.hidden=!1;this._maximizedView=!1}_setGridLayout(){if(this._maximizedView)return void(this._gridLayout="");const{width:t,height:n}=this._gridSize;if(!t||!n)return;const r=this._getCols(t,n,this.childElementCount);this._gridLayout=`grid-cols-${r}`}_getCols(t,n,r){if(1===r)return 1;let o=1;for(let l=0;l<r;l+=1){const l=n/Math.ceil(r/o);if(Number.isNaN(l))return;if(t/o/l<this.maxAspectRatio||o===r)break;if(o===this.maxNumOfColumns)break;o+=1}return o}_handleMutation(){if(this.dispatchEvent(new Event("griditemschange")),this._maximizedView){const t=this._gridItems.find((t=>!t.hidden&&!t.maximized));t&&(t.hidden=!0),this._gridItems.every((t=>t.hidden))&&this._exitMaximizedView()}else this._setGridLayout()}_setupMutationObserver(){this._mutationObserver=new MutationObserver(this._handleMutation.bind(this)),this._mutationObserver.observe(this,{childList:!0})}_setupResizeObserver(){this._resizeObserver=new ResizeObserver(ft((t=>{const n=t[0].contentRect;this._gridSize={width:n.width,height:n.height},this._setGridLayout()}),this.debounceDelay)),this._resizeObserver.observe(this)}connectedCallback(){super.connectedCallback(),this.shadowRoot.addEventListener("togglemaximize",(t=>{this._toggleMaximize(t.target)}))}firstUpdated(){this._setupMutationObserver(),this._setupResizeObserver()}updated(t){t.has("_maximizedView")&&this._setGridLayout()}disconnectedCallback(){super.disconnectedCallback(),this._mutationObserver?.disconnect(),this._resizeObserver?.disconnect()}render(){return et`<slot class="grid h-full ${this._gridLayout}"></slot>`}},Indicator:class Indicator extends BaseElement{static get properties(){return{visible:{type:Boolean,reflect:!0}}}static get styles(){return[...super.styles,Te`.indicator{background-color:var(--indicator-bg,var(--btn-checked));border-radius:var(--indicator-border-radius,var(--border-radius))}.indicator-icon{fill:var(--indicator-icon-color,var(--btn-text))}`]}constructor(){super(),this.visible=!0}render(){return this.visible?et`<span data-test="indicator" class="indicator flex-center w-7 h-7"><slot data-test="indicator-icon" class="indicator-icon flex scale-75"></slot></span>`:nt}},Info:class Info extends BaseElement{static get styles(){return[...super.styles,Te`#info-wrapper{display:flex;width:var(--info-width,fit-content);height:var(--info-height,50px);background-color:var(--info-bg-color,var(--bg-tertiary));border-style:var(--info-border-style,var(--border-style));border-width:var(--info-border-width,var(--border-width));border-color:var(--info-border-color,transparent);border-radius:var(--info-border-radius,var(--border-radius));color:var(--info-text-color,var(--text-primary));padding:var(--info-padding,.5rem)}`]}static get properties(){return{participant:{attribute:!1},audioDisabled:{type:Boolean},videoDisabled:{type:Boolean}}}constructor(){super(),this.participant=void 0,this.audioDisabled=!1,this.videoDisabled=!1,this[kn]=this.requestUpdate.bind(this)}updated(t){t.has("participant")&&(t.get("participant")?.removeEventListener?.("statechange",this[kn]),this.participant.addEventListener?.("statechange",this[kn]))}disconnectedCallback(){super.disconnectedCallback(),this.participant?.removeEventListener?.("statechange",this[kn])}render(){return et`<div id="info-wrapper"><slot name="image"></slot><slot name="name"></slot>${this.audioDisabled?et`<slot name="audioDisabled"></slot>`:nt} ${this.videoDisabled?et`<slot name="videoDisabled"></slot>`:nt}<slot></slot></div>`}},InfoGroup:class InfoGroup extends BaseElement{static get properties(){return{participants:{attribute:!1},selfImageUrl:{type:String,reflect:!0},selfUsername:{type:String,reflect:!0},selfAudioDisabled:{type:Boolean,reflect:!0},selfVideoDisabled:{type:Boolean,reflect:!0},customAudioDisabledIcon:{attribute:!1},customVideoDisabledIcon:{attribute:!1},imageUrlCustomPropName:{type:String,reflect:!0},usernameCustomPropName:{type:String,reflect:!0},audioDisabledCustomPropName:{type:String,reflect:!0},videoDisabledCustomPropName:{type:String,reflect:!0},_infoGroupTextContent:{attribute:!1}}}static get styles(){return[...super.styles,Te`:host{color:var(--text-primary)}.avatar{border-radius:var(--info-group-avatar-border-radius,var(--border-radius))}.indicator{background-color:var(--info-group-indicator-bg,var(--btn-checked));border-radius:var(--info-group-indicator-border-radius,var(--border-radius))}.indicator-icon{fill:var(--info-group-indicator-icon-color,var(--btn-text))}.users-list{background-color:var(--info-group-users-list-bg,var(--bg-tertiary));border-radius:var(--info-group-users-list-border-radius,var(--border-radius))}`]}constructor(){super(),this.participants=[],this.selfImageUrl=void 0,this.selfUsername="",this.selfAudioDisabled=!1,this.selfVideoDisabled=!1,this.customAudioDisabledIcon=void 0,this.customVideoDisabledIcon=void 0,this.imageUrlCustomPropName="imageUrl",this.usernameCustomPropName="name",this._audioDisabledCustomPropName="audioDisabled",this._videoDisabledCustomPropName="videoDisabled",this._defaultAudioDisabledIcon=wn(),this._defaultVideoDisabledIcon=et`<svg slot="${undefined}" width="20" height="23" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M637 485.25L23 1.75A8 8 0 0 0 11.76 3l-10 12.51A8 8 0 0 0 3 26.75l614 483.5a8 8 0 0 0 11.25-1.25l10-12.51a8 8 0 0 0-1.25-11.24zM320 32c106 0 192 86 192 192a190.79 190.79 0 0 1-28.24 99.86l25.12 19.78A222 222 0 0 0 544 224C544 100.29 443.72 0 320 0a223.19 223.19 0 0 0-160.81 68.27l25.19 19.84A191.38 191.38 0 0 1 320 32zM163.07 193.53A159.34 159.34 0 0 0 320 384a158.7 158.7 0 0 0 66.24-14.73L356.69 346c-11.7 3.53-23.85 6-36.68 6A128.15 128.15 0 0 1 192 224c0-2.44.59-4.72.72-7.12zM458 303.6c13.6-23.53 22-50.47 22-79.6a159.65 159.65 0 0 0-270-115.72l25.65 20.2C258.24 108.52 287.56 96 320 96a128.14 128.14 0 0 1 128 128c0 21.62-5.9 41.69-15.4 59.57zm-196.79-155l26.15 20.59A63.31 63.31 0 0 1 320 160a16 16 0 0 0 0-32 95.06 95.06 0 0 0-58.75 20.64zM320 416c-106 0-192-86-192-192a191.88 191.88 0 0 1 7.39-52.27l-26.83-21.13A223.05 223.05 0 0 0 96 224c0 76.19 38.12 143.39 96.24 183.85L143 438.6a32 32 0 0 0-15 27.14V480a32 32 0 0 0 32 32h320a32 32 0 0 0 32-32v-11.7l-97.87-77.06A190.94 190.94 0 0 1 320 416zm160 49.74V480H160v-14.26L223.63 426a221.82 221.82 0 0 0 192.75 0z"/></svg>`,this._infoGroupTextContent={inTheRoom:"In the room",unknownUsername:"Unknown"}}firstUpdated(){this.customAudioDisabledIcon=Array.from(this.children).find((t=>"audioDisabled"===t.getAttribute("data-sv-icon"))),this.customVideoDisabledIcon=Array.from(this.children).find((t=>"videoDisabled"===t.getAttribute("data-sv-icon"))),this.participants.forEach((t=>{t instanceof EventTarget&&t.addEventListener("statechange",(()=>{this.requestUpdate()}))}))}updated(t){const n=t.get("participants");if(t.has("participants")&&void 0!==n){const t=((t,n)=>{const r=[];for(const o of n){t.some((t=>t.id===o.id))||r.push(o)}return r})(n,this.participants);t.forEach((t=>{this._onParticipantJoin(t)}))}}set audioDisabledCustomPropName(t){"!"===t[0]?(this.audioDisabledReversed=!0,this._audioDisabledCustomPropName=t.slice(1)):this._audioDisabledCustomPropName=t}set videoDisabledCustomPropName(t){"!"===t[0]?(this.videoDisabledReversed=!0,this._videoDisabledCustomPropName=t.slice(1)):this._videoDisabledCustomPropName=t}set infoGroupTextContent(t){"object"!=typeof t||null===t||Array.isArray(t)||(this._infoGroupTextContent={...this._infoGroupTextContent,...t})}_onParticipantJoin(t){t instanceof EventTarget&&t.addEventListener("statechange",(()=>{this.requestUpdate()}))}get templates(){return{userTemplate:({imageUrl:t,name:n,audioDisabled:r,videoDisabled:o})=>et`<div class="p-2 relative flex items-center"><div class="w-10 mr-2 shrink-0"><img data-test="user-image" class="avatar" alt="Avatar" src="${t??$n}"></div>${n?et`<p data-test="user-name" class="truncate mr-2">${n}</p>`:et`<p class="truncate mr-2 italic">${this._infoGroupTextContent.unknownUsername}</p>`} ${r?et`<span data-test="audio-indicator" class="indicator mr-2 flex-center w-7 h-7"><span class="scale-75 indicator-icon">${this.customAudioDisabledIcon?.cloneNode(!0)??this._defaultAudioDisabledIcon}</span></span>`:nt} ${o?et`<span data-test="video-indicator" class="indicator mr-2 flex-center w-7 h-7"><span class="scale-75 indicator-icon">${this.customVideoDisabledIcon?.cloneNode(!0)??this._defaultVideoDisabledIcon}</span></span>`:nt}</div>`,selfTemplate:()=>this.templates.userTemplate({imageUrl:this.selfImageUrl??$n,name:this.selfUsername,audioDisabled:this.selfAudioDisabled,videoDisabled:this.selfVideoDisabled}),participantList:()=>this.participants.map((({state:t})=>{const n=t[this.imageUrlCustomPropName],r=t[this.usernameCustomPropName],o=this.audioDisabledReversed?!t[this._audioDisabledCustomPropName]:t[this._audioDisabledCustomPropName],l=this.videoDisabledReversed?!t[this._videoDisabledCustomPropName]:t[this._videoDisabledCustomPropName];return this.templates.userTemplate({imageUrl:n,name:r,audioDisabled:o,videoDisabled:l})}))}}render(){return et`<h3 data-test="heading" class="mb-3">${this._infoGroupTextContent.inTheRoom} (${this.participants?this.participants.length+1:1})</h3><div data-test="users-list" class="users-list shadow-md">${[this.templates.selfTemplate(),this.templates.participantList()]}</div>`}},Input,MicrophoneButton,OverlayModal,ProgressBar:class ProgressBar extends BaseElement{static get properties(){return{indeterminate:{type:Boolean},value:{type:Number}}}static get styles(){return[...super.styles,Te`:host{display:flex;align-items:center;justify-content:center}.progress-bar{background-color:var(--progress-bar-bg-color,var(--bg-secondary));border-radius:1.25em;width:var(--progress-bar-width,300px);height:var(--progress-bar-height,22px);display:inline-block}.progress-value{background-color:var(--progress-bar-value-color,var(--btn-secondary));transition:.3s all linear;border-radius:1.25em;height:100%;display:flex;align-items:center;justify-content:center;color:var(--progress-bar-text-color,var(--text-primary))}p{height:100%;vertical-align:middle;overflow:hidden;font-size:var(--progress-bar-font-size,inherit)}.indeterminate{animation:indeterminate 3s ease infinite;-webkit-animation:indeterminate 1s ease-in-out infinite;position:relative}@keyframes indeterminate{0%{width:0;left:0;opacity:1}10%{width:30%;left:10%;opacity:.9}20%{width:40%;left:20%;opacity:.8}30%{width:50%;left:30%;opacity:.7}40%{width:40%;left:60%;opacity:.6}50%{width:30%;left:70%;opacity:.5}60%{width:20%;left:80%;opacity:.4}70%{width:15%;left:85%;opacity:.3}80%{width:10%;left:90%;opacity:.2}90%{width:5%;left:95%;opacity:.1}100%{width:0;left:100%;opacity:0}}`]}constructor(){super(),this.indeterminate=!1,this.value=0}render(){return et`<div class="progress-bar"><span class="progress-value ${this.indeterminate?"indeterminate":""}" style="width:${this.value}"><p>${this.value&&this.value>=25?`${this.value} %`:nt}</p></span></div>`}},RandomizeButton,ScreenshareMixin:function(t){return class ScreenshareCapabilities extends t{static get properties(){return{...super.properties,isSharingScreen:{attribute:!1,reflect:!0}}}static get screenshareIsSupported(){return"function"==typeof navigator.mediaDevices.getDisplayMedia}static get is(){return t.is}constructor(){super(),this.screenshare=void 0,this.isSharingScreen=!1}disconnectedCallback(){super.disconnectedCallback(),this.isSharingScreen&&this.stopScreenshare()}async startScreenshare(t={video:!0,audio:!1}){if(!ScreenshareCapabilities.screenshareIsSupported)throw new ReferenceError("Screenshare API is not supported in this browser");return this.screenshare instanceof MediaStream&&this.stopScreenshare(),this.screenshare=await navigator.mediaDevices.getDisplayMedia(t),this.screenshare.getTracks().forEach((t=>{t.onended=()=>{this.screenshare.getTracks().every((t=>"ended"===t.readyState))&&this.onScreenshareEnd(this.screenshare)}})),this.onScreenshareStart(this.screenshare),this.screenshare}onScreenshareStart(t){this.isSharingScreen=!0,this.dispatchEvent(new CustomEvent("screensharestart",{bubbles:!0,composed:!0}))}onScreenshareEnd(t){this.isSharingScreen=!1,this.screenshare=void 0,this.dispatchEvent(new CustomEvent("screenshareend",{bubbles:!0,composed:!0}))}stopScreenshare(){this.screenshare?.active&&this.screenshare.getTracks().forEach((t=>t.stop()))}}},Select,Sidebar,SidebarTab:class SidebarTab extends BaseElement{static get properties(){return{active:{type:Boolean,reflect:!0},tabTitle:{type:String,reflect:!0}}}constructor(){super(),this.active=!1,this.tabTitle=""}updated(t){t.has("tabTitle")&&this.dispatchEvent(new Event("change"))}render(){return this.active?et`<slot></slot>`:nt}},SlideButton,Snackbar:class Snackbar extends BaseElement{static get properties(){return{type:{type:String},text:{type:String},isSticky:{type:Boolean},position:{type:String},snackbars:{type:Array}}}static get styles(){return[...super.styles,Te`.success{background-color:var(--success-snackbar-color,#6ea92c);color:var(--success-text-color,#fff)}.info{background-color:var(--info-snackbar-color,#1c90d5);color:var(--info-text-color,#fff)}.danger{background-color:var(--danger-snackbar-color,#9b2c2c);color:var(--danger-text-color,#fff)}.warning{background-color:var(--warning-snackbar-color,#c7c700);color:var(--warning-text-color,#fff)}#snack.show:not(.sticky){-webkit-animation:fadeIn .5s,fadeOut .5s 4.5s forwards;animation:fadeIn .5s,fadeOut .5s 4.5s forwards}#snack.show.sticky{-webkit-animation:fadeIn .5s;animation:fadeIn .5s}@-webkit-keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@-webkit-keyframes fadeOut{from{opacity:1}to{opacity:0}}@keyframes fadeOut{from{opacity:1}to{opacity:0}}`]}constructor(){super(),this.type="info",this.text="",this.isSticky=!1,this.position="top",this.snackbars=[],this._openSnackbarListener=void 0,this._openStickySnackbarListener=void 0}connectedCallback(){super.connectedCallback(),window.addEventListener("opensnackbar",this._openSnackbarListener=t=>this._snackbarOpen(t)),window.addEventListener("openstickysnackbar",this._openStickySnackbarListener=t=>this._stickySnackbarOpen(t))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("opensnackbar",this._openSnackbarListener),window.removeEventListener("openstickysnackbar",this._openStickySnackbarListener)}_snackbarOpen(t){try{this.launchSnackbar(t.detail.text,t.detail.snackbarClass),this.dispatchEvent(new CustomEvent("snackbaropen"))}catch(t){this.dispatchEvent(new CustomEvent("snackbaropenerror",{detail:t}))}}_stickySnackbarOpen(t){try{this.launchSnackbar(t.detail.text,t.detail.snackbarClass,"sticky",t.detail.close),this.dispatchEvent(new CustomEvent("stickysnackbaropen"))}catch(t){this.dispatchEvent(new CustomEvent("stickysnackbaropenerror",{detail:t}))}}_switchSVGTemplate(t){if(!t)throw new Error("No snackbar type provided.");switch(t){case"info":default:return this.infoTemplate();case"warning":return this.warningTemplate();case"success":return this.successTemplate();case"danger":return this.dangerTemplate()}}launchSnackbar(t,n,r,o){if(r&&!o)throw new Error("The stickysnackbaropen event hasn't been dispatched correctly.");const l={type:n,text:t,isSticky:r,timestamp:Date.now(),close:o};if(!n||!t)throw new Error("Could not open snackbar");return this.snackbars=[...this.snackbars,l],r||setTimeout((()=>{this.closeSnackbar()}),1e4),!1}closeSnackbar(){this.snackbars.shift(),this.requestUpdate(),this.dispatchEvent(new CustomEvent("snackbarclose"))}closeStickySnackbar(t,n){const{close:r}=n;if(n&&r){const t=this.snackbars.map((t=>t.text)).indexOf(n.text);return this.snackbars=[...this.snackbars.slice(0,t),...this.snackbars.slice(t+1)],this.dispatchEvent(new CustomEvent("snackbarclose")),!1}throw this.dispatchEvent(new CustomEvent("snackbarcloseerror")),new Error("Cannot close the sticky snackbar")}infoTemplate(){return et`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28"><path d="M16 21.5v-2.5c0-0.281-0.219-0.5-0.5-0.5h-1.5v-8c0-0.281-0.219-0.5-0.5-0.5h-5c-0.281 0-0.5 0.219-0.5 0.5v2.5c0 0.281 0.219 0.5 0.5 0.5h1.5v5h-1.5c-0.281 0-0.5 0.219-0.5 0.5v2.5c0 0.281 0.219 0.5 0.5 0.5h7c0.281 0 0.5-0.219 0.5-0.5zM14 7.5v-2.5c0-0.281-0.219-0.5-0.5-0.5h-3c-0.281 0-0.5 0.219-0.5 0.5v2.5c0 0.281 0.219 0.5 0.5 0.5h3c0.281 0 0.5-0.219 0.5-0.5zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12 12 5.375 12 12z"></path></svg>`}warningTemplate(){return et`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28"><path d="M12 2c6.625 0 12 5.375 12 12s-5.375 12-12 12-12-5.375-12-12 5.375-12 12-12zM14 21.484v-2.969c0-0.281-0.219-0.516-0.484-0.516h-3c-0.281 0-0.516 0.234-0.516 0.516v2.969c0 0.281 0.234 0.516 0.516 0.516h3c0.266 0 0.484-0.234 0.484-0.516zM13.969 16.109l0.281-9.703c0-0.109-0.047-0.219-0.156-0.281-0.094-0.078-0.234-0.125-0.375-0.125h-3.437c-0.141 0-0.281 0.047-0.375 0.125-0.109 0.063-0.156 0.172-0.156 0.281l0.266 9.703c0 0.219 0.234 0.391 0.531 0.391h2.891c0.281 0 0.516-0.172 0.531-0.391z"></path></svg>`}successTemplate(){return et`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28"><path d="M20.062 11.469c0-0.266-0.094-0.531-0.281-0.719l-1.422-1.406c-0.187-0.187-0.438-0.297-0.703-0.297s-0.516 0.109-0.703 0.297l-6.375 6.359-3.531-3.531c-0.187-0.187-0.438-0.297-0.703-0.297s-0.516 0.109-0.703 0.297l-1.422 1.406c-0.187 0.187-0.281 0.453-0.281 0.719s0.094 0.516 0.281 0.703l5.656 5.656c0.187 0.187 0.453 0.297 0.703 0.297 0.266 0 0.531-0.109 0.719-0.297l8.484-8.484c0.187-0.187 0.281-0.438 0.281-0.703zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12 12 5.375 12 12z"></path></svg>`}dangerTemplate(){return et`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="28" viewBox="0 0 24 28"><path d="M17.953 17.531c0-0.266-0.109-0.516-0.297-0.703l-2.828-2.828 2.828-2.828c0.187-0.187 0.297-0.438 0.297-0.703s-0.109-0.531-0.297-0.719l-1.406-1.406c-0.187-0.187-0.453-0.297-0.719-0.297s-0.516 0.109-0.703 0.297l-2.828 2.828-2.828-2.828c-0.187-0.187-0.438-0.297-0.703-0.297s-0.531 0.109-0.719 0.297l-1.406 1.406c-0.187 0.187-0.297 0.453-0.297 0.719s0.109 0.516 0.297 0.703l2.828 2.828-2.828 2.828c-0.187 0.187-0.297 0.438-0.297 0.703s0.109 0.531 0.297 0.719l1.406 1.406c0.187 0.187 0.453 0.297 0.719 0.297s0.516-0.109 0.703-0.297l2.828-2.828 2.828 2.828c0.187 0.187 0.438 0.297 0.703 0.297s0.531-0.109 0.719-0.297l1.406-1.406c0.187-0.187 0.297-0.453 0.297-0.719zM24 14c0 6.625-5.375 12-12 12s-12-5.375-12-12 5.375-12 12-12 12 5.375 12 12z"></path></svg>`}render(){return et`<div id="snackbarWrapper" class="z-50 pointer-events-none fixed inset-x-0 ${"top"===this.position?"top-0":"bottom-0"}">${this.snackbars.map((t=>et`<div id="snack" class="flex justify-center mx-auto my-2 p-4 w-full max-w-7xl font-sans rounded fill-current pointer-events-none show ${t.type} ${t.isSticky}"><div class="flex items-center mr-3">${this._switchSVGTemplate(t.type)}</div><span class="flex items-center mx-auto text-center">${t.text}.</span>${t.close?et`<button type="button" class="ml-3 focus:outline-none pointer-events-auto" aria-label="Close" @click="${n=>this.closeStickySnackbar(n,t)}"><svg width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"/></svg></button>`:""}</div>`))}</div>`}},Spinner:class Spinner extends BaseElement{static get styles(){return[...super.styles,Te`@keyframes spinner{0%{transform:translate3d(-50%,-50%,0) rotate(0)}100%{transform:translate3d(-50%,-50%,0) rotate(360deg)}}.spin::before{animation:var(--spinner-animation-duration,1.5s) linear infinite spinner;animation-play-state:inherit;border:solid 5px var(--spinner-border-color,#cfd0d1);border-bottom-color:var(--spinner-color,#1c87c9);border-radius:50%;content:'';height:var(--spinner-height,40px);width:var(--spinner-width,40px);position:absolute;top:50%;left:50%;transform:translate3d(-50%,-50%,0);will-change:transform;margin-left:auto;margin-right:auto}.wrapper{height:100%;width:100%;position:relative}`]}render(){return et`<div id="spinner-wrapper" class="wrapper"><div id="spinner" class="spin"></div></div>`}},TextContentMixin:function(t){return class TextContentCapability extends t{static get properties(){return{...super.properties,innerContent:{attribute:!1}}}static get is(){return t.is}set innerContent(t){if("object"==typeof t&&null!==t&&!Array.isArray(t)){const{innerContent:n}=this;this.__innerContent={...n,...t},this.requestUpdate("innerContent",n)}}get innerContent(){return"object"==typeof this.__innerContent?this.__innerContent:{}}}},ToggleButton,Tooltip:class Tooltip extends BaseElement{static get properties(){return{orientation:{type:String},visible:{type:Boolean,reflect:!0},touchTimeout:{type:Number}}}static get styles(){return[...super.styles,Te`@keyframes fadeIn{from{opacity:0}to{opacity:1;z-index:4000}}.display{display:block}.display-none{display:none}.fade-in{animation:fadeIn;animation-duration:var(--tooltip-animation-duration,2s);animation-delay:var(--tooltip-animation-delay,1s);animation-fill-mode:forwards;opacity:0}.tooltip{background-color:var(--tooltip-bg-color,var(--bg-primary));border-style:var(--tooltip-border-style,var(--border-style));border-width:var(--tooltip-border-width,var(--border-width));border-color:var(--tooltip-border-color,var(--border-secondary));border-radius:var(--tooltip-border-radius,var(--border-radius));color:var(--tooltip-text-color,var(--text-primary));text-align:var(--tooltip-text-align,center);padding:var(--tooltip-padding,.5rem);min-width:var(--tooltip-min-width,150px)}.mobileTooltip{width:var(--mobile-tooltip-min-width,min-content);padding:var(--mobile-tooltip-padding,1rem)}`]}constructor(){super(),this.orientation="above",this.visible=!1,this._mouseoverListener=()=>{this.visible=!0},this._mouseoutListener=()=>{this.visible=!1},this._touchstartListener=()=>{this.touchTimeout=setTimeout((()=>{this.visible=!0}),this.touchTimeout)},this._touchendListener=()=>{clearTimeout(this.touchTimeout),this.visible=!1},this._touchscreen="touch"===k$1.miscellaneous.primaryInput,this.touchTimeout=500,this._context=void 0}get _orientationClasses(){switch(this.orientation){case"right":return"transform -translate-y-1/2 left-full top-2/4";case"left":return"transform -translate-y-1/2 right-full top-2/4";case"top-right":return"transform -translate-1/2  left-full bottom-full";case"top-left":return"transform -translate-1/2  right-full bottom-full";case"below":return"transform -translate-x-1/2 top-full left-2/4";case"below-right":return"transform -translate-1/2  left-full top-full";case"below-left":return"transform -translate-1/2 right-full top-full";case"none":return"";default:return"transform -translate-x-1/2 bottom-full left-2/4"}}firstUpdated(){super.firstUpdated(),this._prepareMouseEventListener()}disconnectedCallback(){super.disconnectedCallback(),this._removeMouseEventListener()}async _prepareMouseEventListener(){await this.updateComplete,this._context=new EventContext,this._context.register(this,"mouseover",this._mouseoverListener.bind(this),{passive:!0}),this._context.register(this,"mouseout",this._mouseoutListener.bind(this)),this._context.register(this,"touchstart",this._touchstartListener.bind(this),{passive:!0}),this._context.register(this,"touchend",this._touchendListener.bind(this)),this._context.register(this,"click",this._mouseoutListener.bind(this))}_removeMouseEventListener(){this._context.close()}render(){return et`<div class="flex relative h-full">${this._touchscreen?et`<slot class="tooltip mobileTooltip absolute z-100 ${this.visible?"display fade-in":"display-none"} ${this._orientationClasses}" name="tooltip"></slot>`:et`<slot class="tooltip absolute z-100 ${this.visible?"display fade-in":"display-none"} ${this._orientationClasses}" name="tooltip"></slot>`}<slot></slot></div>`}},Video,VolumeButton,define:function(...t){const[n,r]=t.flat().reduce(((t,n)=>{const r=BaseElement.isPrototypeOf(n)&&"string"==typeof n.is;return t[Number(r)].push(n),t}),[[],[]]);n.forEach((t=>console.warn(`Failed to define component "${t.name}", invalid definition`)));const o=new Set([...r.flatMap((t=>t.dependencies??[])),...r]);return Promise.allSettled(Array.from(o).filter((t=>void 0===customElements.get(t.is))).map((t=>(customElements.define(t.is,t),customElements.whenDefined(t.is)))))}});export{me as Core,G as Media,Se as Platform,Tn as UI};
